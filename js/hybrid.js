/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE. */

var requirejs,require,define;!function(e){function t(e,t){return x.call(e,t)}function a(e,t){var a,n,r,o,i,s,l,u,c,f,m,d=t&&t.split("/"),h=p.map,y=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),i=e.length-1,p.nodeIdCompat&&v.test(e[i])&&(e[i]=e[i].replace(v,"")),e=d.slice(0,d.length-1).concat(e),c=0;c<e.length;c+=1)if(m=e[c],"."===m)e.splice(c,1),c-=1;else if(".."===m){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||y)&&h){for(a=e.split("/"),c=a.length;c>0;c-=1){if(n=a.slice(0,c).join("/"),d)for(f=d.length;f>0;f-=1)if(r=h[d.slice(0,f).join("/")],r&&(r=r[n])){o=r,s=c;break}if(o)break;!l&&y&&y[n]&&(l=y[n],u=c)}!o&&l&&(o=l,s=u),o&&(a.splice(0,s,o),e=a.join("/"))}return e}function n(t,a){return function(){var n=g.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),c.apply(e,n.concat([t,a]))}}function r(e){return function(t){return a(t,e)}}function o(e){return function(t){d[e]=t}}function i(a){if(t(h,a)){var n=h[a];delete h[a],y[a]=!0,u.apply(e,n)}if(!t(d,a)&&!t(y,a))throw new Error("No "+a);return d[a]}function s(e){var t,a=e?e.indexOf("!"):-1;return a>-1&&(t=e.substring(0,a),e=e.substring(a+1,e.length)),[t,e]}function l(e){return function(){return p&&p.config&&p.config[e]||{}}}var u,c,f,m,d={},h={},p={},y={},x=Object.prototype.hasOwnProperty,g=[].slice,v=/\.js$/;f=function(e,t){var n,o=s(e),l=o[0];return e=o[1],l&&(l=a(l,t),n=i(l)),l?e=n&&n.normalize?n.normalize(e,r(t)):a(e,t):(e=a(e,t),o=s(e),l=o[0],e=o[1],l&&(n=i(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:n}},m={require:function(e){return n(e)},exports:function(e){var t=d[e];return"undefined"!=typeof t?t:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:l(e)}}},u=function(a,r,s,l){var u,c,p,x,g,v,b=[],w=typeof s;if(l=l||a,"undefined"===w||"function"===w){for(r=!r.length&&s.length?["require","exports","module"]:r,g=0;g<r.length;g+=1)if(x=f(r[g],l),c=x.f,"require"===c)b[g]=m.require(a);else if("exports"===c)b[g]=m.exports(a),v=!0;else if("module"===c)u=b[g]=m.module(a);else if(t(d,c)||t(h,c)||t(y,c))b[g]=i(c);else{if(!x.p)throw new Error(a+" missing "+c);x.p.load(x.n,n(l,!0),o(c),{}),b[g]=d[c]}p=s?s.apply(d[a],b):void 0,a&&(u&&u.exports!==e&&u.exports!==d[a]?d[a]=u.exports:p===e&&v||(d[a]=p))}else a&&(d[a]=s)},requirejs=require=c=function(t,a,n,r,o){if("string"==typeof t)return m[t]?m[t](a):i(f(t,a).f);if(!t.splice){if(p=t,p.deps&&c(p.deps,p.callback),!a)return;a.splice?(t=a,a=n,n=null):t=e}return a=a||function(){},"function"==typeof n&&(n=r,r=o),r?u(e,t,a,n):setTimeout(function(){u(e,t,a,n)},4),c},c.config=function(e){return c(e)},requirejs._defined=d,define=function(e,a,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");a.splice||(n=a,a=[]),t(d,e)||t(h,e)||(h[e]=[e,a,n])},define.amd={jQuery:!0}}(),define("almond",function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function a(e){var t=e.length,a=J.type(e);return"function"===a||J.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,a){if(J.isFunction(t))return J.grep(e,function(e,n){return!!t.call(e,n,e)!==a});if(t.nodeType)return J.grep(e,function(e){return e===t!==a});if("string"==typeof t){if(se.test(t))return J.filter(t,e,a);t=J.filter(t,e)}return J.grep(e,function(e){return W.call(t,e)>=0!==a})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=he[e]={};return J.each(e.match(de)||[],function(e,a){t[a]=!0}),t}function i(){Z.removeEventListener("DOMContentLoaded",i,!1),e.removeEventListener("load",i,!1),J.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+Math.random()}function l(e,t,a){var n;if(void 0===a&&1===e.nodeType)if(n="data-"+t.replace(be,"-$1").toLowerCase(),a=e.getAttribute(n),"string"==typeof a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:ve.test(a)?J.parseJSON(a):a}catch(r){}ge.set(e,t,a)}else a=void 0;return a}function u(){return!0}function c(){return!1}function f(){try{return Z.activeElement}catch(e){}}function m(e,t){return J.nodeName(e,"table")&&J.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Oe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function p(e,t){for(var a=0,n=e.length;n>a;a++)xe.set(e[a],"globalEval",!t||xe.get(t[a],"globalEval"))}function y(e,t){var a,n,r,o,i,s,l,u;if(1===t.nodeType){if(xe.hasData(e)&&(o=xe.access(e),i=xe.set(t,o),u=o.events)){delete i.handle,i.events={};for(r in u)for(a=0,n=u[r].length;n>a;a++)J.event.add(t,r,u[r][a])}ge.hasData(e)&&(s=ge.access(e),l=J.extend({},s),ge.set(t,l))}}function x(e,t){var a=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&J.nodeName(e,t)?J.merge([e],a):a}function g(e,t){var a=t.nodeName.toLowerCase();"input"===a&&Me.test(e.type)?t.checked=e.checked:("input"===a||"textarea"===a)&&(t.defaultValue=e.defaultValue)}function v(t,a){var n,r=J(a.createElement(t)).appendTo(a.body),o=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(r[0]))?n.display:J.css(r[0],"display");return r.detach(),o}function b(e){var t=Z,a=Ne[e];return a||(a=v(e,t),"none"!==a&&a||(Be=(Be||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Be[0].contentDocument,t.write(),t.close(),a=v(e,t),Be.detach()),Ne[e]=a),a}function w(e,t,a){var n,r,o,i,s=e.style;return a=a||je(e),a&&(i=a.getPropertyValue(t)||a[t]),a&&(""!==i||J.contains(e.ownerDocument,e)||(i=J.style(e,t)),Le.test(i)&&ze.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=i,i=a.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==i?i+"":i}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function T(e,t){if(t in e)return t;for(var a=t[0].toUpperCase()+t.slice(1),n=t,r=Ke.length;r--;)if(t=Ke[r]+a,t in e)return t;return n}function M(e,t,a){var n=He.exec(t);return n?Math.max(0,n[1]-(a||0))+(n[2]||"px"):t}function D(e,t,a,n,r){for(var o=a===(n?"border":"content")?4:"width"===t?1:0,i=0;4>o;o+=2)"margin"===a&&(i+=J.css(e,a+Se[o],!0,r)),n?("content"===a&&(i-=J.css(e,"padding"+Se[o],!0,r)),"margin"!==a&&(i-=J.css(e,"border"+Se[o]+"Width",!0,r))):(i+=J.css(e,"padding"+Se[o],!0,r),"padding"!==a&&(i+=J.css(e,"border"+Se[o]+"Width",!0,r)));return i}function Y(e,t,a){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=je(e),i="border-box"===J.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=w(e,t,o),(0>r||null==r)&&(r=e.style[t]),Le.test(r))return r;n=i&&($.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+D(e,t,a||(i?"border":"content"),n,o)+"px"}function X(e,t){for(var a,n,r,o=[],i=0,s=e.length;s>i;i++)n=e[i],n.style&&(o[i]=xe.get(n,"olddisplay"),a=n.style.display,t?(o[i]||"none"!==a||(n.style.display=""),""===n.style.display&&Te(n)&&(o[i]=xe.access(n,"olddisplay",b(n.nodeName)))):(r=Te(n),"none"===a&&r||xe.set(n,"olddisplay",r?a:J.css(n,"display"))));for(i=0;s>i;i++)n=e[i],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[i]||"":"none"));return e}function _(e,t,a,n,r){return new _.prototype.init(e,t,a,n,r)}function k(){return setTimeout(function(){$e=void 0}),$e=J.now()}function I(e,t){var a,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)a=Se[n],r["margin"+a]=r["padding"+a]=e;return t&&(r.opacity=r.width=e),r}function R(e,t,a){for(var n,r=(at[t]||[]).concat(at["*"]),o=0,i=r.length;i>o;o++)if(n=r[o].call(a,t,e))return n}function C(e,t,a){var n,r,o,i,s,l,u,c,f=this,m={},d=e.style,h=e.nodeType&&Te(e),p=xe.get(e,"fxshow");a.queue||(s=J._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,J.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(a.overflow=[d.overflow,d.overflowX,d.overflowY],u=J.css(e,"display"),c="none"===u?xe.get(e,"olddisplay")||b(e.nodeName):u,"inline"===c&&"none"===J.css(e,"float")&&(d.display="inline-block")),a.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=a.overflow[0],d.overflowX=a.overflow[1],d.overflowY=a.overflow[2]}));for(n in t)if(r=t[n],Qe.exec(r)){if(delete t[n],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!p||void 0===p[n])continue;h=!0}m[n]=p&&p[n]||J.style(e,n)}else u=void 0;if(J.isEmptyObject(m))"inline"===("none"===u?b(e.nodeName):u)&&(d.display=u);else{p?"hidden"in p&&(h=p.hidden):p=xe.access(e,"fxshow",{}),o&&(p.hidden=!h),h?J(e).show():f.done(function(){J(e).hide()}),f.done(function(){var t;xe.remove(e,"fxshow");for(t in m)J.style(e,t,m[t])});for(n in m)i=R(h?p[n]:0,n,f),n in p||(p[n]=i.start,h&&(i.end=i.start,i.start="width"===n||"height"===n?1:0))}}function P(e,t){var a,n,r,o,i;for(a in e)if(n=J.camelCase(a),r=t[n],o=e[a],J.isArray(o)&&(r=o[1],o=e[a]=o[0]),a!==n&&(e[n]=o,delete e[a]),i=J.cssHooks[n],i&&"expand"in i){o=i.expand(o),delete e[n];for(a in o)a in e||(e[a]=o[a],t[a]=r)}else t[n]=r}function A(e,t,a){var n,r,o=0,i=tt.length,s=J.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=$e||k(),a=Math.max(0,u.startTime+u.duration-t),n=a/u.duration||0,o=1-n,i=0,l=u.tweens.length;l>i;i++)u.tweens[i].run(o);return s.notifyWith(e,[u,o,a]),1>o&&l?a:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},a),originalProperties:t,originalOptions:a,startTime:$e||k(),duration:a.duration,tweens:[],createTween:function(t,a){var n=J.Tween(e,u.opts,t,a,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var a=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;n>a;a++)u.tweens[a].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(P(c,u.opts.specialEasing);i>o;o++)if(n=tt[o].call(u,e,c,u.opts))return n;return J.map(c,R,u),J.isFunction(u.opts.start)&&u.opts.start.call(e,u),J.fx.timer(J.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function F(e){return function(t,a){"string"!=typeof t&&(a=t,t="*");var n,r=0,o=t.toLowerCase().match(de)||[];if(J.isFunction(a))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(a)):(e[n]=e[n]||[]).push(a)}}function O(e,t,a,n){function r(s){var l;return o[s]=!0,J.each(e[s]||[],function(e,s){var u=s(t,a,n);return"string"!=typeof u||i||o[u]?i?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var o={},i=e===wt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function E(e,t){var a,n,r=J.ajaxSettings.flatOptions||{};for(a in t)void 0!==t[a]&&((r[a]?e:n||(n={}))[a]=t[a]);return n&&J.extend(!0,e,n),e}function q(e,t,a){for(var n,r,o,i,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in a)o=l[0];else{for(r in a){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}i||(i=r)}o=o||i}return o?(o!==l[0]&&l.unshift(o),a[o]):void 0}function B(e,t,a,n){var r,o,i,s,l,u={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)u[i.toLowerCase()]=e.converters[i];for(o=c.shift();o;)if(e.responseFields[o]&&(a[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(i=u[l+" "+o]||u["* "+o],!i)for(r in u)if(s=r.split(" "),s[1]===o&&(i=u[l+" "+s[0]]||u["* "+s[0]])){i===!0?i=u[r]:u[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(f){return{state:"parsererror",error:i?f:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function N(e,t,a,n){var r;if(J.isArray(t))J.each(t,function(t,r){a||Dt.test(e)?n(e,r):N(e+"["+("object"==typeof r?t:"")+"]",r,a,n)});else if(a||"object"!==J.type(t))n(e,t);else for(r in t)N(e+"["+r+"]",t[r],a,n)}function z(e){return J.isWindow(e)?e:9===e.nodeType&&e.defaultView}var L=[],j=L.slice,V=L.concat,H=L.push,W=L.indexOf,U={},G=U.toString,K=U.hasOwnProperty,$={},Z=e.document,Q="2.1.1",J=function(e,t){return new J.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ae=/-([\da-z])/gi,ne=function(e,t){return t.toUpperCase()};J.fn=J.prototype={jquery:Q,constructor:J,selector:"",length:0,toArray:function(){return j.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:j.call(this)},pushStack:function(e){var t=J.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return J.each(this,e,t)},map:function(e){return this.pushStack(J.map(this,function(t,a){return e.call(t,a,t)}))},slice:function(){return this.pushStack(j.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,a=+e+(0>e?t:0);return this.pushStack(a>=0&&t>a?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:L.sort,splice:L.splice},J.extend=J.fn.extend=function(){var e,t,a,n,r,o,i=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof i&&(u=i,i=arguments[s]||{},s++),"object"==typeof i||J.isFunction(i)||(i={}),s===l&&(i=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)a=i[t],n=e[t],i!==n&&(u&&n&&(J.isPlainObject(n)||(r=J.isArray(n)))?(r?(r=!1,o=a&&J.isArray(a)?a:[]):o=a&&J.isPlainObject(a)?a:{},i[t]=J.extend(u,o,n)):void 0!==n&&(i[t]=n));return i},J.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!J.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==J.type(e)||e.nodeType||J.isWindow(e)?!1:e.constructor&&!K.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?U[G.call(e)]||"object":typeof e},globalEval:function(e){var t,a=eval;e=J.trim(e),e&&(1===e.indexOf("use strict")?(t=Z.createElement("script"),t.text=e,Z.head.appendChild(t).parentNode.removeChild(t)):a(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ae,ne)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,o=0,i=e.length,s=a(e);if(n){if(s)for(;i>o&&(r=t.apply(e[o],n),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],n),r===!1)break}else if(s)for(;i>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?J.merge(n,"string"==typeof e?[e]:e):H.call(n,e)),n},inArray:function(e,t,a){return null==t?-1:W.call(t,e,a)},merge:function(e,t){for(var a=+t.length,n=0,r=e.length;a>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,a){for(var n,r=[],o=0,i=e.length,s=!a;i>o;o++)n=!t(e[o],o),n!==s&&r.push(e[o]);return r},map:function(e,t,n){var r,o=0,i=e.length,s=a(e),l=[];if(s)for(;i>o;o++)r=t(e[o],o,n),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&l.push(r);return V.apply([],l)},guid:1,proxy:function(e,t){var a,n,r;return"string"==typeof t&&(a=e[t],t=e,e=a),J.isFunction(e)?(n=j.call(arguments,2),r=function(){return e.apply(t||this,n.concat(j.call(arguments)))},r.guid=e.guid=e.guid||J.guid++,r):void 0},now:Date.now,support:$}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){U["[object "+t+"]"]=t.toLowerCase()});var re=function(e){function t(e,t,a,n){var r,o,i,s,l,u,f,d,h,p;if((t?t.ownerDocument||t:N)!==C&&R(t),t=t||C,a=a||[],!e||"string"!=typeof e)return a;if(1!==(s=t.nodeType)&&9!==s)return[];if(A&&!n){if(r=ge.exec(e))if(i=r[1]){if(9===s){if(o=t.getElementById(i),!o||!o.parentNode)return a;if(o.id===i)return a.push(o),a}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(i))&&q(t,o)&&o.id===i)return a.push(o),a}else{if(r[2])return J.apply(a,t.getElementsByTagName(e)),a;if((i=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return J.apply(a,t.getElementsByClassName(i)),a}if(w.qsa&&(!F||!F.test(e))){if(d=f=B,h=t,p=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=D(e),(f=t.getAttribute("id"))?d=f.replace(be,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+m(u[l]);h=ve.test(e)&&c(t.parentNode)||t,p=u.join(",")}if(p)try{return J.apply(a,h.querySelectorAll(p)),a}catch(y){}finally{f||t.removeAttribute("id")}}}return X(e.replace(le,"$1"),t,a,n)}function a(){function e(a,n){return t.push(a+" ")>S.cacheLength&&delete e[t.shift()],e[a+" "]=n}var t=[];return e}function n(e){return e[B]=!0,e}function r(e){var t=C.createElement("div");try{return!!e(t)}catch(a){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var a=e.split("|"),n=e.length;n--;)S.attrHandle[a[n]]=t}function i(e,t){var a=t&&e,n=a&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(n)return n;if(a)for(;a=a.nextSibling;)if(a===t)return-1;return e?1:-1}function s(e){return function(t){var a=t.nodeName.toLowerCase();return"input"===a&&t.type===e}}function l(e){return function(t){var a=t.nodeName.toLowerCase();return("input"===a||"button"===a)&&t.type===e}}function u(e){return n(function(t){return t=+t,n(function(a,n){for(var r,o=e([],a.length,t),i=o.length;i--;)a[r=o[i]]&&(a[r]=!(n[r]=a[r]))})})}function c(e){return e&&typeof e.getElementsByTagName!==U&&e}function f(){}function m(e){for(var t=0,a=e.length,n="";a>t;t++)n+=e[t].value;return n}function d(e,t,a){var n=t.dir,r=a&&"parentNode"===n,o=L++;return t.first?function(t,a,o){for(;t=t[n];)if(1===t.nodeType||r)return e(t,a,o)}:function(t,a,i){var s,l,u=[z,o];if(i){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,a,i))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(l=t[B]||(t[B]={}),(s=l[n])&&s[0]===z&&s[1]===o)return u[2]=s[2];if(l[n]=u,u[2]=e(t,a,i))return!0}}}function h(e){return e.length>1?function(t,a,n){for(var r=e.length;r--;)if(!e[r](t,a,n))return!1;return!0}:e[0]}function p(e,a,n){for(var r=0,o=a.length;o>r;r++)t(e,a[r],n);return n}function y(e,t,a,n,r){for(var o,i=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!a||a(o,n,r))&&(i.push(o),u&&t.push(s));return i}function x(e,t,a,r,o,i){return r&&!r[B]&&(r=x(r)),o&&!o[B]&&(o=x(o,i)),n(function(n,i,s,l){var u,c,f,m=[],d=[],h=i.length,x=n||p(t||"*",s.nodeType?[s]:s,[]),g=!e||!n&&t?x:y(x,m,e,s,l),v=a?o||(n?e:h||r)?[]:i:g;if(a&&a(g,v,s,l),r)for(u=y(v,d),r(u,[],s,l),c=u.length;c--;)(f=u[c])&&(v[d[c]]=!(g[d[c]]=f));if(n){if(o||e){if(o){for(u=[],c=v.length;c--;)(f=v[c])&&u.push(g[c]=f);o(null,v=[],u,l)}for(c=v.length;c--;)(f=v[c])&&(u=o?te.call(n,f):m[c])>-1&&(n[u]=!(i[u]=f))}}else v=y(v===i?v.splice(h,v.length):v),o?o(null,i,v,l):J.apply(i,v)})}function g(e){for(var t,a,n,r=e.length,o=S.relative[e[0].type],i=o||S.relative[" "],s=o?1:0,l=d(function(e){return e===t},i,!0),u=d(function(e){return te.call(t,e)>-1},i,!0),c=[function(e,a,n){return!o&&(n||a!==_)||((t=a).nodeType?l(e,a,n):u(e,a,n))}];r>s;s++)if(a=S.relative[e[s].type])c=[d(h(c),a)];else{if(a=S.filter[e[s].type].apply(null,e[s].matches),a[B]){for(n=++s;r>n&&!S.relative[e[n].type];n++);return x(s>1&&h(c),s>1&&m(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),a,n>s&&g(e.slice(s,n)),r>n&&g(e=e.slice(n)),r>n&&m(e))}c.push(a)}return h(c)}function v(e,a){var r=a.length>0,o=e.length>0,i=function(n,i,s,l,u){var c,f,m,d=0,h="0",p=n&&[],x=[],g=_,v=n||o&&S.find.TAG("*",u),b=z+=null==g?1:Math.random()||.1,w=v.length;for(u&&(_=i!==C&&i);h!==w&&null!=(c=v[h]);h++){if(o&&c){for(f=0;m=e[f++];)if(m(c,i,s)){l.push(c);break}u&&(z=b)}r&&((c=!m&&c)&&d--,n&&p.push(c))}if(d+=h,r&&h!==d){for(f=0;m=a[f++];)m(p,x,i,s);if(n){if(d>0)for(;h--;)p[h]||x[h]||(x[h]=Z.call(l));x=y(x)}J.apply(l,x),u&&!n&&x.length>0&&d+a.length>1&&t.uniqueSort(l)}return u&&(z=b,_=g),p};return r?n(i):i}var b,w,S,T,M,D,Y,X,_,k,I,R,C,P,A,F,O,E,q,B="sizzle"+-new Date,N=e.document,z=0,L=0,j=a(),V=a(),H=a(),W=function(e,t){return e===t&&(I=!0),0},U="undefined",G=1<<31,K={}.hasOwnProperty,$=[],Z=$.pop,Q=$.push,J=$.push,ee=$.slice,te=$.indexOf||function(e){for(var t=0,a=this.length;a>t;t++)if(this[t]===e)return t;return-1},ae="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),me=new RegExp(se),de=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ae+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ye=/^h\d$/i,xe=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Se=function(e,t,a){var n="0x"+t-65536;return n!==n||a?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{J.apply($=ee.call(N.childNodes),N.childNodes),$[N.childNodes.length].nodeType}catch(Te){J={apply:$.length?function(e,t){Q.apply(e,ee.call(t))}:function(e,t){for(var a=e.length,n=0;e[a++]=t[n++];);e.length=a-1}}}w=t.support={},M=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},R=t.setDocument=function(e){var t,a=e?e.ownerDocument||e:N,n=a.defaultView;return a!==C&&9===a.nodeType&&a.documentElement?(C=a,P=a.documentElement,A=!M(a),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){R()},!1):n.attachEvent&&n.attachEvent("onunload",function(){R()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=xe.test(a.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return P.appendChild(e).id=B,!a.getElementsByName||!a.getElementsByName(B).length}),w.getById?(S.find.ID=function(e,t){if(typeof t.getElementById!==U&&A){var a=t.getElementById(e);return a&&a.parentNode?[a]:[]}},S.filter.ID=function(e){var t=e.replace(we,Se);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(we,Se);return function(e){var a=typeof e.getAttributeNode!==U&&e.getAttributeNode("id");return a&&a.value===t}}),S.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==U?t.getElementsByTagName(e):void 0}:function(e,t){var a,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;a=o[r++];)1===a.nodeType&&n.push(a);return n}return o},S.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==U&&A?t.getElementsByClassName(e):void 0},O=[],F=[],(w.qsa=xe.test(a.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+ae+")"),e.querySelectorAll(":checked").length||F.push(":checked")}),r(function(e){var t=a.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=xe.test(E=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){w.disconnectedMatch=E.call(e,"div"),E.call(e,"[s!='']:x"),O.push("!=",se)}),F=F.length&&new RegExp(F.join("|")),O=O.length&&new RegExp(O.join("|")),t=xe.test(P.compareDocumentPosition),q=t||xe.test(P.contains)?function(e,t){var a=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(a.contains?a.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===a||e.ownerDocument===N&&q(N,e)?-1:t===a||t.ownerDocument===N&&q(N,t)?1:k?te.call(k,e)-te.call(k,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,r=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===a?-1:t===a?1:o?-1:s?1:k?te.call(k,e)-te.call(k,t):0;if(o===s)return i(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?i(l[r],u[r]):l[r]===N?-1:u[r]===N?1:0},a):C},t.matches=function(e,a){return t(e,null,null,a)},t.matchesSelector=function(e,a){if((e.ownerDocument||e)!==C&&R(e),a=a.replace(fe,"='$1']"),!(!w.matchesSelector||!A||O&&O.test(a)||F&&F.test(a)))try{var n=E.call(e,a);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(a,C,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==C&&R(e),q(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==C&&R(e);var a=S.attrHandle[t.toLowerCase()],n=a&&K.call(S.attrHandle,t.toLowerCase())?a(e,t,!A):void 0;return void 0!==n?n:w.attributes||!A?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,a=[],n=0,r=0;if(I=!w.detectDuplicates,k=!w.sortStable&&e.slice(0),e.sort(W),I){for(;t=e[r++];)t===e[r]&&(n=a.push(r));for(;n--;)e.splice(a[n],1)}return k=null,e},T=t.getText=function(e){var t,a="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)a+=T(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)a+=T(t);return a},S=t.selectors={cacheLength:50,createPseudo:n,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Se),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,a=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":a&&me.test(a)&&(t=D(a,!0))&&(t=a.indexOf(")",a.length-t)-a.length)&&(e[0]=e[0].slice(0,t),e[2]=a.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==U&&e.getAttribute("class")||"")})},ATTR:function(e,a,n){return function(r){var o=t.attr(r,e);return null==o?"!="===a:a?(o+="","="===a?o===n:"!="===a?o!==n:"^="===a?n&&0===o.indexOf(n):"*="===a?n&&o.indexOf(n)>-1:"$="===a?n&&o.slice(-n.length)===n:"~="===a?(" "+o+" ").indexOf(n)>-1:"|="===a?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,a,n,r){var o="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,a,l){var u,c,f,m,d,h,p=o!==i?"nextSibling":"previousSibling",y=t.parentNode,x=s&&t.nodeName.toLowerCase(),g=!l&&!s;if(y){if(o){for(;p;){for(f=t;f=f[p];)if(s?f.nodeName.toLowerCase()===x:1===f.nodeType)return!1;h=p="only"===e&&!h&&"nextSibling"}return!0}if(h=[i?y.firstChild:y.lastChild],i&&g){for(c=y[B]||(y[B]={}),u=c[e]||[],d=u[0]===z&&u[1],m=u[0]===z&&u[2],f=d&&y.childNodes[d];f=++d&&f&&f[p]||(m=d=0)||h.pop();)if(1===f.nodeType&&++m&&f===t){c[e]=[z,d,m];break}}else if(g&&(u=(t[B]||(t[B]={}))[e])&&u[0]===z)m=u[1];else for(;(f=++d&&f&&f[p]||(m=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==x:1!==f.nodeType)||!++m||(g&&((f[B]||(f[B]={}))[e]=[z,m]),f!==t)););return m-=r,m===n||m%n===0&&m/n>=0}}},PSEUDO:function(e,a){var r,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(a):o.length>1?(r=[e,e,"",a],S.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,a),i=r.length;i--;)n=te.call(e,r[i]),e[n]=!(t[n]=r[i])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],a=[],r=Y(e.replace(le,"$1"));return r[B]?n(function(e,t,a,n){for(var o,i=r(e,null,n,[]),s=e.length;s--;)(o=i[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,a),!a.pop()}}),has:n(function(e){return function(a){return t(e,a).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:n(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Se).toLowerCase(),function(t){var a;do if(a=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return a=a.toLowerCase(),a===e||0===a.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var a=e.location&&e.location.hash;return a&&a.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return ye.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,a){return[0>a?a+t:a]}),even:u(function(e,t){for(var a=0;t>a;a+=2)e.push(a);return e}),odd:u(function(e,t){for(var a=1;t>a;a+=2)e.push(a);return e}),lt:u(function(e,t,a){for(var n=0>a?a+t:a;--n>=0;)e.push(n);
return e}),gt:u(function(e,t,a){for(var n=0>a?a+t:a;++n<t;)e.push(n);return e})}},S.pseudos.nth=S.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})S.pseudos[b]=l(b);return f.prototype=S.filters=S.pseudos,S.setFilters=new f,D=t.tokenize=function(e,a){var n,r,o,i,s,l,u,c=V[e+" "];if(c)return a?0:c.slice(0);for(s=e,l=[],u=S.preFilter;s;){(!n||(r=ue.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=ce.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(le," ")}),s=s.slice(n.length));for(i in S.filter)!(r=he[i].exec(s))||u[i]&&!(r=u[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),s=s.slice(n.length));if(!n)break}return a?s.length:s?t.error(e):V(e,l).slice(0)},Y=t.compile=function(e,t){var a,n=[],r=[],o=H[e+" "];if(!o){for(t||(t=D(e)),a=t.length;a--;)o=g(t[a]),o[B]?n.push(o):r.push(o);o=H(e,v(r,n)),o.selector=e}return o},X=t.select=function(e,t,a,n){var r,o,i,s,l,u="function"==typeof e&&e,f=!n&&D(e=u.selector||e);if(a=a||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(i=o[0]).type&&w.getById&&9===t.nodeType&&A&&S.relative[o[1].type]){if(t=(S.find.ID(i.matches[0].replace(we,Se),t)||[])[0],!t)return a;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=he.needsContext.test(e)?0:o.length;r--&&(i=o[r],!S.relative[s=i.type]);)if((l=S.find[s])&&(n=l(i.matches[0].replace(we,Se),ve.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=n.length&&m(o),!e)return J.apply(a,n),a;break}}return(u||Y(e,f))(n,t,!A,a,ve.test(e)&&c(t.parentNode)||t),a},w.sortStable=B.split("").sort(W).join("")===B,w.detectDuplicates=!!I,R(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(C.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,a){return a?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,a){return a||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(ae,function(e,t,a){var n;return a?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);J.find=re,J.expr=re.selectors,J.expr[":"]=J.expr.pseudos,J.unique=re.uniqueSort,J.text=re.getText,J.isXMLDoc=re.isXML,J.contains=re.contains;var oe=J.expr.match.needsContext,ie=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;J.filter=function(e,t,a){var n=t[0];return a&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?J.find.matchesSelector(n,e)?[n]:[]:J.find.matches(e,J.grep(t,function(e){return 1===e.nodeType}))},J.fn.extend({find:function(e){var t,a=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(J(e).filter(function(){for(t=0;a>t;t++)if(J.contains(r[t],this))return!0}));for(t=0;a>t;t++)J.find(e,r[t],n);return n=this.pushStack(a>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&oe.test(e)?J(e):e||[],!1).length}});var le,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=J.fn.init=function(e,t){var a,n;if(!e)return this;if("string"==typeof e){if(a="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ue.exec(e),!a||!a[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(a[1]){if(t=t instanceof J?t[0]:t,J.merge(this,J.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),ie.test(a[1])&&J.isPlainObject(t))for(a in t)J.isFunction(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return n=Z.getElementById(a[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Z,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):J.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(J):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))};ce.prototype=J.fn,le=J(Z);var fe=/^(?:parents|prev(?:Until|All))/,me={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(e,t,a){for(var n=[],r=void 0!==a;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&J(e).is(a))break;n.push(e)}return n},sibling:function(e,t){for(var a=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&a.push(e);return a}}),J.fn.extend({has:function(e){var t=J(e,this),a=t.length;return this.filter(function(){for(var e=0;a>e;e++)if(J.contains(this,t[e]))return!0})},closest:function(e,t){for(var a,n=0,r=this.length,o=[],i=oe.test(e)||"string"!=typeof e?J(e,t||this.context):0;r>n;n++)for(a=this[n];a&&a!==t;a=a.parentNode)if(a.nodeType<11&&(i?i.index(a)>-1:1===a.nodeType&&J.find.matchesSelector(a,e))){o.push(a);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(e){return e?"string"==typeof e?W.call(J(e),this[0]):W.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(J.unique(J.merge(this.get(),J(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,a){return J.dir(e,"parentNode",a)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,a){return J.dir(e,"nextSibling",a)},prevUntil:function(e,t,a){return J.dir(e,"previousSibling",a)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return e.contentDocument||J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(a,n){var r=J.map(this,t,a);return"Until"!==e.slice(-5)&&(n=a),n&&"string"==typeof n&&(r=J.filter(n,r)),this.length>1&&(me[e]||J.unique(r),fe.test(e)&&r.reverse()),this.pushStack(r)}});var de=/\S+/g,he={};J.Callbacks=function(e){e="string"==typeof e?he[e]||o(e):J.extend({},e);var t,a,n,r,i,s,l=[],u=!e.once&&[],c=function(o){for(t=e.memory&&o,a=!0,s=r||0,r=0,i=l.length,n=!0;l&&i>s;s++)if(l[s].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:f.disable())},f={add:function(){if(l){var a=l.length;!function o(t){J.each(t,function(t,a){var n=J.type(a);"function"===n?e.unique&&f.has(a)||l.push(a):a&&a.length&&"string"!==n&&o(a)})}(arguments),n?i=l.length:t&&(r=a,c(t))}return this},remove:function(){return l&&J.each(arguments,function(e,t){for(var a;(a=J.inArray(t,l,a))>-1;)l.splice(a,1),n&&(i>=a&&i--,s>=a&&s--)}),this},has:function(e){return e?J.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],i=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||a&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!a}};return f},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],a="pending",n={state:function(){return a},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(a){J.each(t,function(t,o){var i=J.isFunction(e[t])&&e[t];r[o[1]](function(){var e=i&&i.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(a.resolve).fail(a.reject).progress(a.notify):a[o[0]+"With"](this===n?a.promise():this,i?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?J.extend(e,n):n}},r={};return n.pipe=n.then,J.each(t,function(e,o){var i=o[2],s=o[3];n[o[1]]=i.add,s&&i.add(function(){a=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=i.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,a,n,r=0,o=j.call(arguments),i=o.length,s=1!==i||e&&J.isFunction(e.promise)?i:0,l=1===s?e:J.Deferred(),u=function(e,a,n){return function(r){a[e]=this,n[e]=arguments.length>1?j.call(arguments):r,n===t?l.notifyWith(a,n):--s||l.resolveWith(a,n)}};if(i>1)for(t=new Array(i),a=new Array(i),n=new Array(i);i>r;r++)o[r]&&J.isFunction(o[r].promise)?o[r].promise().done(u(r,n,o)).fail(l.reject).progress(u(r,a,t)):--s;return s||l.resolveWith(n,o),l.promise()}});var pe;J.fn.ready=function(e){return J.ready.promise().done(e),this},J.extend({isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){(e===!0?--J.readyWait:J.isReady)||(J.isReady=!0,e!==!0&&--J.readyWait>0||(pe.resolveWith(Z,[J]),J.fn.triggerHandler&&(J(Z).triggerHandler("ready"),J(Z).off("ready"))))}}),J.ready.promise=function(t){return pe||(pe=J.Deferred(),"complete"===Z.readyState?setTimeout(J.ready):(Z.addEventListener("DOMContentLoaded",i,!1),e.addEventListener("load",i,!1))),pe.promise(t)},J.ready.promise();var ye=J.access=function(e,t,a,n,r,o,i){var s=0,l=e.length,u=null==a;if("object"===J.type(a)){r=!0;for(s in a)J.access(e,t,s,a[s],!0,o,i)}else if(void 0!==n&&(r=!0,J.isFunction(n)||(i=!0),u&&(i?(t.call(e,n),t=null):(u=t,t=function(e,t,a){return u.call(J(e),a)})),t))for(;l>s;s++)t(e[s],a,i?n:n.call(e[s],s,t(e[s],a)));return r?e:u?t.call(e):l?t(e[0],a):o};J.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=J.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},a=e[this.expando];if(!a){a=s.uid++;try{t[this.expando]={value:a},Object.defineProperties(e,t)}catch(n){t[this.expando]=a,J.extend(e,t)}}return this.cache[a]||(this.cache[a]={}),a},set:function(e,t,a){var n,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=a;else if(J.isEmptyObject(o))J.extend(this.cache[r],t);else for(n in t)o[n]=t[n];return o},get:function(e,t){var a=this.cache[this.key(e)];return void 0===t?a:a[t]},access:function(e,t,a){var n;return void 0===t||t&&"string"==typeof t&&void 0===a?(n=this.get(e,t),void 0!==n?n:this.get(e,J.camelCase(t))):(this.set(e,t,a),void 0!==a?a:t)},remove:function(e,t){var a,n,r,o=this.key(e),i=this.cache[o];if(void 0===t)this.cache[o]={};else{J.isArray(t)?n=t.concat(t.map(J.camelCase)):(r=J.camelCase(t),t in i?n=[t,r]:(n=r,n=n in i?[n]:n.match(de)||[])),a=n.length;for(;a--;)delete i[n[a]]}},hasData:function(e){return!J.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var xe=new s,ge=new s,ve=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;J.extend({hasData:function(e){return ge.hasData(e)||xe.hasData(e)},data:function(e,t,a){return ge.access(e,t,a)},removeData:function(e,t){ge.remove(e,t)},_data:function(e,t,a){return xe.access(e,t,a)},_removeData:function(e,t){xe.remove(e,t)}}),J.fn.extend({data:function(e,t){var a,n,r,o=this[0],i=o&&o.attributes;if(void 0===e){if(this.length&&(r=ge.get(o),1===o.nodeType&&!xe.get(o,"hasDataAttrs"))){for(a=i.length;a--;)i[a]&&(n=i[a].name,0===n.indexOf("data-")&&(n=J.camelCase(n.slice(5)),l(o,n,r[n])));xe.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ge.set(this,e)}):ye(this,function(t){var a,n=J.camelCase(e);if(o&&void 0===t){if(a=ge.get(o,e),void 0!==a)return a;if(a=ge.get(o,n),void 0!==a)return a;if(a=l(o,n,void 0),void 0!==a)return a}else this.each(function(){var a=ge.get(this,n);ge.set(this,n,t),-1!==e.indexOf("-")&&void 0!==a&&ge.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ge.remove(this,e)})}}),J.extend({queue:function(e,t,a){var n;return e?(t=(t||"fx")+"queue",n=xe.get(e,t),a&&(!n||J.isArray(a)?n=xe.access(e,t,J.makeArray(a)):n.push(a)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var a=J.queue(e,t),n=a.length,r=a.shift(),o=J._queueHooks(e,t),i=function(){J.dequeue(e,t)};"inprogress"===r&&(r=a.shift(),n--),r&&("fx"===t&&a.unshift("inprogress"),delete o.stop,r.call(e,i,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var a=t+"queueHooks";return xe.get(e,a)||xe.access(e,a,{empty:J.Callbacks("once memory").add(function(){xe.remove(e,[t+"queue",a])})})}}),J.fn.extend({queue:function(e,t){var a=2;return"string"!=typeof e&&(t=e,e="fx",a--),arguments.length<a?J.queue(this[0],e):void 0===t?this:this.each(function(){var a=J.queue(this,e,t);J._queueHooks(this,e),"fx"===e&&"inprogress"!==a[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var a,n=1,r=J.Deferred(),o=this,i=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)a=xe.get(o[i],e+"queueHooks"),a&&a.empty&&(n++,a.empty.add(s));return s(),r.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=["Top","Right","Bottom","Left"],Te=function(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)},Me=/^(?:checkbox|radio)$/i;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),a=Z.createElement("input");a.setAttribute("type","radio"),a.setAttribute("checked","checked"),a.setAttribute("name","t"),t.appendChild(a),$.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",$.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var De="undefined";$.focusinBubbles="onfocusin"in e;var Ye=/^key/,Xe=/^(?:mouse|pointer|contextmenu)|click/,_e=/^(?:focusinfocus|focusoutblur)$/,ke=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(e,t,a,n,r){var o,i,s,l,u,c,f,m,d,h,p,y=xe.get(e);if(y)for(a.handler&&(o=a,a=o.handler,r=o.selector),a.guid||(a.guid=J.guid++),(l=y.events)||(l=y.events={}),(i=y.handle)||(i=y.handle=function(t){return typeof J!==De&&J.event.triggered!==t.type?J.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(de)||[""],u=t.length;u--;)s=ke.exec(t[u])||[],d=p=s[1],h=(s[2]||"").split(".").sort(),d&&(f=J.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,f=J.event.special[d]||{},c=J.extend({type:d,origType:p,data:n,handler:a,guid:a.guid,selector:r,needsContext:r&&J.expr.match.needsContext.test(r),namespace:h.join(".")},o),(m=l[d])||(m=l[d]=[],m.delegateCount=0,f.setup&&f.setup.call(e,n,h,i)!==!1||e.addEventListener&&e.addEventListener(d,i,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=a.guid)),r?m.splice(m.delegateCount++,0,c):m.push(c),J.event.global[d]=!0)},remove:function(e,t,a,n,r){var o,i,s,l,u,c,f,m,d,h,p,y=xe.hasData(e)&&xe.get(e);if(y&&(l=y.events)){for(t=(t||"").match(de)||[""],u=t.length;u--;)if(s=ke.exec(t[u])||[],d=p=s[1],h=(s[2]||"").split(".").sort(),d){for(f=J.event.special[d]||{},d=(n?f.delegateType:f.bindType)||d,m=l[d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=o=m.length;o--;)c=m[o],!r&&p!==c.origType||a&&a.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(m.splice(o,1),c.selector&&m.delegateCount--,f.remove&&f.remove.call(e,c));i&&!m.length&&(f.teardown&&f.teardown.call(e,h,y.handle)!==!1||J.removeEvent(e,d,y.handle),delete l[d])}else for(d in l)J.event.remove(e,d+t[u],a,n,!0);J.isEmptyObject(l)&&(delete y.handle,xe.remove(e,"events"))}},trigger:function(t,a,n,r){var o,i,s,l,u,c,f,m=[n||Z],d=K.call(t,"type")?t.type:t,h=K.call(t,"namespace")?t.namespace.split("."):[];if(i=s=n=n||Z,3!==n.nodeType&&8!==n.nodeType&&!_e.test(d+J.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,t=t[J.expando]?t:new J.Event(d,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),a=null==a?[t]:J.makeArray(a,[t]),f=J.event.special[d]||{},r||!f.trigger||f.trigger.apply(n,a)!==!1)){if(!r&&!f.noBubble&&!J.isWindow(n)){for(l=f.delegateType||d,_e.test(l+d)||(i=i.parentNode);i;i=i.parentNode)m.push(i),s=i;s===(n.ownerDocument||Z)&&m.push(s.defaultView||s.parentWindow||e)}for(o=0;(i=m[o++])&&!t.isPropagationStopped();)t.type=o>1?l:f.bindType||d,c=(xe.get(i,"events")||{})[t.type]&&xe.get(i,"handle"),c&&c.apply(i,a),c=u&&i[u],c&&c.apply&&J.acceptData(i)&&(t.result=c.apply(i,a),t.result===!1&&t.preventDefault());return t.type=d,r||t.isDefaultPrevented()||f._default&&f._default.apply(m.pop(),a)!==!1||!J.acceptData(n)||u&&J.isFunction(n[d])&&!J.isWindow(n)&&(s=n[u],s&&(n[u]=null),J.event.triggered=d,n[d](),J.event.triggered=void 0,s&&(n[u]=s)),t.result}},dispatch:function(e){e=J.event.fix(e);var t,a,n,r,o,i=[],s=j.call(arguments),l=(xe.get(this,"events")||{})[e.type]||[],u=J.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(i=J.event.handlers.call(this,e,l),t=0;(r=i[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(o=r.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,n=((J.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var a,n,r,o,i=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(n=[],a=0;s>a;a++)o=t[a],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?J(r,this).index(l)>=0:J.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&i.push({elem:l,handlers:n})}return s<t.length&&i.push({elem:this,handlers:t.slice(s)}),i},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var a,n,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(a=e.target.ownerDocument||Z,n=a.documentElement,r=a.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,a,n,r=e.type,o=e,i=this.fixHooks[r];for(i||(this.fixHooks[r]=i=Xe.test(r)?this.mouseHooks:Ye.test(r)?this.keyHooks:{}),n=i.props?this.props.concat(i.props):this.props,e=new J.Event(o),t=n.length;t--;)a=n[t],e[a]=o[a];return e.target||(e.target=Z),3===e.target.nodeType&&(e.target=e.target.parentNode),i.filter?i.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return J.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,a,n){var r=J.extend(new J.Event,a,{type:e,isSimulated:!0,originalEvent:{}});n?J.event.trigger(r,null,t):J.event.dispatch.call(t,r),r.isDefaultPrevented()&&a.preventDefault()}},J.removeEvent=function(e,t,a){e.removeEventListener&&e.removeEventListener(t,a,!1)},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:c):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var a,n=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==n&&!J.contains(n,r))&&(e.type=o.origType,a=o.handler.apply(this,arguments),e.type=t),a}}}),$.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var a=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=xe.access(n,t);r||n.addEventListener(e,a,!0),xe.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=xe.access(n,t)-1;r?xe.access(n,t,r):(n.removeEventListener(e,a,!0),xe.remove(n,t))}}}),J.fn.extend({on:function(e,t,a,n,r){var o,i;if("object"==typeof e){"string"!=typeof t&&(a=a||t,t=void 0);for(i in e)this.on(i,t,a,e[i],r);return this}if(null==a&&null==n?(n=t,a=t=void 0):null==n&&("string"==typeof t?(n=a,a=void 0):(n=a,a=t,t=void 0)),n===!1)n=c;else if(!n)return this;return 1===r&&(o=n,n=function(e){return J().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=J.guid++)),this.each(function(){J.event.add(this,e,n,a,t)})},one:function(e,t,a,n){return this.on(e,t,a,n,1)},off:function(e,t,a){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,J(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(a=t,t=void 0),a===!1&&(a=c),this.each(function(){J.event.remove(this,e,a,t)})},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){var a=this[0];return a?J.event.trigger(e,t,a,!0):void 0}});var Ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Re=/<([\w:]+)/,Ce=/<|&#?\w+;/,Pe=/<(?:script|style|link)/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^$|\/(?:java|ecma)script/i,Oe=/^true\/(.*)/,Ee=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td,J.extend({clone:function(e,t,a){var n,r,o,i,s=e.cloneNode(!0),l=J.contains(e.ownerDocument,e);if(!($.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(i=x(s),o=x(e),n=0,r=o.length;r>n;n++)g(o[n],i[n]);if(t)if(a)for(o=o||x(e),i=i||x(s),n=0,r=o.length;r>n;n++)y(o[n],i[n]);else y(e,s);return i=x(s,"script"),i.length>0&&p(i,!l&&x(e,"script")),s},buildFragment:function(e,t,a,n){for(var r,o,i,s,l,u,c=t.createDocumentFragment(),f=[],m=0,d=e.length;d>m;m++)if(r=e[m],r||0===r)if("object"===J.type(r))J.merge(f,r.nodeType?[r]:r);else if(Ce.test(r)){for(o=o||c.appendChild(t.createElement("div")),i=(Re.exec(r)||["",""])[1].toLowerCase(),s=qe[i]||qe._default,o.innerHTML=s[1]+r.replace(Ie,"<$1></$2>")+s[2],u=s[0];u--;)o=o.lastChild;J.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(r));for(c.textContent="",m=0;r=f[m++];)if((!n||-1===J.inArray(r,n))&&(l=J.contains(r.ownerDocument,r),o=x(c.appendChild(r),"script"),l&&p(o),a))for(u=0;r=o[u++];)Fe.test(r.type||"")&&a.push(r);return c},cleanData:function(e){for(var t,a,n,r,o=J.event.special,i=0;void 0!==(a=e[i]);i++){if(J.acceptData(a)&&(r=a[xe.expando],r&&(t=xe.cache[r]))){if(t.events)for(n in t.events)o[n]?J.event.remove(a,n):J.removeEvent(a,n,t.handle);xe.cache[r]&&delete xe.cache[r]}delete ge.cache[a[ge.expando]]}}}),J.fn.extend({text:function(e){return ye(this,function(e){return void 0===e?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var a,n=e?J.filter(e,this):this,r=0;null!=(a=n[r]);r++)t||1!==a.nodeType||J.cleanData(x(a)),a.parentNode&&(t&&J.contains(a.ownerDocument,a)&&p(x(a,"script")),a.parentNode.removeChild(a));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(J.cleanData(x(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return ye(this,function(e){var t=this[0]||{},a=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!qe[(Re.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ie,"<$1></$2>");try{for(;n>a;a++)t=this[a]||{},1===t.nodeType&&(J.cleanData(x(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,J.cleanData(x(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=V.apply([],e);var a,n,r,o,i,s,l=0,u=this.length,c=this,f=u-1,m=e[0],p=J.isFunction(m);if(p||u>1&&"string"==typeof m&&!$.checkClone&&Ae.test(m))return this.each(function(a){var n=c.eq(a);p&&(e[0]=m.call(this,a,n.html())),n.domManip(e,t)});if(u&&(a=J.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(r=J.map(x(a,"script"),d),o=r.length;u>l;l++)i=a,l!==f&&(i=J.clone(i,!0,!0),o&&J.merge(r,x(i,"script"))),t.call(this[l],i,l);if(o)for(s=r[r.length-1].ownerDocument,J.map(r,h),l=0;o>l;l++)i=r[l],Fe.test(i.type||"")&&!xe.access(i,"globalEval")&&J.contains(s,i)&&(i.src?J._evalUrl&&J._evalUrl(i.src):J.globalEval(i.textContent.replace(Ee,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(e){for(var a,n=[],r=J(e),o=r.length-1,i=0;o>=i;i++)a=i===o?this:this.clone(!0),J(r[i])[t](a),H.apply(n,a.get());return this.pushStack(n)}});var Be,Ne={},ze=/^margin/,Le=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),je=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i.innerHTML="",r.appendChild(o);var t=e.getComputedStyle(i,null);a="1%"!==t.top,n="4px"===t.width,r.removeChild(o)}var a,n,r=Z.documentElement,o=Z.createElement("div"),i=Z.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",$.clearCloneStyle="content-box"===i.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(i),e.getComputedStyle&&J.extend($,{pixelPosition:function(){return t(),a},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,a=i.appendChild(Z.createElement("div"));return a.style.cssText=i.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",i.style.width="1px",r.appendChild(o),t=!parseFloat(e.getComputedStyle(a,null).marginRight),r.removeChild(o),t}}))}(),J.swap=function(e,t,a,n){var r,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];r=a.apply(e,n||[]);for(o in t)e.style[o]=i[o];return r};var Ve=/^(none|table(?!-c[ea]).+)/,He=new RegExp("^("+we+")(.*)$","i"),We=new RegExp("^([+-])=("+we+")","i"),Ue={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var a=w(e,"opacity");return""===a?"1":a}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,a,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,i,s=J.camelCase(t),l=e.style;return t=J.cssProps[s]||(J.cssProps[s]=T(l,s)),i=J.cssHooks[t]||J.cssHooks[s],void 0===a?i&&"get"in i&&void 0!==(r=i.get(e,!1,n))?r:l[t]:(o=typeof a,"string"===o&&(r=We.exec(a))&&(a=(r[1]+1)*r[2]+parseFloat(J.css(e,t)),o="number"),void(null!=a&&a===a&&("number"!==o||J.cssNumber[s]||(a+="px"),$.clearCloneStyle||""!==a||0!==t.indexOf("background")||(l[t]="inherit"),i&&"set"in i&&void 0===(a=i.set(e,a,n))||(l[t]=a))))}},css:function(e,t,a,n){var r,o,i,s=J.camelCase(t);return t=J.cssProps[s]||(J.cssProps[s]=T(e.style,s)),i=J.cssHooks[t]||J.cssHooks[s],i&&"get"in i&&(r=i.get(e,!0,a)),void 0===r&&(r=w(e,t,n)),"normal"===r&&t in Ge&&(r=Ge[t]),""===a||a?(o=parseFloat(r),a===!0||J.isNumeric(o)?o||0:r):r}}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,a,n){return a?Ve.test(J.css(e,"display"))&&0===e.offsetWidth?J.swap(e,Ue,function(){return Y(e,t,n)}):Y(e,t,n):void 0},set:function(e,a,n){var r=n&&je(e);return M(e,a,n?D(e,t,n,"border-box"===J.css(e,"boxSizing",!1,r),r):0)}}}),J.cssHooks.marginRight=S($.reliableMarginRight,function(e,t){return t?J.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(a){for(var n=0,r={},o="string"==typeof a?a.split(" "):[a];4>n;n++)r[e+Se[n]+t]=o[n]||o[n-2]||o[0];return r}},ze.test(e)||(J.cssHooks[e+t].set=M)}),J.fn.extend({css:function(e,t){return ye(this,function(e,t,a){var n,r,o={},i=0;if(J.isArray(t)){for(n=je(e),r=t.length;r>i;i++)o[t[i]]=J.css(e,t[i],!1,n);return o}return void 0!==a?J.style(e,t,a):J.css(e,t)},e,t,arguments.length>1)},show:function(){return X(this,!0)},hide:function(){return X(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Te(this)?J(this).show():J(this).hide()})}}),J.Tween=_,_.prototype={constructor:_,init:function(e,t,a,n,r,o){this.elem=e,this.prop=a,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(J.cssNumber[a]?"":"px")},cur:function(){var e=_.propHooks[this.prop];return e&&e.get?e.get(this):_.propHooks._default.get(this)},run:function(e){var t,a=_.propHooks[this.prop];return this.pos=t=this.options.duration?J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),a&&a.set?a.set(this):_.propHooks._default.set(this),this}},_.prototype.init.prototype=_.prototype,_.propHooks={
_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},_.propHooks.scrollTop=_.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.fx=_.prototype.init,J.fx.step={};var $e,Ze,Qe=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[C],at={"*":[function(e,t){var a=this.createTween(e,t),n=a.cur(),r=Je.exec(t),o=r&&r[3]||(J.cssNumber[e]?"":"px"),i=(J.cssNumber[e]||"px"!==o&&+n)&&Je.exec(J.css(a.elem,e)),s=1,l=20;if(i&&i[3]!==o){o=o||i[3],r=r||[],i=+n||1;do s=s||".5",i/=s,J.style(a.elem,e,i+o);while(s!==(s=a.cur()/n)&&1!==s&&--l)}return r&&(i=a.start=+i||+n||0,a.unit=o,a.end=r[1]?i+(r[1]+1)*r[2]:+r[2]),a}]};J.Animation=J.extend(A,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var a,n=0,r=e.length;r>n;n++)a=e[n],at[a]=at[a]||[],at[a].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),J.speed=function(e,t,a){var n=e&&"object"==typeof e?J.extend({},e):{complete:a||!a&&t||J.isFunction(e)&&e,duration:e,easing:a&&t||t&&!J.isFunction(t)&&t};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(e,t,a,n){return this.filter(Te).css("opacity",0).show().end().animate({opacity:t},e,a,n)},animate:function(e,t,a,n){var r=J.isEmptyObject(e),o=J.speed(t,a,n),i=function(){var t=A(this,J.extend({},e),o);(r||xe.get(this,"finish"))&&t.stop(!0)};return i.finish=i,r||o.queue===!1?this.each(i):this.queue(o.queue,i)},stop:function(e,t,a){var n=function(e){var t=e.stop;delete e.stop,t(a)};return"string"!=typeof e&&(a=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=J.timers,i=xe.get(this);if(r)i[r]&&i[r].stop&&n(i[r]);else for(r in i)i[r]&&i[r].stop&&et.test(r)&&n(i[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(a),t=!1,o.splice(r,1));(t||!a)&&J.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,a=xe.get(this),n=a[e+"queue"],r=a[e+"queueHooks"],o=J.timers,i=n?n.length:0;for(a.finish=!0,J.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;i>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete a.finish})}}),J.each(["toggle","show","hide"],function(e,t){var a=J.fn[t];J.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?a.apply(this,arguments):this.animate(I(t,!0),e,n,r)}}),J.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,a,n){return this.animate(t,e,a,n)}}),J.timers=[],J.fx.tick=function(){var e,t=0,a=J.timers;for($e=J.now();t<a.length;t++)e=a[t],e()||a[t]!==e||a.splice(t--,1);a.length||J.fx.stop(),$e=void 0},J.fx.timer=function(e){J.timers.push(e),e()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Ze||(Ze=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Ze),Ze=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,a){var n=setTimeout(t,e);a.stop=function(){clearTimeout(n)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),a=t.appendChild(Z.createElement("option"));e.type="checkbox",$.checkOn=""!==e.value,$.optSelected=a.selected,t.disabled=!0,$.optDisabled=!a.disabled,e=Z.createElement("input"),e.value="t",e.type="radio",$.radioValue="t"===e.value}();var nt,rt,ot=J.expr.attrHandle;J.fn.extend({attr:function(e,t){return ye(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})}}),J.extend({attr:function(e,t,a){var n,r,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?typeof e.getAttribute===De?J.prop(e,t,a):(1===o&&J.isXMLDoc(e)||(t=t.toLowerCase(),n=J.attrHooks[t]||(J.expr.match.bool.test(t)?rt:nt)),void 0===a?n&&"get"in n&&null!==(r=n.get(e,t))?r:(r=J.find.attr(e,t),null==r?void 0:r):null!==a?n&&"set"in n&&void 0!==(r=n.set(e,a,t))?r:(e.setAttribute(t,a+""),a):void J.removeAttr(e,t)):void 0},removeAttr:function(e,t){var a,n,r=0,o=t&&t.match(de);if(o&&1===e.nodeType)for(;a=o[r++];)n=J.propFix[a]||a,J.expr.match.bool.test(a)&&(e[n]=!1),e.removeAttribute(a)},attrHooks:{type:{set:function(e,t){if(!$.radioValue&&"radio"===t&&J.nodeName(e,"input")){var a=e.value;return e.setAttribute("type",t),a&&(e.value=a),t}}}}}),rt={set:function(e,t,a){return t===!1?J.removeAttr(e,a):e.setAttribute(a,a),a}},J.each(J.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ot[t]||J.find.attr;ot[t]=function(e,t,n){var r,o;return n||(o=ot[t],ot[t]=r,r=null!=a(e,t,n)?t.toLowerCase():null,ot[t]=o),r}});var it=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(e,t){return ye(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[J.propFix[e]||e]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,a){var n,r,o,i=e.nodeType;return e&&3!==i&&8!==i&&2!==i?(o=1!==i||!J.isXMLDoc(e),o&&(t=J.propFix[t]||t,r=J.propHooks[t]),void 0!==a?r&&"set"in r&&void 0!==(n=r.set(e,a,t))?n:e[t]=a:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||it.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),$.optSelected||(J.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;J.fn.extend({addClass:function(e){var t,a,n,r,o,i,s="string"==typeof e&&e,l=0,u=this.length;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(de)||[];u>l;l++)if(a=this[l],n=1===a.nodeType&&(a.className?(" "+a.className+" ").replace(st," "):" ")){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");i=J.trim(n),a.className!==i&&(a.className=i)}return this},removeClass:function(e){var t,a,n,r,o,i,s=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(de)||[];u>l;l++)if(a=this[l],n=1===a.nodeType&&(a.className?(" "+a.className+" ").replace(st," "):"")){for(o=0;r=t[o++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");i=e?J.trim(n):"",a.className!==i&&(a.className=i)}return this},toggleClass:function(e,t){var a=typeof e;return"boolean"==typeof t&&"string"===a?t?this.addClass(e):this.removeClass(e):this.each(J.isFunction(e)?function(a){J(this).toggleClass(e.call(this,a,this.className,t),t)}:function(){if("string"===a)for(var t,n=0,r=J(this),o=e.match(de)||[];t=o[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(a===De||"boolean"===a)&&(this.className&&xe.set(this,"__className__",this.className),this.className=this.className||e===!1?"":xe.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",a=0,n=this.length;n>a;a++)if(1===this[a].nodeType&&(" "+this[a].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;J.fn.extend({val:function(e){var t,a,n,r=this[0];return arguments.length?(n=J.isFunction(e),this.each(function(a){var r;1===this.nodeType&&(r=n?e.call(this,a,J(this).val()):e,null==r?r="":"number"==typeof r?r+="":J.isArray(r)&&(r=J.map(r,function(e){return null==e?"":e+""})),t=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=J.valHooks[r.type]||J.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(a=t.get(r,"value"))?a:(a=r.value,"string"==typeof a?a.replace(lt,""):null==a?"":a)):void 0}}),J.extend({valHooks:{option:{get:function(e){var t=J.find.attr(e,"value");return null!=t?t:J.trim(J.text(e))}},select:{get:function(e){for(var t,a,n=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,i=o?null:[],s=o?r+1:n.length,l=0>r?s:o?r:0;s>l;l++)if(a=n[l],!(!a.selected&&l!==r||($.optDisabled?a.disabled:null!==a.getAttribute("disabled"))||a.parentNode.disabled&&J.nodeName(a.parentNode,"optgroup"))){if(t=J(a).val(),o)return t;i.push(t)}return i},set:function(e,t){for(var a,n,r=e.options,o=J.makeArray(t),i=r.length;i--;)n=r[i],(n.selected=J.inArray(n.value,o)>=0)&&(a=!0);return a||(e.selectedIndex=-1),o}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(e,t){return J.isArray(t)?e.checked=J.inArray(J(e).val(),t)>=0:void 0}},$.checkOn||(J.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,a){return arguments.length>0?this.on(t,null,e,a):this.trigger(t)}}),J.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,a){return this.on(e,null,t,a)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,a,n){return this.on(t,e,a,n)},undelegate:function(e,t,a){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",a)}});var ut=J.now(),ct=/\?/;J.parseJSON=function(e){return JSON.parse(e+"")},J.parseXML=function(e){var t,a;if(!e||"string"!=typeof e)return null;try{a=new DOMParser,t=a.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+e),t};var ft,mt,dt=/#.*$/,ht=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,yt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xt=/^(?:GET|HEAD)$/,gt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bt={},wt={},St="*/".concat("*");try{mt=location.href}catch(Tt){mt=Z.createElement("a"),mt.href="",mt=mt.href}ft=vt.exec(mt.toLowerCase())||[],J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt,type:"GET",isLocal:yt.test(ft[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":St,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?E(E(e,J.ajaxSettings),t):E(J.ajaxSettings,e)},ajaxPrefilter:F(bt),ajaxTransport:F(wt),ajax:function(e,t){function a(e,t,a,i){var l,c,x,g,b,S=t;2!==v&&(v=2,s&&clearTimeout(s),n=void 0,o=i||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,a&&(g=q(f,w,a)),g=B(f,g,w,l),l?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(J.lastModified[r]=b),b=w.getResponseHeader("etag"),b&&(J.etag[r]=b)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=g.state,c=g.data,x=g.error,l=!x)):(x=S,(e||!S)&&(S="error",0>e&&(e=0))),w.status=e,w.statusText=(t||S)+"",l?h.resolveWith(m,[c,S,w]):h.rejectWith(m,[w,S,x]),w.statusCode(y),y=void 0,u&&d.trigger(l?"ajaxSuccess":"ajaxError",[w,f,l?c:x]),p.fireWith(m,[w,S]),u&&(d.trigger("ajaxComplete",[w,f]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,o,i,s,l,u,c,f=J.ajaxSetup({},t),m=f.context||f,d=f.context&&(m.nodeType||m.jquery)?J(m):J.event,h=J.Deferred(),p=J.Callbacks("once memory"),y=f.statusCode||{},x={},g={},v=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!i)for(i={};t=pt.exec(o);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?o:null},setRequestHeader:function(e,t){var a=e.toLowerCase();return v||(e=g[a]=g[a]||e,x[e]=t),this},overrideMimeType:function(e){return v||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)y[t]=[y[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),a(0,t),this}};if(h.promise(w).complete=p.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||mt)+"").replace(dt,"").replace(gt,ft[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=J.trim(f.dataType||"*").toLowerCase().match(de)||[""],null==f.crossDomain&&(l=vt.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===ft[1]&&l[2]===ft[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ft[3]||("http:"===ft[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=J.param(f.data,f.traditional)),O(bt,f,t,w),2===v)return w;u=f.global,u&&0===J.active++&&J.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!xt.test(f.type),r=f.url,f.hasContent||(f.data&&(r=f.url+=(ct.test(r)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=ht.test(r)?r.replace(ht,"$1_="+ut++):r+(ct.test(r)?"&":"?")+"_="+ut++)),f.ifModified&&(J.lastModified[r]&&w.setRequestHeader("If-Modified-Since",J.lastModified[r]),J.etag[r]&&w.setRequestHeader("If-None-Match",J.etag[r])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+St+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(m,w,f)===!1||2===v))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(n=O(wt,f,t,w)){w.readyState=1,u&&d.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{v=1,n.send(x,a)}catch(S){if(!(2>v))throw S;a(-1,S)}}else a(-1,"No Transport");return w},getJSON:function(e,t,a){return J.get(e,t,a,"json")},getScript:function(e,t){return J.get(e,void 0,t,"script")}}),J.each(["get","post"],function(e,t){J[t]=function(e,a,n,r){return J.isFunction(a)&&(r=r||n,n=a,a=void 0),J.ajax({url:e,type:t,dataType:r,data:a,success:n})}}),J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J._evalUrl=function(e){return J.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(e){var t;return J.isFunction(e)?this.each(function(t){J(this).wrapAll(e.call(this,t))}):(this[0]&&(t=J(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(J.isFunction(e)?function(t){J(this).wrapInner(e.call(this,t))}:function(){var t=J(this),a=t.contents();a.length?a.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(a){J(this).wrapAll(t?e.call(this,a):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)};var Mt=/%20/g,Dt=/\[\]$/,Yt=/\r?\n/g,Xt=/^(?:submit|button|image|reset|file)$/i,_t=/^(?:input|select|textarea|keygen)/i;J.param=function(e,t){var a,n=[],r=function(e,t){t=J.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){r(this.name,this.value)});else for(a in e)N(a,e[a],t,r);return n.join("&").replace(Mt,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=J.prop(this,"elements");return e?J.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!J(this).is(":disabled")&&_t.test(this.nodeName)&&!Xt.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var a=J(this).val();return null==a?null:J.isArray(a)?J.map(a,function(e){return{name:t.name,value:e.replace(Yt,"\r\n")}}):{name:t.name,value:a.replace(Yt,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var kt=0,It={},Rt={0:200,1223:204},Ct=J.ajaxSettings.xhr();e.ActiveXObject&&J(e).on("unload",function(){for(var e in It)It[e]()}),$.cors=!!Ct&&"withCredentials"in Ct,$.ajax=Ct=!!Ct,J.ajaxTransport(function(e){var t;return $.cors||Ct&&!e.crossDomain?{send:function(a,n){var r,o=e.xhr(),i=++kt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(r in a)o.setRequestHeader(r,a[r]);t=function(e){return function(){t&&(delete It[i],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?n(o.status,o.statusText):n(Rt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=It[i]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),J.ajaxTransport("script",function(e){if(e.crossDomain){var t,a;return{send:function(n,r){t=J("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",a=function(e){t.remove(),a=null,e&&r("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){a&&a()}}}});var Pt=[],At=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||J.expando+"_"+ut++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(t,a,n){var r,o,i,s=t.jsonp!==!1&&(At.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&At.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=J.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(At,"$1"+r):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return i||J.error(r+" was not called"),i[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){i=arguments},n.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=a.jsonpCallback,Pt.push(r)),i&&J.isFunction(o)&&o(i[0]),i=o=void 0}),"script"):void 0}),J.parseHTML=function(e,t,a){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(a=t,t=!1),t=t||Z;var n=ie.exec(e),r=!a&&[];return n?[t.createElement(n[1])]:(n=J.buildFragment([e],t,r),r&&r.length&&J(r).remove(),J.merge([],n.childNodes))};var Ft=J.fn.load;J.fn.load=function(e,t,a){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var n,r,o,i=this,s=e.indexOf(" ");return s>=0&&(n=J.trim(e.slice(s)),e=e.slice(0,s)),J.isFunction(t)?(a=t,t=void 0):t&&"object"==typeof t&&(r="POST"),i.length>0&&J.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,i.html(n?J("<div>").append(J.parseHTML(e)).find(n):e)}).complete(a&&function(e,t){i.each(a,o||[e.responseText,t,e])}),this},J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length};var Ot=e.document.documentElement;J.offset={setOffset:function(e,t,a){var n,r,o,i,s,l,u,c=J.css(e,"position"),f=J(e),m={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=J.css(e,"top"),l=J.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(n=f.position(),i=n.top,r=n.left):(i=parseFloat(o)||0,r=parseFloat(l)||0),J.isFunction(t)&&(t=t.call(e,a,s)),null!=t.top&&(m.top=t.top-s.top+i),null!=t.left&&(m.left=t.left-s.left+r),"using"in t?t.using.call(e,m):f.css(m)}},J.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){J.offset.setOffset(this,e,t)});var t,a,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;return o?(t=o.documentElement,J.contains(t,n)?(typeof n.getBoundingClientRect!==De&&(r=n.getBoundingClientRect()),a=z(o),{top:r.top+a.pageYOffset-t.clientTop,left:r.left+a.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,a=this[0],n={top:0,left:0};return"fixed"===J.css(a,"position")?t=a.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),J.nodeName(e[0],"html")||(n=e.offset()),n.top+=J.css(e[0],"borderTopWidth",!0),n.left+=J.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-J.css(a,"marginTop",!0),left:t.left-n.left-J.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Ot;e&&!J.nodeName(e,"html")&&"static"===J.css(e,"position");)e=e.offsetParent;return e||Ot})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var n="pageYOffset"===a;J.fn[t]=function(r){return ye(this,function(t,r,o){var i=z(t);return void 0===o?i?i[a]:t[r]:void(i?i.scrollTo(n?e.pageXOffset:o,n?o:e.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),J.each(["top","left"],function(e,t){J.cssHooks[t]=S($.pixelPosition,function(e,a){return a?(a=w(e,t),Le.test(a)?J(e).position()[t]+"px":a):void 0})}),J.each({Height:"height",Width:"width"},function(e,t){J.each({padding:"inner"+e,content:t,"":"outer"+e},function(a,n){J.fn[n]=function(n,r){var o=arguments.length&&(a||"boolean"!=typeof n),i=a||(n===!0||r===!0?"margin":"border");return ye(this,function(t,a,n){var r;return J.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?J.css(t,a,i):J.style(t,a,n,i)},t,o?n:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Et=e.jQuery,qt=e.$;return J.noConflict=function(t){return e.$===J&&(e.$=qt),t&&e.jQuery===J&&(e.jQuery=Et),J},typeof t===De&&(e.jQuery=e.$=J),J}),define("maths",[],function(){var e=function(){function e(e){return e*u}function t(e){return e*c}function a(e){return e*e}function n(e,t){return l()*(t-e)+e}function r(e,t){return s(l()*(t-e+1))+e}function o(e,t,a){return Math.min(Math.max(e,t),a)}var i=Math.PI,s=Math.floor,l=Math.random,u=i/180,c=180/i;return{degToRad:e,radToDeg:t,squareOf:a,randomInRange:n,randomIntInRange:r,clamp:o}}();return e}),define("enginevars",["jquery","maths"],function(e,t){var a=function(){function a(e){try{var t=window[e],a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(n){return!1}}function n(){localStorage.setItem(l,JSON.stringify(s))}function r(){var e=localStorage.getItem(l);null!==e&&(s=JSON.parse(e))}function o(){a("localStorage")?console.log("MESSAGE: local storage check OK"):console.log("ERROR: local storage not supported."),r(),i.gameCVS=e("#cvs"),i.webglBackgroundCanvas=e("#gl-bg-cvs"),i.webglForegroundCanvas=e("#gl-fg-cvs"),i.webglCVS=e("#gl-cvs"),i.hudCVS=e("#hud-cvs"),i.screenRatio=i.glCanvasSize.x/i.glCanvasSize.y,i.invScreenRatio=i.glCanvasSize.y/i.glCanvasSize.x,i.fovAngle=t.degToRad(i.verticalFOVDegrees)*i.screenRatio,i.fovHalf=i.fovAngle/2,i.tanFovHalf=Math.tan(i.fovHalf),i.tanFovHalfY=Math.tan(i.fovHalf*i.invScreenRatio),i.distToProjSurf=Math.abs(i.glCanvasSize.x/2/i.tanFovHalf)}var i={frameDeltaLimit:50,maxNum:99999,minNum:-99999,worldSize:{x:1024,y:1024,z:1024},cvsID:"cvs",gameCVS:null,hudCVS:null,canvasSize:{x:400,y:225},glCanvasSize:{x:1920,y:1080},mapCanvasSize:{x:400,y:225},nearClip:.1,farClip:1e4,fovAngle:0,verticalFOVDegrees:45,fovHalf:0,screenRatio:.75,tanFovHalf:0,tanFovHalfY:0,wallHeight:64,minDarkScalingMult:.25,dimLightFogDensity:.01,fogDensity:.005,fogColourR:.75,fogColourG:.75,fogColourB:.75,gravityAcceleration:1.02,terminalVelocity:15,pushableFriction:.95,playerFriction:.9,playerAcceleration:1.06,minValidForce:.005,pushForceBaseMultiplier:15,maxForceMagnitude:10,maxPushVelocity:2,cameraHeightStand:30,cameraHeightCrouch:18,cameraHeightDead:5,camBobScale:3,camMinBobScale:.08,camBobFreq:.275,camMinBobFreq:.05,camRollScale:.0025,minCamBobVelocity:.15,maxCamBobVelocity:10,sprintCamBobVelocity:4.5,returningCameraBobIncrement:1,weaponViewOffsetAmtX:7,weaponViewOffsetAmtY:2.5,weaponViewBobScaleX:15,weaponViewBobScaleY:10,weaponViewBobFreqX:.1375,weaponViewBobFreqY:.275,minWeaponViewBobScaleX:2,minWeaponViewBobScaleY:1.25,minWeaponViewBobFreqX:.025,minWeaponViewBobFreqY:.05,weaponViewAimOffsetMult:1,weaponRightOffset:6,playerMoveSpeed:.7,playerMaxWeightLimit:30,playerMinInjurySpeedMult:.1,playerSprintSpeedMult:1.55,playerHeadRoom:4,distToProjSurf:0,playerCollisionRadius:16,playerSoftCollisionRadius:20,playerSoftCollisionMult:.5,playerWeaponZOffset:25,heightTransitionSpeed:1.7,baseFallSpeed:1.7,heightTransitionSpeedDead:1,maxStepUp:16,maxScaledMovementStep:8,propCollisionRadius:16,pathNodeSeparation:32,pathNodeCollisionRadius:8,maxPathNodeHeightStepUp:16,maxPathNodeHeightStepDown:32,collisionZeroThreshold:.01,effectSurfaceOffset:8,pathingBaseMovementCost:1,pathingMovementCostDiagMult:1.4,playerCanPushNpcs:!1,playerHealth:50,playerArmour:150,playerHitCooldown:16,hudEffectDuration:16,hudUnitsPerBar:10,playerDoorTriggerDist:64,doorAutoCloseTime:4e3,loadGameCoolDownTime:180,crushDamageCooldown:6,crushDamageAmount:10,thingOcclusionOffset:16,maxEntityCollisionDist:256,directionalAudioPortion:.75,directionalAudioFwdBackScaling:.25,masterVolume:.25,weaponViewLightenMult:.3,geomTexAtlasSize:2048,defaultTextureSize:{x:128,y:128},maxHitscanRange:8192,sectorPushMult:.11},s={audioVolumeMaster:.75,audioVolumeMusic:.75,audioVolumeSound:.75},l="HybridUserSettings";return o(),{init:o,get:function(e){return i.hasOwnProperty(e)?i[e]:s.hasOwnProperty(e)?s[e]:void 0},setUserSetting:function(e,t){s.hasOwnProperty(e)&&(s[e]=t),n()},getUserSettings:function(){return s}}}();return a}),define("renderer",["jquery","maths","enginevars"],function(e,t,a){var n=function(){function n(e,a,n,r,o,i,s,l){var u;u="undefined"==typeof l?k:m_2dCtxDbg,u.save(),u.translate(e,a),u.rotate(t.degToRad(s)),u.beginPath(),u.moveTo(0,0),u.lineTo(n-e,r-a),u.strokeStyle=o,u.lineWidth=i,u.stroke(),u.restore()}function r(e,a,n,r,o,i,s){I.save(),I.translate(e,a),I.rotate(t.degToRad(s)),I.beginPath(),I.moveTo(0,0),I.lineTo(n-e,r-a),I.strokeStyle=o,I.lineWidth=i,I.stroke(),I.restore()}function o(e,a,n,r,o,i,s){var l=k;l.save(),l.translate(e,a),l.translate(n/2,r/2),l.rotate(t.degToRad(s)),l.translate(-(n/2),-(r/2)),l.beginPath(),l.moveTo(0,0),l.lineTo(n,0),l.moveTo(n,0),l.lineTo(n,r),l.moveTo(n,r),l.lineTo(0,r),l.moveTo(0,r),l.lineTo(0,0),l.strokeStyle=o,l.lineWidth=i,l.stroke(),l.restore()}function i(e,t,a,n,r,o){var i=k;"undefined"!=typeof o&&o&&(i=F),i.fillStyle=r,i.fillRect(e,t,a,n)}function s(e,t,a,n,r){I.fillStyle=r,I.fillRect(e,t,a,n)}function l(e,t,a,n,r,o){var i=k;"undefined"!=typeof o&&o&&(i=m_2dCtxDbg),i.fillStyle=n,i.font="normal "+r+"px Helvetica, sans-serif",i.fillText(e,t,a)}function u(e,t,a,n,r){I.fillStyle=n,I.font="bold "+r+"px Helvetica, sans-serif",I.fillText(e,t,a)}function c(e,t,a,n,r){var o=I;"undefined"!=typeof dbg&&dbg&&(o=m_2dCtxDbg),o.fillStyle=n,o.font="normal "+r+"px Helvetica, sans-serif",o.fillText(e,t,a)}function f(e,t,a,n,r,o){var i=k;"undefined"!=typeof o&&o&&(i=F),i.drawImage(e,t,a,n,r)}function m(e,t,a,n,r){I.drawImage(e,t,a,n,r)}function d(e,t,a,n,r,o,i,s,l,u){var c=k;"undefined"!=typeof u&&u&&(c=F),c.drawImage(e,t,a,n,r,o,i,s,l)}function h(e,t,a,n,r,o,i,s,l){I.drawImage(e,t,a,n,r,o,i,s,l)}function p(e,t){var a=k;a.fillStyle=t,a.beginPath(),a.moveTo(e[0].x,e[0].y);for(var n=0;n<e.length;n++)n<e.length-1?a.lineTo(e[n+1].x,e[n+1].y):a.lineTo(e[0].x,e[0].y);a.fill()}function y(e,t,a,n,r,o){var i;i="undefined"==typeof o?k:m_2dCtxDbg,i.beginPath(),i.arc(e,t,a,0,2*Math.PI),i.fillStyle=n,i.fill()}function x(e,t,a,n,r,o){var i;i="undefined"==typeof o?k:m_2dCtxDbg,i.beginPath(),i.arc(e,t,a,0,2*Math.PI),i.strokeStyle=n,i.lineWidth=r,i.stroke()}function g(e,t,a,n,r){d(A,t,a,n,r,t,a,n,r)}function v(e){var t;t="undefined"==typeof e?k:m_2dCtxDbg,t.fillStyle="#000",t.fillRect(0,0,X[0].width,X[0].height)}function b(){I.clearRect(0,0,R.x,R.y)}function w(){m_2dCtxDbg.clearRect(0,0,C.x,C.y)}function S(){return k.getImageData(0,0,R.x,R.y)}function T(){return I.getImageData(0,0,R.x,R.y)}function M(e){k.putImageData(e,0,0)}function D(e){I.putImageData(e,0,0)}function Y(){X=a.get("gameCVS"),k=X[0].getContext("2d"),_=a.get("hudCVS"),I=_[0].getContext("2d"),m_2dCtxDbg=e("#debugcvs")[0].getContext("2d"),k.imageSmoothingEnabled=!1,P=!0}var X,_,k,I,R=a.get("canvasSize"),C=a.get("mapCanvasSize"),P=!1,A=document.createElement("canvas"),F=A.getContext("2d");return A.width=R.x,A.height=R.y,{init:Y,drawLine:n,drawLineHud:r,drawLineRect:o,drawRect:i,drawRectHud:s,drawCircle:y,drawLineCircle:x,drawImage:f,drawClippedImage:d,drawText:l,drawDebugText:c,drawFilledPath:p,getCanvasPixels:S,getHudCanvasPixels:T,setCanvasPixels:M,setHudCanvasPixels:D,flipPreRendered:g,drawImageHud:m,drawClippedImageHud:h,drawTextHud:u,clear:v,clearHud:b,clearMap:w}}();return n}),define("time",["enginevars"],function(e){var t=function(){function t(){return Date.now()}function a(e){e>i&&(e=i),r=e/16.7,o=e}function n(){var e=new Date,t="";switch(e.getDay()){case 0:t="Sun";break;case 1:t="Mon";break;case 2:t="Tue";break;case 3:t="Wed";break;case 4:t="Thu";break;case 5:t="Fri";break;case 6:t="Sat"}var a=t+" "+e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();return a}var r=0,o=0,i=e.get("frameDeltaLimit");return{getCurrent:t,setDeltaTime:a,getDeltaTime:function(){return r},getDeltaMS:function(){return o},getCurrentDateTimeString:n}}();return t}),define("globalevents",["enginevars"],function(e){var t=function(){function e(e,t){if(n.hasOwnProperty(e))for(var a=n[e].subscribers,r=a.length,o=0;r>o;o++)a[o](t);else console.log('ERROR: MOD_GlobalEvents.trigger() : eventType "'+e+'" not recognised.')}function t(e,t){n.hasOwnProperty(e)?n[e].subscribers.push(t):console.log('ERROR: MOD_GlobalEvents.subscribe() : eventType "'+e+'" not recognised.')}function a(e,t){if(n.hasOwnProperty(e)){var a=n[e].subscribers,r=a.indexOf(t);-1!=r&&a.splice(r,1)}else console.log('ERROR: MOD_GlobalEvents.unsubscribe() : eventType "'+e+'" not recognised.')}var n={gamesaved:{subscribers:[]},checkpointsaved:{subscribers:[]},gameloaded:{subscribers:[]},checkpointloaded:{subscribers:[]},inventoryitemadded:{subscribers:[]},inventorytoggle:{subscribers:[]},logstoggle:{subscribers:[]},keypadtoggle:{subscribers:[]},funcsound:{subscribers:[]},playerdied:{subscribers:[]},settingssaved:{subscribers:[]}};return{getEventKeys:function(){if(null==a)for(var e=Object.keys(n),t=e.length,a={},r=0;t>r;r++){var o=e[r];a[o]=o}return a},trigger:e,subscribe:t,unsubscribe:a}}();return t}),define("input",["jquery","enginevars","time","globalevents"],function(e,t,a,n){var r=function(){function r(e){return m.hasOwnProperty(e)?m[e]:void 0}function o(){d.deltaPos.x=0,d.deltaPos.y=0}function i(){
if(navigator.getGamepads){var e=navigator.getGamepads();if(e.length>0&&"undefined"!=typeof e[0]&&null!==e[0]){var t=e[0];h.leftStick.fwd=t.axes[1]<=-h.stickThreshold,h.leftStick.back=t.axes[1]>=h.stickThreshold,h.leftStick.right=t.axes[0]>=h.stickThreshold,h.leftStick.left=t.axes[0]<=-h.stickThreshold,h.leftStick.btn=t.buttons[10].pressed,h.leftStick.axisFwdBack=t.axes[1],h.leftStick.axisLeftRight=t.axes[0],h.rightStick.fwd=t.axes[3]<=-h.stickThreshold,h.rightStick.back=t.axes[3]>=h.stickThreshold,h.rightStick.right=t.axes[2]>=h.stickThreshold,h.rightStick.left=t.axes[2]<=-h.stickThreshold,h.rightStick.btn=t.buttons[11].pressed,h.rightStick.axisFwdBack=t.axes[3],h.rightStick.axisLeftRight=t.axes[2],h.btnStart=t.buttons[9].pressed,h.btnBack=t.buttons[8].pressed,h.btnA=t.buttons[0].pressed,h.btnB=t.buttons[1].pressed,h.btnX=t.buttons[2].pressed,h.btnY=t.buttons[3].pressed,h.rTrigger=t.buttons[7].pressed,h.rBumper=t.buttons[5].pressed,h.lTrigger=t.buttons[6].pressed,h.lBumper=t.buttons[4].pressed,h.dPad.fwd=t.buttons[12].pressed,h.dPad.back=t.buttons[13].pressed,h.dPad.left=t.buttons[14].pressed,h.dPad.right=t.buttons[15].pressed}}}function s(){d.deltaPos.x=d.frameDeltaPos.x,d.frameDeltaPos.x=0}function l(){i(),s()}function u(){o()}function c(){var a=t.get("webglCVS");a.on("click",function(e){this.requestPointerLock=this.requestPointerLock||this.mozRequestPointerLock||this.webkitRequestPointerLock,this.requestPointerLock()}),e(document).on("pointerlockchange",function(e){document.pointerLockElement===a[0]||document.webkitPointerLockElement===a[0]||document.mozPointerLockElement===a[0]?d.locked=!0:d.locked=!1}),e(document).on("mousemove",function(e){if(d.locked){var t=e.originalEvent.movementX;d.frameDeltaPos.x+=t}}),e("#toggle-collision").text("Collision "+(p?"on":"off")),e("#toggle-collision").on("click",function(t){p=!p,e("#toggle-collision").text("Collision "+(p?"on":"off"))})}var f=n.getEventKeys(),m={esc:!1,w:!1,a:!1,s:!1,d:!1,e:!1,c:!1,up:!1,lt:!1,dn:!1,rt:!1,ctrl:!1,shift:!1,alt:!1,space:!1,r:!1,num1:!1,num2:!1,num3:!1,num4:!1,num5:!1,num6:!1,num7:!1,num8:!1,num9:!1,num0:!1,del:!1},d={locked:!1,down:!1,leftBtn:!1,middleBtn:!1,rightBtn:!1,pos:{x:0,y:0},worldPos:{x:0,y:0},deltaPos:{x:0,y:0},frameDeltaPos:{x:0,y:0}},h={stickThreshold:.2,leftStick:{fwd:!1,right:!1,back:!1,left:!1,btn:!1,axisLeftRight:0,axisFwdBack:0},rightStick:{fwd:!1,right:!1,back:!1,left:!1,btn:!1,axisLeftRight:0,axisFwdBack:0},dPad:{fwd:!1,right:!1,back:!1,left:!1},btnStart:!1,btnBack:!1,btnA:!1,btnB:!1,btnX:!1,btnY:!1,rTrigger:!1,lTrigger:!1,rBumper:!1,lBumper:!1},p=!0;a.getDeltaTime();return e(document).ready(function(){e(window).bind("beforeunload",function(){return"Close the tab? You will lose any unsaved data."}),e(window).on("keypress",function(e){switch(e.key){case"i":n.trigger(f.inventorytoggle);break;case"l":n.trigger(f.logstoggle);break;case"k":n.trigger(f.keypadtoggle)}}),e(window).on("keydown",function(e){switch(e.which){case 27:e.preventDefault(),m.esc=!0;break;case 87:m.w=!0;break;case 65:m.a=!0;break;case 83:m.s=!0;break;case 68:m.d=!0;break;case 69:m.e=!0;break;case 67:m.c=!0;break;case 38:e.preventDefault(),m.up=!0;break;case 37:m.lt=!0;break;case 40:e.preventDefault(),m.dn=!0;break;case 39:m.rt=!0;break;case 17:m.ctrl=!0;break;case 16:m.shift=!0;break;case 18:m.alt=!0;break;case 32:e.preventDefault(),m.space=!0;break;case 82:e.preventDefault(),m.r=!0;break;case 49:m.num1=!0;break;case 50:m.num2=!0;break;case 51:m.num3=!0;break;case 52:m.num4=!0;break;case 53:m.num5=!0;break;case 54:m.num6=!0;break;case 55:m.num7=!0;break;case 56:m.num8=!0;break;case 57:m.num9=!0;break;case 48:m.num0=!0;break;case 46:m.del=!0}}),e(window).on("keyup",function(e){switch(e.which){case 27:e.preventDefault(),m.esc=!1;break;case 87:m.w=!1;break;case 65:m.a=!1;break;case 83:m.s=!1;break;case 68:m.d=!1;break;case 69:m.e=!1;break;case 67:m.c=!1;break;case 38:m.up=!1;break;case 37:m.lt=!1;break;case 40:m.dn=!1;break;case 39:m.rt=!1;break;case 17:m.ctrl=!1;break;case 16:m.shift=!1;break;case 18:m.alt=!1;break;case 32:m.space=!1;break;case 82:m.r=!1;break;case 49:m.num1=!1;break;case 50:m.num2=!1;break;case 51:m.num3=!1;break;case 52:m.num4=!1;break;case 53:m.num5=!1;break;case 54:m.num6=!1;break;case 55:m.num7=!1;break;case 56:m.num8=!1;break;case 57:m.num9=!1;break;case 48:m.num0=!1;break;case 46:m.del=!1}}),e(window).on("mousedown",function(e){switch(e.which){case 1:d.leftBtn=!0;break;case 2:d.rightBtn=!0;break;case 3:d.middleBtn=!0}}),e(window).on("mouseup",function(e){switch(e.which){case 1:d.leftBtn=!1;break;case 2:d.rightBtn=!1;break;case 3:d.middleBtn=!0}})}),c(),{getKeyStates:function(){return m},getMouseStates:function(){return d},getPadStates:function(){return h},getKeyState:r,getCollisionOn:function(){return p},update:l,reset:u}}();return r}),define("vector2",[],function(){var e=function(){function e(e){return e*C}function t(e){return e*P}function a(e){var t=(_(e),X(e));return{x:t,y:t}}function n(e){return t(I(e.y,e.x))}function r(e){return I(e.y,e.x)}function o(e){var t=e.x,a=e.y;return R(t*t+a*a)}function i(e){var t=e.x,a=e.y,n=e.z,r=R(t*t+a*a);return R(r*r+n*n)}function s(e){var t=o(e);return 0==t?{x:0,y:0}:{x:e.x/t,y:e.y/t}}function l(e){var t=i(e);return 0==t?{x:0,y:0,z:0}:{x:e.x/t,y:e.y/t,z:e.z/t}}function u(e,t){return e.x*t.x+e.y*t.y}function c(e,t){var a=s,r=n,o=r(a(t))-r(a(e));return o>180?o-=360:-180>o&&(o+=360),o}function f(e,t){var a=I;return a(t.y,t.x)-a(e.y,e.x)}function m(e,t){var a=I,n=a(t.y,t.x)-a(e.y,e.x);return n>=0?n:A+n}function d(e,a){var n=s,r=o;e=n(e),a=n(a);var i=u(e,a),l=r(e),c=r(a),f=i/(l*c);return f>1?f=1:-1>f&&(f=-1),t(k(f))}function h(e,t){var a=s,n=o;e=a(e),t=a(t);var r=u(e,t),i=n(e),l=n(t),c=r/(i*l);return c>1?c=1:-1>c&&(c=-1),k(c)}function p(e,t,a,n){var r=Math.sqrt(e*e+t*t),o=Math.sqrt(a*a+n*n);if(0===r||0===o)return 0;var i=e*a+t*n,s=i/(r*o);return s>1?s=1:-1>s&&(s=-1),k(s)}function y(e,t){var a=_(t),n=X(t),r=e.x,o=e.y;return{x:r*a-o*n,y:o*a+r*n}}function x(t,a){return y(t,e(a))}function g(e,t,a){return x(a*d(e,t))}function v(e,t){return{x:e.x*t,y:e.y*t}}function b(e,t,a){return{x:t.x*a+e.x,y:t.y*a+e.y}}function w(e,t){return{x:t.x-e.x,y:t.y-e.y}}function S(e,t){return{x:e.x+t.x,y:e.y+t.y}}function T(e,t){return{x:e.x*t,y:e.y*t}}function M(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}}function b(e,t,a){return{x:t.x*a+e.x,y:t.y*a+e.y}}function D(e,t){var a=u,n=s(t);return T(n,a(e,n)/a(n,n))}function Y(e,t,a){var n=r(e);return n>r(a)&&n<r(t)}var X=Math.sin,_=Math.cos,k=(Math.tan,Math.atan,Math.acos),I=Math.atan2,R=Math.sqrt,C=Math.PI/180,P=180/Math.PI,A=6.28319,F=function(e,t){return"undefined"==typeof e&&(e=0),"undefined"==typeof t&&(t=0),{x:e,y:t}};return{New:F,degreesToVector:a,degreesFromVector:n,radiansFromVector:r,angleBetweenVectors:d,radiansBetweenVectors:h,radiansBetweenVectorsCoords:p,signedAngleBetweenVectors:c,signedRadiansBetweenVectors:f,internalRadiansBetweenEdges:m,vectorToDestination:w,rotateByDegrees:x,rotateByRadians:y,rotationLERP:g,translationLERP:v,getMagnitude:o,getMagnitude3D:i,sumVectors:S,normalise:s,normalise3D:l,scaleVector:T,scaleVector3D:M,getRenderablePoint:b,dotProduct:u,radiansToDegrees:t,degreesToRadians:e,getProjectedVector:D,vectorBetweenVectors:Y}}();return e}),define("collision",["vector2","enginevars"],function(e,t){var a=function(){function a(e,t,a,n,r,o){var i=(r-a)*(t-n)-(o-n)*(e-a);return 0-W>i?-1:i>0+W?1:0}function n(e,t,a,n,r,o){return((n-o)*e+(r-a)*t+(a*o-r*n))/H((r-a)*(r-a)+(o-n)*(o-n))}function r(e,t){return e.x>=t.x&&e.x<=t.x+t.w&&e.y>=t.y&&e.y<=t.y+t.h?!0:!1}function o(e,t){var a=t.x-e.x,n=t.y-e.y;return Math.sqrt(a*a+n*n)<=t.rad}function i(e,t){var a=e.x,n=e.y,r=t.x,o=t.y;return a+e.w<r||a>r+t.w||n+e.h<o||n>o+t.h?!1:!0}function s(e,t,a,n,r,o,i,s){return!(r>e+a||e>r+i||o>t+n||t>o+s)}function l(e,t){var a=e.x,n=(e.y,e.w),r=e.h,o=t.x,i=(t.y,t.w),s=t.h,l=a+n,u=o+i,c={x:e.x>t.x?e.x:t.x,y:e.y>t.y?e.y:t.y,w:u>l?l-n:u-i,h:axh<bxh?axh-r:bxh-s};return c.w<=0||c.h<=0?null:c}function u(e,t){var a=e.x,n=e.y,r=t.x,o=t.y;return a>=r&&n>=o&&a+e.w<=r+t.w&&n+e.h<=o+t.h}function c(e,t,a,n){var r=a.x-e.x,o=a.y-e.y;return Math.sqrt(r*r+o*o)<t+n}function f(e,t,a,n,r,o,s,l,u,c){var f=Math.abs,m={x:a>e?e:a,y:n>t?t:n,w:f(a-e),h:f(n-t)},d={x:s>r?r:s,y:l>o?o:l,w:f(s-r),h:f(l-o)};if(!("undefined"!=typeof u&&u||"undefined"!=typeof c&&c||i(m,d)))return{result:!1,ib_result:null};var h=n-t,p=l-o,y=e-a,x=r-s,g=h*e+y*t,v=p*r+x*o,b=h*x-p*y,w=(x*g-y*v)/b,S=(h*v-p*g)/b,T=m.w>0?(w-e)/(a-e):(S-t)/(n-t),M=d.w>0?(w-r)/(s-r):(S-o)/(l-o);return u||c?(u&&!c||!u&&c)&&(!u&&(0>T||T>=1)||!c&&(0>M||M>=1))?{result:!1,ib_result:!0,intersect:{x:w,y:S}}:{result:!0,ib_result:!0,intersect:{x:w,y:S}}:0>T||T>=1||0>M||M>=1?{result:!1,ib_result:!0,intersect:{x:w,y:S}}:{result:!0,ib_result:!0,intersect:{x:w,y:S}}}function m(e,t,a,n,r,o,i,s){var l=V,u=a>e?e:a,c=n>t?t:n,f=l(a-e),m=l(n-t),d=i>r?r:i,h=s>o?o:s,p=l(i-r),y=l(s-o);if(d>u+f||u>d+p||h>c+m||c>h+y)return{result:!1};var x=n-t,g=s-o,v=e-a,b=r-i,w=x*e+v*t,S=g*r+b*o,T=x*b-g*v,M=(b*w-v*S)/T,D=(x*S-g*w)/T,Y=f>0?(M-e)/(a-e):(D-t)/(n-t),X=p>0?(M-r)/(i-r):(D-o)/(s-o);return 0>Y||Y>=1||0>X||X>=1?{result:!1}:{result:!0,x:M,y:D}}function d(e,t,a,n,r,o,i,s){var l=V,u=a>e?e:a,c=n>t?t:n,f=l(a-e),m=l(n-t),d=i>r?r:i,h=s>o?o:s,p=l(i-r),y=l(s-o);if(d>u+f||u>d+p||h>c+m||c>h+y)return!1;var x=n-t,g=s-o,v=e-a,b=r-i,w=x*e+v*t,S=g*r+b*o,T=x*b-g*v,M=(b*w-v*S)/T,D=(x*S-g*w)/T,Y=f>0?(M-e)/(a-e):(D-t)/(n-t),X=p>0?(M-r)/(i-r):(D-o)/(s-o);return Y>0||1>=Y||X>0||1>=X}function h(e,t,a,n,o){var s=!1;if(e.x==t.x){var l={x:e.y,y:e.x},u={x:t.y,y:t.x},c={x:a.y,y:a.x},s=!0;e=l,t=u,a=c}var f={x:e.x<=t.x?e.x:t.x,y:e.y<=t.y?e.y:t.y,w:e.x<=t.x?t.x-e.x:e.x-t.x,h:e.y<=t.y?t.y-e.y:e.y-t.y},m={x:a.x-n,y:a.y-n,w:2*n,h:2*n};if(!i(f,m))return{result:!1};var d={x:e.x,y:e.y},h={x:t.x,y:t.y},p=n,y=a.x,x=a.y,g=(h.y-d.y)/(h.x-d.x),v=d.y-g*d.x,b=g*g+1,w=2*((v-x)*g)-2*y,S=y*y+(v-x)*(v-x)-p*p,T=b/b,M=w/b,D=S/b,Y=M*M-4*T*D;if(0>Y)return{result:!1};var X=(-M+Math.sqrt(Y))/(2*T),_=(-M-Math.sqrt(Y))/(2*T);Ya=g*X+v,Yb=g*_+v;var k=[{x:X,y:Ya},{x:_,y:Yb}],I=k[0],R=k[1];if(I.x==R.x&&I.y==R.y&&k.pop(),("undefined"==typeof o||!o)&&(f.x-=1,f.y-=1,f.w+=2,f.h+=2,k.length>0&&(r(I,f)||k.splice(0,1)),k.length>1&&(r(R,f)||k.splice(1,1)),k.length<1))return{result:!1};if(s)for(var C=0;C<k.length;C++){var P={x:k[C].y,y:k[C].x};k[C]=P}return{result:!0,intersectPoints:k}}function p(e,t,a,n){return e>a?n>t?0:1:n>t?3:2}function y(e,t,n){if(!r(e,n))return!1;for(var o=Math.abs,i=0,s=t.length,l=0;s>l;l++){var u=t[l],c=u.ep,f=u.sp,m=p(c.x,c.y,e.x,e.y),d=p(f.x,f.y,e.x,e.y);if(m!==d){var h=o(m-d);if(1===h)d>m?i--:i++;else if(0===m&&3===d)i++;else if(3===m&&0===d)i--;else{var y=a(e.x,e.y,f.x,f.y,c.x,c.y);1>y?i-=2:i+=2}}}return 0!=i}function x(t,a,n,r){var o=t.sp,i=t.ep,s={x:o.x<=i.x?o.x:i.x,y:o.y<=i.y?o.y:i.y,w:Math.abs(o.x-i.x),h:Math.abs(o.y-i.y)},l={x:s.x+s.w/2,y:s.y+s.h/2};if(!y(l,a,n))return!1;for(var u=a.length,c=t.sp,f=t.ep,d=0;u>d;d++){var h=a[d],p=h.sp,x=h.ep,g=m(c.x,c.y,f.x,f.y,p.x,p.y,x.x,x.y);if(g.result&&g.x!==c.x&&g.y!==c.y&&g.x!==f.x&&g.y!==f.y&&(r===!1||!e.radiansBetweenVectors({x:f.x-c.x,y:f.y-c.y},{x:x.x-p.x,y:x.y-p.y})))return!1}return!0}function g(e,t,a){if(!r(e,a))return!1;for(var n=a.x-1,o=a.y-1,i=0,s=(t.length,0);s<t.length;s++){var l=t[s],u=l.sp,c=l.ep,m=f(n,o,e.x,e.y,u.x,u.y,c.x,c.y,!1,!1);1==m.result&&i++}return i%2>0?!0:!1}function v(e){if(0===e.length)return e;e.sort(function(e,t){return e[0]-t[0]});var t=[];t.push(e[0]);for(var a=e.length,n=1;a>n;n++){var r=e[n],o=t[t.length-1];r[0]>o[1]?t.push(r):o[1]=r[1]}return t}function b(e,t,a){var n=[],r=a.length;n.push([e,t]);for(var o=0;r>o;o++)for(var i=a[o],s=i[0],l=i[1],u=0;u<n.length;u++){var c=n[u],f=c[0],m=c[1];if(m>s&&l>f)if(s>f&&m>l){var d=[f,s],h=[l,m];n.splice(u,1),n.push(d),n.push(h),u--}else s>f?m=s:m>l&&(f=l)}return n}function w(e,t){return u(e.b,t.b)}function S(e,t){for(var a=t.length,n=e.sp,r=e.ep,o=0;a>o;o++){var i=t[o],s=i.sp,l=i.ep,u=f(n.x,n.y,r.x,r.y,s.x,s.y,l.x,l.y);if(u.result)return!0}return!1}function T(e,t,a,n,r,o){var i=a-e,s=n-t,l=((r-e)*i+(o-t)*s)/(i*i+s*s);return 0>l?{x:e,y:t}:l>1?{x:a,y:n}:{x:e+l*i,y:t+l*s}}function M(e,t,n,r,o,i,s,l,u,c){var m={x:e.x+t.x,y:e.y+t.y,z:e.z},d=.02,h=null,p=0,y=0,x=0,g=0,v=0,b=0;if(c>L||t.x>-d&&t.x<d&&t.y>-d&&t.y<d)return m.x=e.x,m.y=e.y,m;var w=Math.sqrt(t.x*t.x+t.y*t.y);numSweepSteps=Math.ceil(w/o);for(var S=0;S<numSweepSteps;S++)for(var D=(S+1)/numSweepSteps,Y=e.x+t.x*D,X=e.y+t.y*D,_=r.length,k=0;_>k;k++)for(var I=r[k],R=I.l,C=R.length,P=0;C>P;P++){var A=R[P];if(!(A.s!==!0&&A.middleBottomZ+n<A.middleTopZ&&e.z>=A.middleBottomZ-j||a(Y,X,A.sp.x,A.sp.y,A.ep.x,A.ep.y)>0)){var F=T(A.sp.x,A.sp.y,A.ep.x,A.ep.y,Y,X),O=F.x-Y,E=F.y-X,q=Math.sqrt(O*O+E*E);if(o>=q&&(null===h||h>q)){p=E,y=-O;var B=O/q,N=E/q,z=1.01*-o,V=B*z,H=N*z;x=F.x-p+V,g=F.y-y+H,v=F.x+p+V,b=F.y+y+H,h=q}}}if(null===h)return m;var W=f(e.x,e.y,e.x+t.x,e.y+t.y,x,g,v,b,!0,!0);if(W.result!==!0)return m;var U=W.intersect.x,G=W.intersect.y,K=Y-U,$=X-G,Z=Math.sqrt(p*p+y*y),Q=p/Z,J=y/Z,ee=K*Q+$*J,te=Q*Q+J*J,ae=ee/te,ne=Q*ae,re=J*ae,oe=U+ne,ie=G+re;return null!==i&&null!==s&&null!==l&&null!==u&&-1!==a(oe,ie,i,s,l,u)&&(oe=U,ie=G),t.x=oe-e.x,t.y=ie-e.y,M(e,t,n,r,o,x,g,v,b,++c)}function D(t,a,n,r,o,i,s){var l={x:t.x+r.x,y:t.y+r.y},u=_(l,a,o,n);if(u.length>0&&i)return r.x=0,r.y=0,r;if(s>L||0==u.length||(0==r.x||r.x<0&&r.x>-z||r.x>0&&r.x<z)&&(0==r.y||r.y<0&&r.y>-z||r.y>0&&r.y<z))return s>L&&(r.x=0,r.y=0),r;for(var c=u.length,f=0;c>f;f++){var m=u[f],d=m.p,h=d.x-t.x;dy=d.y-t.y,m.distToCenter=Math.sqrt(h*h+dy*dy),m.vecToCenter={x:h,y:dy}}u.sort(function(e,t){return e.distToCenter-t.distToCenter});var p=u[0],y=e.rotateByRadians(p.vecToCenter,1.57079633),x=e.getProjectedVector(r,y);return D(t,a,n,x,o,++s)}function Y(e,t,n,r,o,i,s,l,u){var c=[],f=o/2,m=e.z,d=i?m+f:m+o,p=i?m-f:m,y=Math.sqrt(n.x*n.x+n.y*n.y),x=s?j:0,g=l.length;isNaN(y),"undefined"==typeof u&&(u=!1);for(var v=0;g>v;v++)for(var b=l[v],w=b.l,S=w.length,T=0;S>T;T++){var M=w[T];if((M.s&&(u===!1||M.o===!0)||d>b.ch-M.upper||p<b.fh+M.lower-x||M.middle<o)&&a(e.x,e.y,M.sp.x,M.sp.y,M.ep.x,M.ep.y)<=0)for(var D=Math.ceil(y/r),Y=0;D>Y;Y++){var X=(Y+1)/D,_=e.x+n.x*X,k=e.y+n.y*X,I=h(M.sp,M.ep,{x:_,y:k},r);if(1==I.result){I.intersectPoints[0].x-t.x,I.intersectPoints[0].y-t.y;c.push({wall:M,intersectPoints:I.intersectPoints});break}}}return c}function X(e,t,a){var n=e.z;return n+t>a.ch||n-t<a.fh}function _(t,a,n,r){var o=[],i=Math.sqrt(a.x*a.x+a.y*a.y),s=r.length;isNaN(i);for(var l=0;s>l;l++){var u=r[l];if(u.isSolid){var f=u.p,m=f.x-t.x,d=f.y-t.y,h=m*m+d*d;if(h>B)continue;if(e.radiansBetweenVectorsCoords(a.x,a.y,m,d)>1.5708)continue;if(u.isSolid&&u.solidToThings)for(var p=Math.ceil(i/n),y=0;p>y;y++){var x=(y+1)/p,g=t.x+a.x*x,v=t.y+a.y*x,b=c(f,u.colRad,{x:g,y:v},n);if(b===!0){o.push(u);break}}}}return o}function k(t,a,n,r){for(var o=[],i=r.length,s=0;i>s;s++){var l=r[s];if(l.isNPC&&l.isSolid&&l.solidToThings){var u=l.p.x-t.x,f=l.p.y-t.y;if(e.radiansBetweenVectorsCoords(a.x,a.y,u,f)>1.5708)continue;var m=c(l.p,N,t,n);1==m&&o.push(l.npc)}}return o}function I(e,t,a){for(var n=[],r=a.length,o=0;r>o;o++){var i=a[o];"pickup"===i.entityType&&c(e,t,i.p,i.colRad)&&n.push(i.pickup)}return n}function R(e,t,a){return c(e,t,a.parentThing.p,a.parentThing.colRad)}function C(e,t){for(var a={result:!1,others:[]},n=t.length,r=0;n>r;r++){var o=t[r];if(o.isSolid&&o.isNPC){var i=o.npc;if(i==e)continue;c(e.movement.p,N,i.movement.p,N)&&(a.result=!0,a.others.push(i))}}return a}function P(e,t,a,n){var r=[];c(a,n,e.getPos(),e.getCollisionRadius())&&r.push(e);for(var o=t.length,i=0;o>i;i++){var s=t[i];s.destructible&&c(a,n,s.p,s.colRad)&&r.push(s)}return r}function A(t,a,n,r){for(var s=t.getHeadPos(),l=a.getHeadPos(),u=n.length,c=s.x,m=s.y,d=l.x,p=l.y,y=d-c,x=p-m,g=Math.sqrt(y*y+x*x),v={x:d>=c?c:d,y:p>=m?m:p,w:d>=c?d-c:c-d,h:p>=m?p-m:m-p},b=0;u>b;b++){var w=n[b],S=w.l,T=S.length;if(0!=i(v,w.b))for(var M=0;T>M;M++){var D=S[M],Y=D.sp,X=D.ep,_=f(s.x,s.y,l.x,l.y,Y.x,Y.y,X.x,X.y);if(1==_.result){if(D.o)return{result:!1,intersect:_.intersect};if(e.radiansBetweenVectors(D.n.l,e.vectorToDestination(s,l))>1.57079633){var k=D.upper>0?D.ch-D.upper:D.ch,I=D.lower>0?D.fh+D.lower:D.fh,R=a.getPos().z,C=l.z,P=_.intersect.x-s.x,A=_.intersect.y-s.y,F=Math.sqrt(P*P+A*A),O=l.x-s.x,E=l.y-s.y,q=Math.sqrt(O*O+E*E),B={x:0,y:s.z},N=e.vectorToDestination(B,{x:F,y:I}),z=e.vectorToDestination(B,{x:F,y:k}),L=e.vectorToDestination(B,{x:q,y:R}),j=e.vectorToDestination(B,{x:q,y:C});if(!(e.vectorBetweenVectors(j,z,N)||e.vectorBetweenVectors(L,z,N)||e.vectorBetweenVectors(z,j,L)||e.vectorBetweenVectors(N,j,L)))return{result:!1,intersect:_.intersect}}}}}for(var V=r.length,H=0;V>H;H++){var W=r[H],U=W.p;if(W.isNPC){var G=o(s,{x:U.x,y:U.y,rad:W.projectileColRad});if(G||W.npc.isDeadOrDying())continue}var _=h(s,l,U,W.colRad,!1);if(_.result){if(_.intersectPoints.length>1){var K=_.intersectPoints[0],$=_.intersectPoints[1],Z=K.x-s.x,Q=K.y-s.y,J=$.x-s.x,ee=$.y-s.y,te=Math.sqrt(Z*Z+Q*Q),ae=Math.sqrt(J*J+ee*ee);_.intersect=ae>te?K:$}else _.intersect=_.intersectPoints[0];var ne=_.intersect.x-s.x,re=_.intersect.y-s.y;_.distFromRayOrigin=Math.sqrt(ne*ne+re*re);var oe=W.getPos().z,ie=W.getHeadPos().z,R=a.getPos().z,C=a.getHeadPos().z,se=_.distFromRayOrigin,q=g,B={x:0,y:s.z},le=e.vectorToDestination(B,{x:se,y:oe}),ue=e.vectorToDestination(B,{x:se,y:ie}),L=e.vectorToDestination(B,{x:q,y:R}),j=e.vectorToDestination(B,{x:q,y:C});if(e.vectorBetweenVectors(j,ue,le)&&e.vectorBetweenVectors(L,ue,le))return{result:!1,intersect:_.intersect}}}return{result:!0}}function F(e,t,a,n,r,s){var l=[];if(!s){var u=r.getPos(),c=r.getCollisionRadius(),m=h(e,t,u,c,!1);if(m.result){if(m.intersectPoints.length>1){var d=m.intersectPoints[0],p=m.intersectPoints[1],y=d.x-e.x,x=d.y-e.y,g=p.x-e.x,v=p.y-e.y,b=Math.sqrt(y*y+x*x),w=Math.sqrt(g*g+v*v);m.intersect=w>b?d:p}else m.intersect=m.intersectPoints[0];m.objRef=r,m.typeHit="player";var S=m.intersect.x-e.x,T=m.intersect.y-e.y;m.distFromRayOrigin=Math.sqrt(S*S+T*T),l.push(m)}}for(var M=a.length,D={x:e.x<=t.x?e.x:t.x,y:e.y<=t.y?e.y:t.y,w:e.x<=t.x?t.x-e.x:e.x-t.x,h:e.y<=t.y?t.y-e.y:e.y-t.y},Y=0;M>Y;Y++){var X=a[Y];if(0!=i(D,X.b))for(var _=X.l,k=_.length,I=0;k>I;I++){var R=_[I],C=R.sp,P=R.ep,m=f(e.x,e.y,t.x,t.y,C.x,C.y,P.x,P.y);if(m.result){m.typeHit="wall",m.objRef=R;var S=m.intersect.x-e.x,T=m.intersect.y-e.y;m.distFromRayOrigin=Math.sqrt(S*S+T*T),l.push(m)}}}for(var A=n.length,F=0;A>F;F++){var O=n[F];if(O.alive&&O.solidToProjectiles){var E=O.p;if(O.isNPC){var q=o(e,{x:E.x,y:E.y,rad:O.projectileColRad+1});if(q||O.npc.isDeadOrDying())continue}var m=h(e,t,E,O.projectileColRad,!1);if(m.result){if(m.intersectPoints.length>1){var d=m.intersectPoints[0],p=m.intersectPoints[1],y=d.x-e.x,x=d.y-e.y,g=p.x-e.x,v=p.y-e.y,b=Math.sqrt(y*y+x*x),w=Math.sqrt(g*g+v*v);m.intersect=w>b?d:p}else m.intersect=m.intersectPoints[0];m.objRef=O;var S=m.intersect.x-e.x,T=m.intersect.y-e.y;m.distFromRayOrigin=Math.sqrt(S*S+T*T),O.isNPC?m.typeHit="npc":m.typeHit="prop",l.push(m)}}}return l.sort(function(e,t){return e.distFromRayOrigin-t.distFromRayOrigin}),l}function O(t,a,n,r,o,i){for(var s=F(t,a,n,r,o,i),l=null,u=s.length,c=0;u>c;c++){var f=s[c];if(f.objRef.destructible){l=f;break}}if(u>0){for(var m=[],d=[],c=0;u>c;c++){var f=s[c],h=f.typeHit,p=f.objRef.o;if("wall"==h&&p){if(0==m.length&&0==d.length)return f.coord=f.intersect,f.coord.z=t.z,f}else"wall"!=h||p?("prop"==h||"npc"==f.typeHit&&!f.objRef.npc.isDeadOrDying()||"player"==f.typeHit)&&(f.objRef.destructible?d.push(f):m.push(f)):m.push(f)}for(var y=d.length,x=0;y>x;x++){for(var g=d[x],w=g.objRef,S=!1,T=0;T<m.length;T++){var M=m[T],D=M.objRef;if(M.distFromRayOrigin<g.distFromRayOrigin){var Y=M.typeHit;if("prop"==Y){var X=D.getPos().z,_=D.getHeadPos().z,k=w.getPos().z,I=w.getHeadPos().z,R=M.distFromRayOrigin,C=g.distFromRayOrigin,P={x:0,y:t.z},A=e.vectorToDestination(P,{x:R,y:X}),O=e.vectorToDestination(P,{x:R,y:_}),E=e.vectorToDestination(P,{x:C,y:k}),q=e.vectorToDestination(P,{x:C,y:I});if(e.vectorBetweenVectors(q,O,A)&&e.vectorBetweenVectors(E,O,A)){S=!0;break}}else if("wall"==Y&&!M.objRef.o){var B=M.objRef;if(e.radiansBetweenVectors(B.n.l,e.vectorToDestination(t,a))>1.57079633){var N=B.upper>0?B.ch-B.upper:B.ch,z=B.lower>0?B.fh+B.lower:B.fh,k=w.getPos().z,I=w.getHeadPos().z,L=M.distFromRayOrigin,C=g.distFromRayOrigin,P={x:0,y:t.z},j=e.vectorToDestination(P,{x:L,y:z}),V=e.vectorToDestination(P,{x:L,y:N}),E=e.vectorToDestination(P,{x:C,y:k}),q=e.vectorToDestination(P,{x:C,y:I});if(!(e.vectorBetweenVectors(q,V,j)||e.vectorBetweenVectors(E,V,j)||e.vectorBetweenVectors(V,q,E)||e.vectorBetweenVectors(j,q,E))){S=!0;break}}}}}if(!S){for(var P={x:0,y:t.z},H=e.vectorToDestination(P,{x:0,y:1}),W=e.vectorToDestination(P,{x:0,y:-1}),U=3.14159,G=0,K=H,$=W,Z=w.getPos().z,Q=w.getHeadPos().z,J=Q-Z,ee=g.distFromRayOrigin,te=e.vectorToDestination(P,{x:ee,y:Q}),ae=e.vectorToDestination(P,{x:ee,y:Z}),ne=e.signedRadiansBetweenVectors(W,te),re=e.signedRadiansBetweenVectors(W,ae),oe=Math.abs(e.signedRadiansBetweenVectors(te,ae)),ie=[],se=m.length,T=0;se>T;T++){var M=m[T],D=M.objRef;if(M.distFromRayOrigin<g.distFromRayOrigin){var Y=M.typeHit;if("prop"==Y){var le=M.objRef,X=le.getPos().z,_=le.getHeadPos().z,R=M.distFromRayOrigin,ue=e.vectorToDestination(P,{x:R,y:_}),ce=e.vectorToDestination(P,{x:R,y:X}),fe=e.vectorBetweenVectors(ue,te,ae),me=e.vectorBetweenVectors(ce,te,ae);if(fe||me){var de=Q,he=Z;e.signedRadiansBetweenVectors(W,ue),e.signedRadiansBetweenVectors(W,ce);if(fe){var pe=Math.abs(e.signedRadiansBetweenVectors(ue,ae)),ye=pe/oe*J;de=Z+ye}if(me){var xe=Math.abs(e.signedRadiansBetweenVectors(te,ce)),ge=xe/oe*J;he=Q-ge}ie.push([he,de])}}else if("wall"==Y&&!M.objRef.o){var B=M.objRef,L=M.distFromRayOrigin,ve=e.vectorToDestination(P,{x:L,y:B.middleTopZ}),be=e.vectorToDestination(P,{x:L,y:B.middleBottomZ}),we=e.signedRadiansBetweenVectors(W,ve),Se=e.signedRadiansBetweenVectors(W,be);U>we&&(U=we,K=ve),Se>G&&(G=Se,$=be)}}}var Te=Q,Me=Z;if(ne>U){var De=(ne-U)/oe,Ye=De*J;Te=Q-Ye}if(G>re){var Xe=(G-re)/oe,_e=Xe*J;Me=Z+_e}for(var ke=v(ie),Ie=b(Me,Te,ke),Re=Ie[0],Ce=Ie.length,Pe=0;Ce>Pe;Pe++){var Ae=Ie[Pe];Ae[1]-Ae[0]>Re[1]-Re[0]&&(Re=Ae)}g.coord=g.intersect;var Fe=Z+w.idealAimPointZOffset;return Fe>Re[0]&&Fe<Re[1]?g.coord.z=Fe:g.coord.z=Re[0]+(Re[1]-Re[0])/2,g}}for(var u=s.length,c=0;u>c;c++){var f=s[c],B=f.objRef,h=f.typeHit;if("wall"!=h||B.o){if("wall"==h&&f.objRef.o)return f.coord=f.intersect,f.coord.z=t.z,f;if("prop"==h||"npc"==f.typeHit&&!f.objRef.npc.isDeadOrDying()||"player"==f.typeHit){var Oe=f.objRef,Ee=t.z,qe=Oe.getPos().z,Be=Oe.getHeadPos().z;if(Ee>qe&&Be>Ee)return f.coord=f.intersect,f.coord.z=t.z,f}}else if(e.radiansBetweenVectors(f.objRef.n.l,e.vectorToDestination(t,a))>1.57079633){var N=B.ch-B.upper,z=B.fh+B.lower,Ee=t.z;if(z>Ee||Ee>N)return f.coord=f.intersect,f.coord.z=t.z,f}}return{result:!1}}return{result:!1}}function E(e,t,a,n,r,o){for(var i={x:e.x+t.x,y:e.y+t.y},s=F(e,i,a,n,r,o),l=0,u=e.z,c=Math.sqrt(t.x*t.x+t.y*t.y),f=e.z+t.z,d=s.length,h=0;d>h;h++){var p=s[h],y=p.typeHit,x=p.objRef;p.coord=p.intersect;var g=p.distFromRayOrigin,v=0,b=0,w=0,S=0,T=!1;if("wall"!=y||x.o)"wall"==y&&x.o?(v=x.fh,b=x.ch):("prop"==y||"npc"==y&&!x.npc.isDeadOrDying()||"player"==y)&&(v=x.anchorHeight,b=x.anchorHeight+x.realHeight);else{if(v=x.fh,b=x.middleBottomZ,w=x.middleTopZ,S=x.ch,v===b&&w===S)continue;w!==S&&(T=!0)}var M=m(l,u,c,f,g,v,g,b);if(T)var D=m(l,u,c,f,g,w,g,S);if(M.result===!0)return p.coord.z=M.y,p;if(T&&D.result===!0)return p.coord.z=D.y,p}return!1}var q=t.get("maxEntityCollisionDist"),B=q*q,N=t.get("propCollisionRadius"),z=t.get("collisionZeroThreshold"),L=5,j=(t.get("minNum"),t.get("maxNum"),t.get("playerCanPushNpcs"),t.get("maxStepUp")),V=(t.get("playerHeadRoom"),Math.abs),H=Math.sqrt,W=1;return{pointOnSegSide:a,pointPerpendicularDistanceFromLine:n,collidingPointWithRect:r,collidingPointWithCircle:o,intersectsRectWithRect:i,intersectsRectWithRectCoords:s,getIntersectingPortionRectWithRect:l,rectWithinRect:u,intersectsLineWithLine:f,intersectsLineWithLineOptimised:m,intersectsLineWithLineOptimisedCheckOnly:d,intersectsLineWithCircle:h,pointInPolygon:y,pointInPolygon_OddEven:g,lineWithinPolygon:x,sectorWithinSector:w,intersectsSegWithSegs:S,getEntityGeomCollisionResolution:M,getEntityPropCollisionResolution:D,checkCollisionsLinedefs:Y,checkCollisionsSectorFloorCeiling:X,checkCollisionsThings:_,checkCollisionsNpcs:k,checkCollisionsPickups:I,checkCollisionsPickup:R,checkCollisionsNpcNpcs:C,collidingDestructiblesInRadius:P,lineOfSight:A,weaponHitScanPrimary:O,weaponHitScanSecondary:E}}();return a}),define("assets",["enginevars"],function(e){var t=function(){function t(){var e=[];for(var t in d)d.hasOwnProperty(t)&&(d[t].loaded||e.push(t));return e}function a(e,n){var r=d[e];r.img=new Image,r.img.src=r.path,f=e,r.img.onload=function(){l.width=this.width,l.height=this.height,u.drawImage(this,0,0,this.width,this.height),r.pixels=u.getImageData(0,0,this.width,this.height).data,u.fillStyle="rgba(0,0,0,0.0)",u.fillRect(0,0,l.width,l.height),r.loaded=!0;var e=t();e.length>0?a(e[0],n):(c=!0,"function"==typeof n&&n(),console.log("MESSAGE: MOD_AssetLoader: all assets loaded."))}}function n(e){var n=t();a(n[0],e)}function r(e){if("undefined"==typeof e)return d;for(var t in d)if(d.hasOwnProperty(t)&&e==t)return d[t];return console.log('ERROR: MOD_Assets.get : asset "'+e+'" not found.'),null}function o(e){var t=[];for(var a in d)if(d.hasOwnProperty(a)){var n=d[a];n.type===e&&t.push(n)}return t}function i(e){for(var t in d)if(d.hasOwnProperty(t)){var a=d[t];if(a.type===m.geom&&a.atlasId===e)return a}}function s(){var e=0,t=0;for(var a in d)d.hasOwnProperty(a)&&(d[a].loaded&&t++,e++);return t/e}var l=document.createElement("canvas"),u=l.getContext("2d"),c=!1,f="",m={geom:"geom",thing:"thing",hud:"hud",sky:"sky"},d=(e.get("geomTexAtlasSize"),{moodhead:{type:"hud",path:"img/hud/sprites/hud-sheet-v3.png",img:null,loaded:!1,pixels:null,texSizeX:512,texSizeY:512},combatknife:{type:"hud",path:"img/hud/sprites/weapons/knife_sheet_v1.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},combatknife_light:{type:"hud",path:"img/hud/sprites/weapons/knife_sheet_v1_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},combatknife_dark:{type:"hud",path:"img/hud/sprites/weapons/knife_sheet_v1_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},pistol:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},pistol_dark:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},pistol_light:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},plasmapistol:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},plasmapistol_dark:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},plasmapistol_light:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},assaultrifle:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v5.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},assaultrifle_dark:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},assaultrifle_light:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},shotgun:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},shotgun_dark:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},shotgun_light:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},plasmatest:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},plasmatest_dark:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},plasmatest_light:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},nettest:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},nettest_dark:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},nettest_light:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},rockettest:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},rockettest_dark:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_dark.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},rockettest_light:{type:"hud",path:"img/hud/sprites/weapons/pistol_sheet_v6_light.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},weaponfx:{type:"effect",path:"img/hud/sprites/weapons/effects/weaponfx.png",img:null,loaded:!1,pixels:null,texSizeX:512,texSizeY:512},deadtree01:{type:"thing",path:"img/env/sprites/deadtree01.png",img:null,loaded:!1,pixels:null,texSizeX:140,texSizeY:140},deadtree01sheet:{type:"thing",path:"img/env/sprites/deadtree01sheet.png",img:null,loaded:!1,pixels:null,texSizeX:256,texSizeY:256},barrel01:{type:"thing",path:"img/env/sprites/barrel01.png",img:null,loaded:!1,pixels:null,texSizeX:32,texSizeY:32},stalactite01:{type:"thing",path:"img/env/sprites/stalactite01b.png",img:null,loaded:!1,pixels:null,texSizeX:32,texSizeY:32},monster01:{type:"thing",path:"img/env/sprites/trooper-02.png",img:null,loaded:!1,pixels:null,texSizeX:2048,texSizeY:2048},telepath:{type:"thing",path:"img/env/sprites/telepath_sheet_v5.png",img:null,loaded:!1,pixels:null,texSizeX:1024,texSizeY:1024},"placeholder-npc-sheet":{type:"thing",path:"img/env/sprites/placeholder-npc-sheet.png",img:null,loaded:!1,pixels:null,texSizeX:512,texSizeY:512},"props-ph-sheet":{type:"thing",path:"img/env/sprites/props/props_ph_sheet_01.png",img:null,loaded:!1,pixels:null,texSizeX:512,texSizeY:512},"ammo-pistol":{type:"thing",path:"img/env/sprites/pickups/ammo-pistol.png",img:null,loaded:!1,pixels:null,texSizeX:16,texSizeY:16},"weapon-pickups":{type:"thing",path:"img/env/sprites/pickups/weapon-pickups.png",img:null,loaded:!1,pixels:null,texSizeX:512,texSizeY:512},atlas0:{type:"geom",atlasId:"0",path:"img/env/geom/atlas0.png",img:null,loaded:!1,pixels:null,texSizeX:2048,texSizeY:2048,texRefs:{wolf_door_silver:"0",wolf_bricks_blue:"1",wolf_bricks_red:"2",wolf_bricks_grey:"3",wolf_panel_wood:"4",doom_panel_marble:"5",doom_switch_earth_on:"6",hyb_paving_stone:"7",hyb_dev:"8",atlastest:"9",atlastest2:"10",water64:"11",window64:"12"},texCoords:{0:{x:2,y:2,w:128,h:128},1:{x:132,y:2,w:128,h:128},2:{x:262,y:2,w:128,h:128},3:{x:392,y:2,w:128,h:128},4:{x:522,y:2,w:128,h:128},5:{x:652,y:2,w:128,h:128},6:{x:782,y:2,w:128,h:128},7:{x:912,y:2,w:128,h:128},8:{x:1042,y:2,w:128,h:128},9:{x:2,y:132,w:128,h:128},10:{x:132,y:132,w:128,h:128},11:{x:262,y:132,w:64,h:64},12:{x:262,y:198,w:64,h:64}}},atlas1:{type:"thing",atlasId:"1",path:"img/env/thing/atlas1.png",img:null,loaded:!1,pixels:null,texSizeX:2048,texSizeY:2048,texRefs:{barrel01:"0"},texCoords:{0:{x:0,y:0,w:2048,h:2048}}},editoratlas0:{type:"thing",atlasId:"1",path:"img/env/thing/editoratlas0.png",img:null,loaded:!1,pixels:null,texSizeX:2048,texSizeY:2048,texRefs:{barrel01:"0"},texCoords:{0:{x:0,y:0,w:2048,h:2048}}},skyred:{type:"sky",texRef:"skyred",path:"img/env/sky-red.png",img:null,loaded:!1,pixels:null,texSizeX:2048,texSizeY:256},space:{type:"sky",texRef:"space",path:"img/env/sky-space.png",img:null,loaded:!1,pixels:null,texSizeX:2048,
texSizeY:256}});return{init:n,get:r,getAllOfType:o,getAllLoaded:function(){return c},getFracLoaded:s,getLoadingAssetName:function(){return f},getTypes:function(){return m},getAtlasById:i}}();return t}),define("sprite",["enginevars","time","vector2"],function(e,t,a){var n=function(){function e(e,n){var o={alive:!0,assetName:e.assetName,sheetTex:e.sheetTex,hasOrientations:e.hasOrientations,frameCoords:e.frameCoords,sourceScale:e.sourceScale,glScale:e.glScale,frameSequences:e.frameSequences,frameElapsed:0,sequenceElapsed:0,currentSequence:0,nextSequence:0,currentFrame:0,sequenceInProgress:!1,parentThing:n,isFullBright:!1};for(var i in o.frameSequences)if(o.frameSequences.hasOwnProperty(i)){for(var s=0,l=0;l<o.frameSequences[i].frames.length;l++)s+=o.frameSequences[i].frames[l].duration;o.frameSequences[i].duration=s}for(var u=o.frameSequences,c=u.length,f=0;c>f;f++){for(var s=0,m=o.frameSequences[i],d=m.frames,l=0;l<d.length;l++)s+=d[l].duration;m.duration=s}return o.update=function(e){if(o.alive!==!1){var a=t.getDeltaTime(),n=o.frameSequences[o.currentSequence],i=o.frameSequences[o.currentSequence].frames,s=i[o.currentFrame];o.sequenceElapsed+=a,o.frameElapsed<s.duration?(o.frameElapsed+=a,o.sequenceInProgress=!0):(o.currentFrame<i.length-1?o.currentFrame++:n.loop?(o.currentFrame=0,o.sequenceInProgress=!0):o.sequenceInProgress=!1,o.isFullBright=s.fullBright,o.frameElapsed=0),r=e}},o.getCurrentFrame=function(){var e,t=o.frameSequences[o.currentSequence].frames[o.currentFrame];if("-1"===t.frame)return null;if(o.isFullBright=t.fullBright,o.hasOrientations){var n=o.parentThing,i=o.parentThing.p,s={x:i.x-r.x,y:i.y-r.y},l=a.signedAngleBetweenVectors(s,n.fwd),u="notset";switch(!0){case-157.5>=l||l>157.5:u="north";break;case-112.5>=l&&l>-157.5:u="northwest";break;case-67.5>=l&&l>-112.5:u="west";break;case-22.5>=l&&l>-67.5:u="southwest";break;case 22.5>=l&&l>-22.5:u="south";break;case 67.5>=l&&l>22.5:u="southeast";break;case 112.5>=l&&l>67.5:u="east";break;case 157.5>=l&&l>112.5:u="northeast";break;default:u="north"}e=o.frameCoords.orientation[u].frames[t.frame]}else e=o.frameCoords[t.frame];return{sheetTex:o.sheetTex,frameCoords:e,offset:t.offset,isFullBright:o.isFullBright}},o.switchSequence=function(e){var t=0,a=!1;for(var n in o.frameSequences)o.frameSequences[n].name==e&&(o.nextSequence=t,a=!0),t++;return a===!1?void console.log('ERROR: MOD_Sprite.switchSequence : seqName "'+e+'" not found.'):void o.beginNextSequence()},o.beginNextSequence=function(){o.currentSequence=o.nextSequence,o.currentFrame=0,o.sequenceInProgress=!0,o.sequenceElapsed=0},o.getCurrentSequenceDuration=function(){return o.frameSequences[o.currentSequence].duration},o.currentSequenceFinished=function(){return o.sequenceElapsed>=o.frameSequences[o.currentSequence].duration},o.kill=function(){o.alive=!1},o}var n=document.createElement("canvas"),r=(n.getContext("2d"),{x:0,y:0});return{sprite:e}}();return n}),define("effects",["enginevars","time","assets","sprite","collision"],function(e,t,a,n,r){var o=function(){function e(e,o,s,l,u){var c={effectType:e.effectType,p:{x:o.x,y:o.y,z:o.z},duration:"undefined"!=typeof s?s:e.duration,age:0,ll:1,hasAttachedParent:"undefined"!=typeof l,followAxes:e.followAxes,attachmentOffset:u,renderData:{},renderDataSet:!1,parentSector:null,hasUpdated:!1,impactActionClientTypes:e.impactActionClientTypes};c.hasAttachedParent&&(c.attachedParent=l,c.attachedParentGUID=l.g,c.p.x+=u.x,c.p.y+=u.y,c.p.z+=u.z);var f=e.spriteInfo;return f.sheetTex=a.get(e.effectSourceAsset),c.sprite=n.sprite(f,c),c.getSectorProps=function(e){c.parentSector=null;for(var t=e.length,a=0;t>a;a++){var n=e[a];r.pointInPolygon(c.p,n.l,n.b)&&(null!=c.parentSector?r.sectorWithinSector(n,c.parentSector)&&(c.parentSector=n,c.ll=n.ll):(c.parentSector=n,c.ll=n.ll))}},c.destroy=function(){c.age=c.duration+1},c.update=function(e,a){c.hasUpdated=!0;var n=t.getDeltaTime();if(c.age+=n,c.getSectorProps(a),c.sprite.update(e),c.hasAttachedParent){var r=c.attachedParent.getPos(),o=c.followAxes,i=c.p,s=c.attachmentOffset;o.x&&(i.x=r.x+s.x),o.y&&(i.y=r.y+s.y),o.z&&(i.z=r.z+s.z)}},i.push(c),c}function o(e,t){for(var a=[],n=i.length,r=0;n>r;r++){var o=i[r];o.update(e,t.s),o.age>o.duration&&a.push(r)}for(var s=0;s<a.length;s++)i.splice(a[s],1)}var i=[];return{effect:e,update:o,get:function(){return i}}}();return o}),define("effectdefs",["enginevars"],function(e){var t=function(){function e(e){return"undefined"==typeof e?t:t.hasOwnProperty(e)?t[e]:void t.bullethit_smoke}var t={bullethit_smoke:{effectType:"bullethit_smoke",effectSourceAsset:"weaponfx",duration:24,followAxes:{x:!0,y:!0,z:!0},sounds:["bullethitsmoke1"],impactActionClientTypes:[],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.75,hasOrientations:!1,frameCoords:{bullethit_smoke_0:{x:2,y:2,w:3,h:3},bullethit_smoke_1:{x:9,y:2,w:5,h:5},bullethit_smoke_2:{x:16,y:2,w:12,h:12},bullethit_smoke_3:{x:30,y:2,w:15,h:15},bullethit_smoke_4:{x:47,y:2,w:16,h:19},bullethit_smoke_5:{x:65,y:2,w:17,h:20}},frameSequences:[{name:"bullethit_smoke",loop:!1,frames:[{frame:"bullethit_smoke_0",duration:2,fullBright:!0,offset:0},{frame:"bullethit_smoke_1",duration:2,fullBright:!0,offset:0},{frame:"bullethit_smoke_2",duration:4,fullBright:!0,offset:0},{frame:"bullethit_smoke_3",duration:4,fullBright:!0,offset:0},{frame:"bullethit_smoke_4",duration:5,fullBright:!0,offset:0},{frame:"bullethit_smoke_5",duration:6,fullBright:!0,offset:0}]}]}},bullethit_redbloodsmall:{effectType:"bullethit_redbloodsmall",effectSourceAsset:"weaponfx",duration:12,followAxes:{x:!0,y:!0,z:!0},impactActionClientTypes:[],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.6,hasOrientations:!1,frameCoords:{bullethit_redbloodsmall_0:{x:254,y:2,w:5,h:6},bullethit_redbloodsmall_1:{x:261,y:2,w:8,h:8},bullethit_redbloodsmall_2:{x:271,y:2,w:12,h:11}},frameSequences:[{name:"bullethit_redbloodsmall",loop:!1,frames:[{frame:"bullethit_redbloodsmall_0",duration:4,fullBright:!1,offset:0},{frame:"bullethit_redbloodsmall_1",duration:4,fullBright:!1,offset:0},{frame:"bullethit_redbloodsmall_2",duration:4,fullBright:!1,offset:0}]}]}},bullethit_redbloodlarge:{effectType:"bullethit_redbloodlarge",effectSourceAsset:"weaponfx",duration:15,followAxes:{x:!0,y:!0,z:!0},impactActionClientTypes:[],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.75,hasOrientations:!1,frameCoords:{bullethit_redbloodlarge_0:{x:84,y:2,w:8,h:9},bullethit_redbloodlarge_1:{x:94,y:2,w:13,h:14},bullethit_redbloodlarge_2:{x:109,y:2,w:15,h:16},bullethit_redbloodlarge_3:{x:126,y:2,w:18,h:19},bullethit_redbloodlarge_4:{x:146,y:2,w:21,h:21}},frameSequences:[{name:"bullethit_redbloodlarge",loop:!1,frames:[{frame:"bullethit_redbloodlarge_0",duration:2,fullBright:!1,offset:0},{frame:"bullethit_redbloodlarge_1",duration:3,fullBright:!1,offset:0},{frame:"bullethit_redbloodlarge_2",duration:3,fullBright:!1,offset:0},{frame:"bullethit_redbloodlarge_3",duration:4,fullBright:!1,offset:0},{frame:"bullethit_redbloodlarge_4",duration:4,fullBright:!1,offset:0}]}]}},bullethit_greenbloodsmall:{effectType:"bullethit_greenbloodsmall",effectSourceAsset:"weaponfx",duration:15,followAxes:{x:!0,y:!0,z:!0},impactActionClientTypes:[],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.75,hasOrientations:!1,frameCoords:{bullethit_greenbloodsmall_0:{x:285,y:2,w:5,h:6},bullethit_greenbloodsmall_1:{x:292,y:2,w:8,h:8},bullethit_greenbloodsmall_2:{x:302,y:2,w:12,h:11}},frameSequences:[{name:"bullethit_greenbloodsmall",loop:!1,frames:[{frame:"bullethit_greenbloodsmall_0",duration:5,fullBright:!1,offset:0},{frame:"bullethit_greenbloodsmall_1",duration:5,fullBright:!1,offset:0},{frame:"bullethit_greenbloodsmall_2",duration:5,fullBright:!1,offset:0}]}]}},bullethit_greenbloodlarge:{effectType:"bullethit_greenbloodlarge",effectSourceAsset:"weaponfx",duration:15,followAxes:{x:!0,y:!0,z:!0},impactActionClientTypes:[],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.75,hasOrientations:!1,frameCoords:{bullethit_greenbloodlarge_0:{x:169,y:2,w:8,h:9},bullethit_greenbloodlarge_1:{x:179,y:2,w:13,h:14},bullethit_greenbloodlarge_2:{x:194,y:2,w:15,h:16},bullethit_greenbloodlarge_3:{x:211,y:2,w:18,h:19},bullethit_greenbloodlarge_4:{x:231,y:2,w:21,h:21}},frameSequences:[{name:"bullethit_greenbloodlarge",loop:!1,frames:[{frame:"bullethit_greenbloodlarge_0",duration:2,fullBright:!1,offset:0},{frame:"bullethit_greenbloodlarge_1",duration:2,fullBright:!1,offset:0},{frame:"bullethit_greenbloodlarge_2",duration:3,fullBright:!1,offset:0},{frame:"bullethit_greenbloodlarge_3",duration:4,fullBright:!1,offset:0},{frame:"bullethit_greenbloodlarge_4",duration:4,fullBright:!1,offset:0}]}]}},fire_flame_1:{effectType:"fire_flame_1",effectSourceAsset:"weaponfx",duration:16,followAxes:{x:!1,y:!1,z:!1},impactActionClientTypes:["fire"],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.75,hasOrientations:!1,frameCoords:{fire_flame_1_0:{x:127,y:25,w:10,h:22},fire_flame_1_1:{x:139,y:25,w:9,h:18},fire_flame_1_2:{x:150,y:25,w:9,h:19},fire_flame_1_3:{x:161,y:25,w:8,h:22}},frameSequences:[{name:"fire_flame_1",loop:!0,frames:[{frame:"fire_flame_1_0",duration:4,fullBright:!0,offset:0},{frame:"fire_flame_1_1",duration:4,fullBright:!0,offset:0},{frame:"fire_flame_1_2",duration:4,fullBright:!0,offset:0},{frame:"fire_flame_1_3",duration:4,fullBright:!0,offset:0}]}]}},fire_flame_2:{effectType:"fire_flame_2",effectSourceAsset:"weaponfx",duration:16,followAxes:{x:!0,y:!0,z:!0},impactActionClientTypes:["fire"],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:.75,glScale:.75,hasOrientations:!1,frameCoords:{fire_flame_2_0:{x:127,y:49,w:23,h:35},fire_flame_2_1:{x:152,y:49,w:23,h:35},fire_flame_2_2:{x:177,y:49,w:23,h:35},fire_flame_2_3:{x:202,y:49,w:23,h:35}},frameSequences:[{name:"fire_flame_1",loop:!0,frames:[{frame:"fire_flame_2_0",duration:2,fullBright:!0,offset:0},{frame:"fire_flame_2_1",duration:2,fullBright:!0,offset:0},{frame:"fire_flame_2_2",duration:2,fullBright:!0,offset:0},{frame:"fire_flame_2_3",duration:2,fullBright:!0,offset:0}]}]}},net:{effectType:"net",effectSourceAsset:"weaponfx",duration:16,followAxes:{x:!0,y:!0,z:!0},impactActionClientTypes:["net"],spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:.75,glScale:.75,hasOrientations:!1,frameCoords:{net_0:{x:291,y:49,w:32,h:27}},frameSequences:[{name:"net_0",loop:!0,frames:[{frame:"net_0",duration:8,fullBright:!0,offset:0}]}]}}};return{get:e}}();return t}),define("impactactions",["enginevars","time","maths","effects","effectdefs"],function(e,t,a,n,r){var o=function(){function e(e,t){var o=t.getValidImpactActionTypes();if(o.hasOwnProperty(e.type)){for(var i=o[e.type],s=t.impactActions,l=s.length,u=0;l>u;u++)if(s[u].params.type==e.type)return;var c={params:{pos:t.getPos(),velocity:t.getVelocity(),type:e.type,duration:a.randomIntInRange(e.minDuration,e.maxDuration),age:0,damage:e.damage*i.damageMult,spread:e.spread,attachToTarget:e.attachToTarget},hasEffect:e.hasEffect,effectType:e.effectType,effectAnchor:e.effectAnchor,effectOffset:e.effectOffset,actionDef:e,subject:t,callback:e.callback,doneCallback:e.doneCallback},f=c.params;return c.hasEffect&&(f.attachToTarget?c.effect=n.effect(r.get(c.effectType),f.pos,f.duration,t,c.effectOffset):c.effect=n.effect(r.get(c.effectType),f.pos,f.duration,void 0,c.effectOffset)),f.damage&&(f.damageInterval=e.damageInterval,f.damageAmount=e.damageAmount,f.damageTimer=0),f.spread&&(f.spreadRadius=e.spreadRadius),c.destroy=function(){c.effect.destroy()},c.kill=function(){c.params.age=c.params.duration+1,c.effect.destroy()},t.impactActions.push(c),c}}function o(e,t){for(var a=0;a<e.length;a++){var n=e[a];n.params.age+=s,n.subject.destructible===!0&&(n.subject.hasOwnProperty("destructibleThing")&&n.subject.destructibleThing.alive===!1||n.subject.isNPC===!0&&n.subject.npc.alive===!1)&&(n.params.age=n.params.duration+1),n.params.age>n.params.duration?(n.doneCallback(n.subject),n.destroy(),e.splice(a,1),a--):n.callback(n.actionDef,n.subject,n.params,t,s)}}function i(e,a){s=t.getDeltaTime(),o(a.impactActions,e);for(var n=e.t,r=n.length,i=0;r>i;i++)o(n[i].impactActions,e)}var s=t.getDeltaTime();return{impactAction:e,update:i}}();return o}),define("impactactiondefs",["enginevars","collision","impactactions"],function(e,t,a){var n=function(){var e={fire:{type:"fire",minDuration:180,maxDuration:240,damage:!0,damageInterval:20,damageAmount:25,spread:!0,spreadRadius:32,isRenderable:!0,hasEffect:!0,effectType:"fire_flame_2",effectAnchor:"middle",effectOffset:{x:0,y:0,z:31},attachToTarget:!0,callback:function(e,n,r,o,i,s){n.setStatusEffect("fire",!0),r.damageTimer>r.damageInterval&&(r.damageTimer=0),0===r.damageTimer&&n.damageByAmount(r.damageAmount),r.damageTimer+=s;for(var l=t.checkCollisionsThings(r.pos,r.velocity,r.spreadRadius,o.t),u=l.length,c=0;u>c;c++){var f=l[c];f!==n&&f.destructible&&a.impactAction(e,f)}},doneCallback:function(e){e.setStatusEffect("fire",!1)}},net:{type:"net",minDuration:240,maxDuration:360,damage:!1,spread:!1,isRenderable:!0,hasEffect:!0,effectType:"net",effectAnchor:"middle",effectOffset:{x:0,y:0,z:-8},attachToTarget:!0,callback:function(e,t,a,n,r,o){t.setStatusEffect("net",!0)},doneCallback:function(e){e.setStatusEffect("net",!1)}}};return{get:function(t){return"undefined"==typeof t?e:e.hasOwnProperty(t)?e[t]:void console.log('ERROR: MOD_ImpactActionDefs.get : action with key "'+t+'" not found.')},getKeys:function(){return Object.keys(e)}}}();return n}),define("projectiledefs",["enginevars","collision","impactactions","impactactiondefs"],function(e,t,a,n){var r=function(){var e={hitscan:"hitscan",projectile:"projectile"},t={force:{name:"force",transmissionType:e.hitscan,impactActions:[]},bullet:{name:"bullet",transmissionType:e.hitscan,impactActions:[]},plasmaball:{name:"plasmaball",transmissionType:e.projectile,spawnFwdOffset:48,impactActions:[n.get("fire")],projectileInfo:{lifeTime:3600,isRenderable:!0,collisionRadius:4,verticalCollisionRadius:2,moveSpeed:30,baseDamage:20,hitOwnerDelay:40,damageReductionFactor:0,projectileSourceAsset:"weaponfx",renderDelay:2,destroyDelay:12,impactOffset:32,spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:1,hasOrientations:!0,frameCoords:{orientation:{north:{frames:{0:{x:316,y:2,w:19,h:16},1:{x:337,y:2,w:20,h:16},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}},northwest:{frames:{0:{x:359,y:2,w:33,h:14},1:{x:394,y:3,w:31,h:13},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}},west:{frames:{0:{x:427,y:3,w:48,h:12},1:{x:316,y:20,w:49,h:12},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}},southwest:{frames:{0:{x:367,y:21,w:31,h:10},1:{x:400,y:21,w:33,h:10},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}},south:{frames:{0:{x:316,y:2,w:19,h:16},1:{x:337,y:2,w:20,h:16},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}},southeast:{frames:{0:{x:435,y:21,w:31,h:10},1:{x:468,y:21,w:33,h:10},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}},east:{frames:{0:{x:316,y:34,w:48,h:12},1:{x:366,y:34,w:49,h:12},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}},northeast:{frames:{0:{x:417,y:34,w:33,h:13},1:{x:452,y:34,w:31,h:13},2:{x:2,y:30,w:33,h:33},3:{x:37,y:28,w:41,h:36},4:{x:80,y:24,w:45,h:40}}}}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:4,fullBright:!0,offset:0},{frame:"1",duration:4,fullBright:!0,offset:0}]},{name:"impact",loop:!1,frames:[{frame:"2",duration:4,fullBright:!0,offset:0},{frame:"3",duration:4,fullBright:!0,offset:0},{frame:"4",duration:4,fullBright:!0,offset:0}]}]}}},net:{name:"net",transmissionType:e.projectile,spawnFwdOffset:72,impactActions:[n.get("net")],projectileInfo:{lifeTime:300,isRenderable:!0,collisionRadius:12,verticalCollisionRadius:1,moveSpeed:10,baseDamage:0,renderDelay:3,damageReductionFactor:0,projectileSourceAsset:"weaponfx",destroyDelay:2,impactOffset:32,spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.1,hasOrientations:!0,frameCoords:{orientation:{north:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}},northwest:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}},west:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}},southwest:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}},south:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}},southeast:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}},east:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}},northeast:{frames:{0:{x:227,y:49,w:30,h:27},1:{x:259,y:49,w:30,h:28},2:{x:291,y:49,w:32,h:27}}}}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:4,fullBright:!1,offset:0},{frame:"1",duration:4,fullBright:!1,offset:0}]},{name:"impact",loop:!1,frames:[{frame:"2",duration:2,fullBright:!1,offset:0}]}]}}},rocket:{name:"rocket",transmissionType:e.projectile,spawnFwdOffset:72,impactActions:[],projectileInfo:{lifeTime:300,isRenderable:!0,collisionRadius:12,verticalCollisionRadius:1,moveSpeed:20,baseDamage:100,renderDelay:3,damageReductionFactor:0,projectileSourceAsset:"weaponfx",destroyDelay:14,impactOffset:32,spriteInfo:{assetName:"weaponfx",sheetTex:null,sourceScale:1,glScale:.5,hasOrientations:!0,frameCoords:{orientation:{north:{frames:{0:{x:325,y:49,w:15,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}},northwest:{frames:{0:{x:325,y:65,w:32,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}},west:{frames:{0:{x:359,y:65,w:49,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}},southwest:{frames:{0:{x:410,y:65,w:26,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}},south:{frames:{0:{x:455,y:49,w:15,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}},southeast:{frames:{0:{x:427,y:49,w:26,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}},east:{frames:{0:{x:376,y:49,w:49,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}},northeast:{frames:{0:{x:342,y:49,w:32,h:14},1:{x:2,y:86,w:15,h:15},2:{x:19,y:86,w:37,h:35},3:{x:58,y:86,w:43,h:39},4:{x:103,y:86,w:50,h:44}}}}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:4,fullBright:!1,offset:0}]},{name:"impact",loop:!1,frames:[{frame:"1",duration:2,fullBright:!1,offset:0},{frame:"2",duration:3,fullBright:!1,offset:0},{frame:"3",duration:4,fullBright:!1,offset:0},{frame:"4",duration:5,fullBright:!1,offset:0}]}]}}}};return{get:function(){return t},getTransmissionTypes:function(){return e}}}();return r}),define("ammodefs",["enginevars"],function(e){var t=function(){function e(e){return"undefined"==typeof e?t:t.hasOwnProperty(e)?t[e]:void t.none}var t={none:{descriptionText:"",capacity:-1},bulletsmall:{descriptionText:"6.5mm AP Round",capacity:150},shotgunshell:{descriptionText:"shotgun shell",capacity:150},plasmacell:{descriptionText:"plasma cell",capacity:8},netseed:{descriptionText:"net seed",capacity:16},rocketsmall:{descriptionText:"rocket",capacity:36}};return{get:e}}();return t}),define("weapondefs",["enginevars","projectiledefs","ammodefs"],function(e,t,a){var n=function(){var n=(e.get("canvasSize"),t.get()),r=t.getTransmissionTypes(),o=a.get(),i={combatknife:{type:"combatknife",crossHairType:"basic",ranged:!1,projectileDef:n.force,playerCanOwn:!0,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",notificationText:"A COMBAT KNIFE",audioInfo:{sounds:{fire:{guid:"swish1",range:128}}},ammoDef:o.none,ammo:{finite:-1!==o.none.capacity,capacity:{mag:1,refillAmount:1,total:1}},defaultContainedAmmo:1,damage:20,minDamage:20,range:72,autoMode:1,rateOfFire:11,burstLength:{min:1,max:1},projectilesPerRound:1,hudCoords:{x:0,y:0},spriteInfo:{sheetTex:null,glScale:4,hasOrientations:!1,frameCoords:{0:{x:2,y:2,w:250,h:98},1:{x:254,y:2,w:253,h:134},2:{x:509,y:2,w:247,h:118},3:{x:758,y:2,w:231,h:139},4:{x:2,y:143,w:190,h:146}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"2",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"0",duration:1},{frame:"4",duration:1},{frame:"3",duration:1},{frame:"1",duration:2},{frame:"0",duration:1}]}]}},pistol:{type:"pistol",crossHairType:"basic",ranged:!0,projectileDef:n.bullet,playerCanOwn:!0,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",notificationText:"A PISTOL",ammoNotificationText:"PISTOL ROUNDS",inventoryInfo:{selected:!1,equipped:!1,equipSlotIdx:-1,itemName:"Mk2 Pistol",weight:1.5,imgPath:"/hud/items/pistol.png",descriptionText:"The standard issue sidearm of EPOC troopers, the Mk2 pistol fires a hard-hitting 6.5mm round. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",stats:["<tr><td>Ammo</td><td>6.5mm AP</td></tr>","<tr><td>Capacity (mag)</td><td>15</td></tr>","<tr><td>Capacity (carry)</td><td>150</td></tr>"]},audioInfo:{sounds:{fire:{guid:"pistolshot2",range:2048},reloadingin:{guid:"magslideout",range:256},reloadingmag:{guid:"magslidein",range:128},reloadingout:{guid:"slidefwd",range:256}}},ammoDef:o.bulletsmall,ammo:{finite:-1!==o.bulletsmall.capacity,capacity:{mag:15,refillAmount:15,total:45}},defaultContainedAmmo:15,damage:12,minDamage:3,range:1024,autoMode:1,rateOfFire:4,burstLength:{min:1,max:1},projectilesPerRound:1,pairedMeleeWeapon:"combatknife",hudCoords:{x:400,y:16},spriteInfo:{sheetTex:null,glScale:4.5,hasOrientations:!1,frameCoords:{0:{x:2,y:2,w:137,h:125},1:{x:141,y:2,w:151,h:128},2:{x:294,y:2,w:163,h:130},3:{x:459,y:2,w:151,h:128},4:{x:612,y:2,w:137,h:125},5:{x:751,y:2,w:137,h:125},6:{x:890,y:2,w:102,h:129},7:{x:2,y:134,w:102,h:129},8:{x:106,y:134,w:102,h:129},9:{x:210,y:134,w:122,h:129},10:{x:334,y:135,w:120,h:129},11:{x:457,y:135,w:116,h:129}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:60}]},{name:"out",loop:!0,frames:[{frame:"5",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:1},{frame:"3",duration:1},{frame:"4",duration:1}]},{name:"firinglast",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:1},{frame:"5",duration:60}]},{name:"reloadingin",loop:!1,frames:[{frame:"6",duration:8},{frame:"7",duration:6},{frame:"8",duration:20}]},{name:"reloadingout",loop:!1,frames:[{frame:"5",duration:3},{frame:"0",duration:2}]},{name:"reloadingmag",loop:!1,frames:[{frame:"9",duration:4},{frame:"10",duration:4},{frame:"11",duration:2}]}]}},assaultrifle:{type:"assaultrifle",crossHairType:"basic",ranged:!0,projectileDef:n.bullet,playerCanOwn:!0,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",notificationText:"AN ASSAULT RIFLE",ammoNotificationText:"ASSAULT RIFLE ROUNDS",inventoryInfo:{selected:!1,equipped:!1,equipSlotIdx:-1,itemName:"Assault rifle",weight:3.5,imgPath:"/hud/items/assaultrifle.png",descriptionText:"Text description of the assault rifle. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",stats:["<tr><td>Ammo</td><td>5.4mm AP</td></tr>","<tr><td>Capacity (mag)</td><td>30</td></tr>","<tr><td>Capacity (carry)</td><td>300</td></tr>"]},audioInfo:{sounds:{fire:{guid:"pistolshot1",range:1536},reloadingin:{guid:"magslideoutlg",range:256},reloadingmag:{guid:"magslideinlg",range:128},reloadingout:{guid:"assaultrifleboltfwd",range:256}}},ammoDef:o.bulletsmall,ammo:{finite:-1!==o.bulletsmall.capacity,capacity:{mag:30,refillAmount:30,total:90}},defaultContainedAmmo:30,damage:10,minDamage:3,range:2048,autoMode:2,rateOfFire:4,burstLength:{min:1,max:1},projectilesPerRound:1,pairedMeleeWeapon:"combatknife",hudCoords:{x:400,y:16},spriteInfo:{sheetTex:null,glScale:5,hasOrientations:!1,frameCoords:{7:{x:575,y:132,w:202,h:114},8:{x:779,y:132,w:202,h:125},14:{x:0,y:295,w:202,h:133},15:{x:204,y:295,w:202,h:126}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"7",duration:60}]},{name:"out",loop:!0,frames:[{frame:"7",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"8",duration:1},{frame:"14",duration:1},{frame:"15",duration:1}]},{name:"firinglast",loop:!1,frames:[{frame:"8",duration:1},{frame:"14",duration:1},{frame:"15",duration:1},{frame:"7",duration:60}]},{name:"reloadingin",loop:!1,frames:[{frame:"7",duration:20}]},{name:"reloadingout",loop:!1,frames:[{frame:"7",duration:20}]},{name:"reloadingmag",loop:!1,frames:[{frame:"7",duration:20}]}]}},shotgun:{type:"shotgun",crossHairType:"basic",ranged:!0,projectileDef:n.bullet,playerCanOwn:!0,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",notificationText:"A SHOTGUN",ammoNotificationText:"SHOTGUN SHELLS",inventoryInfo:{selected:!1,equipped:!1,equipSlotIdx:-1,itemName:"12 Gauge Shotgun",weight:3,imgPath:"/hud/items/shotgun.png",descriptionText:"Text description for the 12 gauge shotgun. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",stats:["<tr><td>Ammo</td><td>12 gauge shell</td></tr>","<tr><td>Capacity (mag)</td><td>5</td></tr>","<tr><td>Capacity (carry)</td><td>50</td></tr>"]},audioInfo:{sounds:{fire:{guid:"shotgunfire",range:2048},reloadingin:{guid:"shotguncockback",range:256},reloadingmag:{guid:"shellin",range:128},reloadingout:{guid:"shotguncockfwd",range:256},singlereloading:{guid:"shotguncockbackfwd",range:256}}},ammoDef:o.shotgunshell,ammo:{finite:-1!==o.shotgunshell.capacity,capacity:{mag:6,refillAmount:1,total:18}},defaultContainedAmmo:6,damage:10,minDamage:5,range:1024,autoMode:0,rateOfFire:15,burstLength:{min:1,max:1},projectilesPerRound:8,shotSpreadAngle:.1,pairedMeleeWeapon:"combatknife",hudCoords:{x:600,y:150},spriteInfo:{sheetTex:null,glScale:4.5,hasOrientations:!1,frameCoords:{0:{x:408,y:295,w:200,h:153},1:{x:610,y:295,w:228,h:169},2:{x:840,y:295,w:166,h:199},3:{x:2,y:496,w:130,h:203},4:{x:134,y:496,w:141,h:201},5:{x:277,y:496,w:200,h:168},6:{x:479,y:496,w:200,h:155},7:{x:681,y:496,w:198,h:155},8:{x:2,y:701,w:198,h:154},9:{x:202,y:701,w:197,h:154},10:{x:401,y:701,w:201,h:154},11:{x:806,y:721,w:200,h:133},12:{x:2,y:857,w:200,h:107},13:{x:204,y:857,w:200,h:78}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:60}]},{name:"out",loop:!0,frames:[{frame:"0",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"firinglast",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"singlereloading",loop:!1,frames:[{frame:"6",duration:2},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2},{frame:"0",duration:10}]},{name:"reloadingin",loop:!1,frames:[{frame:"11",duration:10}]},{name:"reloadingout",loop:!1,frames:[{frame:"11",duration:10},{frame:"6",duration:10},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2}]},{name:"reloadingmag",loop:!1,frames:[{frame:"12",duration:10},{frame:"13",duration:5},{frame:"12",duration:10}]}]}},plasmapistol:{type:"plasmapistol",crossHairType:"basic",ranged:!0,projectileDef:n.plasmaball,playerCanOwn:!0,npcsCanOwn:!1,defaultHitEffect:"bullethit_smoke",notificationText:"A PLASMA PISTOL",ammoNotificationText:"PLASMA PISTOL BULLETS",inventoryInfo:{selected:!1,equipped:!1,equipSlotIdx:-1,itemName:"Plasma Pistol",weight:2,imgPath:"/hud/items/pistol.png",descriptionText:"Plasma pistol description text.",stats:["<tr><td>Ammo</td><td>Plasma cell</td></tr>","<tr><td>Capacity (mag)</td><td>15</td></tr>","<tr><td>Capacity (carry)</td><td>150</td></tr>"]},audioInfo:{sounds:{fire:{guid:"pistolshot2",range:2048},reloadingin:{guid:"magslideout",range:256},reloadingmag:{guid:"magslidein",range:128},reloadingout:{guid:"slidefwd",range:256}}},ammoDef:o.plasmacell,ammo:{finite:-1!==o.plasmacell.capacity,capacity:{mag:15,refillAmount:15,total:150}},defaultContainedAmmo:15,damage:12,minDamage:3,range:8192,autoMode:1,rateOfFire:3,burstLength:{min:1,max:1},projectilesPerRound:1,pairedMeleeWeapon:"combatknife",hudCoords:{x:400,y:16},spriteInfo:{sheetTex:null,glScale:4.5,hasOrientations:!1,frameCoords:{0:{x:2,y:2,w:137,h:125},1:{x:141,y:2,w:151,h:128},2:{x:294,y:2,w:163,h:130},3:{x:459,y:2,w:151,h:128},4:{x:612,y:2,w:137,h:125},5:{x:751,y:2,w:137,h:125},6:{x:890,y:2,w:102,h:129},7:{x:2,y:134,w:102,h:129},8:{x:106,y:134,w:102,h:129},9:{x:210,y:134,w:122,h:129},10:{x:334,y:135,w:120,h:129},11:{x:457,y:135,w:116,h:129}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:60}]},{name:"out",loop:!0,frames:[{frame:"5",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:1},{frame:"3",duration:1},{frame:"4",duration:1}]},{name:"firinglast",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:1},{frame:"5",duration:60}]},{name:"reloadingin",loop:!1,frames:[{frame:"6",duration:8},{frame:"7",duration:6},{frame:"8",duration:20}]},{name:"reloadingout",loop:!1,frames:[{frame:"5",duration:3},{frame:"0",duration:2}]},{name:"reloadingmag",loop:!1,frames:[{frame:"9",duration:4},{frame:"10",duration:4},{frame:"11",duration:2}]}]}},plasmatest:{type:"plasmatest",crossHairType:"basic",ranged:!0,projectileDef:n.plasmaball,playerCanOwn:!0,npcsCanOwn:!1,defaultHitEffect:"bullethit_smoke",notificationText:"A PLASMATEST",ammoNotificationText:"PLASMA CELLS",inventoryInfo:{selected:!1,equipped:!1,equipSlotIdx:-1,itemName:"Debug plasma gun",weight:3,imgPath:"/hud/items/shotgun.png",descriptionText:"Text description for the debug plasma gun. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",stats:["<tr><td>Ammo</td><td>Plasma cell</td></tr>","<tr><td>Capacity (mag)</td><td>1</td></tr>","<tr><td>Capacity (carry)</td><td>50</td></tr>"]},audioInfo:{sounds:{fire:{guid:"shotgunfire",range:2048},reloadingin:{guid:"shotguncockback",range:256},reloadingmag:{guid:"shellin",range:128},reloadingout:{guid:"shotguncockfwd",range:256},singlereloading:{guid:"shotguncockbackfwd",range:256}}},ammoDef:o.plasmacell,ammo:{finite:-1!==o.plasmacell.capacity,capacity:{mag:1,refillAmount:1,total:50}},defaultContainedAmmo:1,damage:10,minDamage:10,range:2048,reloadTime:15,autoMode:0,rateOfFire:15,burstLength:{min:1,max:1},projectilesPerRound:1,shotSpreadAngle:0,pairedMeleeWeapon:"combatknife",
hudCoords:{x:600,y:150},spriteInfo:{sheetTex:null,glScale:4.5,hasOrientations:!1,frameCoords:{0:{x:408,y:295,w:200,h:153},1:{x:610,y:295,w:228,h:169},2:{x:840,y:295,w:166,h:199},3:{x:2,y:496,w:130,h:203},4:{x:134,y:496,w:141,h:201},5:{x:277,y:496,w:200,h:168},6:{x:479,y:496,w:200,h:155},7:{x:681,y:496,w:198,h:155},8:{x:2,y:701,w:198,h:154},9:{x:202,y:701,w:197,h:154},10:{x:401,y:701,w:201,h:154},11:{x:806,y:721,w:200,h:133},12:{x:2,y:857,w:200,h:107},13:{x:204,y:857,w:200,h:78}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:60}]},{name:"out",loop:!0,frames:[{frame:"0",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"firinglast",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"singlereloading",loop:!1,frames:[{frame:"6",duration:2},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2},{frame:"0",duration:10}]},{name:"reloadingin",loop:!1,frames:[{frame:"11",duration:10}]},{name:"reloadingout",loop:!1,frames:[{frame:"11",duration:10},{frame:"6",duration:10},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2}]},{name:"reloadingmag",loop:!1,frames:[{frame:"12",duration:10},{frame:"13",duration:5},{frame:"12",duration:10}]}]}},nettest:{type:"nettest",crossHairType:"basic",ranged:!0,projectileDef:n.net,playerCanOwn:!0,npcsCanOwn:!1,defaultHitEffect:"bullethit_smoke",notificationText:"A NETGUNTEST",ammoNotificationText:"NETGUN CARTRIDGES",inventoryInfo:{selected:!1,equipped:!1,equipSlotIdx:-1,itemName:"Debug net gun",weight:3,imgPath:"/hud/items/shotgun.png",descriptionText:"Text description for the debug net gun. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",stats:["<tr><td>Ammo</td><td>Plasma cell</td></tr>","<tr><td>Capacity (mag)</td><td>1</td></tr>","<tr><td>Capacity (carry)</td><td>50</td></tr>"]},audioInfo:{sounds:{fire:{guid:"shotgunfire",range:2048},reloadingin:{guid:"shotguncockback",range:256},reloadingmag:{guid:"shellin",range:128},reloadingout:{guid:"shotguncockfwd",range:256},singlereloading:{guid:"shotguncockbackfwd",range:256}}},ammoDef:o.netseed,ammo:{finite:-1!==o.netseed.capacity,capacity:{mag:1,refillAmount:1,total:50}},defaultContainedAmmo:1,damage:0,minDamage:0,range:512,reloadTime:15,autoMode:0,rateOfFire:15,burstLength:{min:1,max:1},projectilesPerRound:1,shotSpreadAngle:0,pairedMeleeWeapon:"combatknife",hudCoords:{x:600,y:150},spriteInfo:{sheetTex:null,glScale:4.5,hasOrientations:!1,frameCoords:{0:{x:408,y:295,w:200,h:153},1:{x:610,y:295,w:228,h:169},2:{x:840,y:295,w:166,h:199},3:{x:2,y:496,w:130,h:203},4:{x:134,y:496,w:141,h:201},5:{x:277,y:496,w:200,h:168},6:{x:479,y:496,w:200,h:155},7:{x:681,y:496,w:198,h:155},8:{x:2,y:701,w:198,h:154},9:{x:202,y:701,w:197,h:154},10:{x:401,y:701,w:201,h:154},11:{x:806,y:721,w:200,h:133},12:{x:2,y:857,w:200,h:107},13:{x:204,y:857,w:200,h:78}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:60}]},{name:"out",loop:!0,frames:[{frame:"0",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"firinglast",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"singlereloading",loop:!1,frames:[{frame:"6",duration:2},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2},{frame:"0",duration:10}]},{name:"reloadingin",loop:!1,frames:[{frame:"11",duration:10}]},{name:"reloadingout",loop:!1,frames:[{frame:"11",duration:10},{frame:"6",duration:10},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2}]},{name:"reloadingmag",loop:!1,frames:[{frame:"12",duration:10},{frame:"13",duration:5},{frame:"12",duration:10}]}]}},rockettest:{type:"rockettest",crossHairType:"basic",ranged:!0,projectileDef:n.rocket,playerCanOwn:!0,npcsCanOwn:!1,defaultHitEffect:"bullethit_smoke",notificationText:"A ROCKETTEST",ammoNotificationText:"ROCKETS",inventoryInfo:{selected:!1,equipped:!1,equipSlotIdx:-1,itemName:"Debug rocket gun",weight:10,imgPath:"/hud/items/shotgun.png",descriptionText:"Text description for the debug rocket gun. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",stats:["<tr><td>Ammo</td><td>Plasma cell</td></tr>","<tr><td>Capacity (mag)</td><td>1</td></tr>","<tr><td>Capacity (carry)</td><td>50</td></tr>"]},audioInfo:{sounds:{fire:{guid:"shotgunfire",range:2048},reloadingin:{guid:"shotguncockback",range:256},reloadingmag:{guid:"shellin",range:128},reloadingout:{guid:"shotguncockfwd",range:256},singlereloading:{guid:"shotguncockbackfwd",range:256}}},ammo:{finite:!0,type:"bullet",capacity:{mag:1,refillAmount:1,total:50}},defaultContainedAmmo:1,damage:0,minDamage:0,range:512,reloadTime:15,autoMode:0,rateOfFire:15,burstLength:{min:1,max:1},projectilesPerRound:1,shotSpreadAngle:0,pairedMeleeWeapon:"combatknife",hudCoords:{x:600,y:150},spriteInfo:{sheetTex:null,glScale:4.5,hasOrientations:!1,frameCoords:{0:{x:408,y:295,w:200,h:153},1:{x:610,y:295,w:228,h:169},2:{x:840,y:295,w:166,h:199},3:{x:2,y:496,w:130,h:203},4:{x:134,y:496,w:141,h:201},5:{x:277,y:496,w:200,h:168},6:{x:479,y:496,w:200,h:155},7:{x:681,y:496,w:198,h:155},8:{x:2,y:701,w:198,h:154},9:{x:202,y:701,w:197,h:154},10:{x:401,y:701,w:201,h:154},11:{x:806,y:721,w:200,h:133},12:{x:2,y:857,w:200,h:107},13:{x:204,y:857,w:200,h:78}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:60}]},{name:"out",loop:!0,frames:[{frame:"0",duration:60}]},{name:"firing",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"firinglast",loop:!1,frames:[{frame:"1",duration:1},{frame:"2",duration:2},{frame:"3",duration:2},{frame:"4",duration:2},{frame:"5",duration:3},{frame:"0",duration:4}]},{name:"singlereloading",loop:!1,frames:[{frame:"6",duration:2},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2},{frame:"0",duration:10}]},{name:"reloadingin",loop:!1,frames:[{frame:"11",duration:10}]},{name:"reloadingout",loop:!1,frames:[{frame:"11",duration:10},{frame:"6",duration:10},{frame:"7",duration:2},{frame:"8",duration:2},{frame:"9",duration:2},{frame:"10",duration:2}]},{name:"reloadingmag",loop:!1,frames:[{frame:"12",duration:10},{frame:"13",duration:5},{frame:"12",duration:10}]}]}},npcmindray:{type:"npcmindray",projectileDef:n.force,playerCanOwn:!1,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",notificationText:"TELEKINETIC POWERS",ammoNotificationText:"TELEKINESIS CHARGE",audioInfo:{sounds:{fire:{guid:"pistolshot1",range:512}}},ammo:{finite:!1,capacity:{mag:1,total:1}},defaultContainedAmmo:1,damage:20,minDamage:15,range:1024,reloadTime:1,autoMode:1,rateOfFire:10,burstLength:{min:1,max:1}},npcpistol:{type:"npcpistol",projectileDef:n.bullet,playerCanOwn:!1,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",audioInfo:{sounds:{fire:{guid:"pistolshot1",range:2048}}},ammo:{finite:!1,capacity:{mag:15,total:1}},damage:10,minDamage:3,range:1024,reloadTime:1,autoMode:1,rateOfFire:14,burstLength:{min:1,max:3}},npcshotgun:{type:"npcshotgun",projectileDef:n.bullet,playerCanOwn:!1,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",audioInfo:{sounds:{fire:{guid:"pistolshot1",range:2048}}},ammo:{finite:!1,capacity:{mag:8,total:1}},damage:25,minDamage:3,range:512,reloadTime:1,autoMode:1,rateOfFire:30,burstLength:{min:1,max:1}},npcassaultrifle:{type:"npcassaultrifle",projectileDef:n.bullet,playerCanOwn:!1,npcsCanOwn:!0,defaultHitEffect:"bullethit_smoke",audioInfo:{sounds:{fire:{guid:"pistolshot1",range:2048}}},ammo:{finite:!1,capacity:{mag:30,total:1}},damage:5,minDamage:1,range:1024,reloadTime:1,autoMode:2,rateOfFire:5,burstLength:{min:3,max:6}}};return{get:function(){return i},getTransmissionTypes:function(){return r}}}();return n}),define("projectiles",["projectiledefs","assets","sprite","time","collision","impactactions"],function(e,t,a,n,r,o){var i=function(){function e(e,i,l,u,c,f,m,d,h){var p={t:e,p:{x:u,y:c,z:f},nextPos:{x:u,y:c,z:f},velocity:{x:0,y:0,z:0},normVelocity:{x:0,y:0,z:0},fwd:m,isRenderable:i.isRenderable,lifeTime:i.lifeTime,age:0,renderDelay:i.renderDelay,destroyed:!1,destroyedTime:0,destroyDelay:i.destroyDelay,collisionRadius:i.collisionRadius,verticalCollisionRadius:i.verticalCollisionRadius,collisionDiameter:2*i.collisionRadius,moveSpeed:i.moveSpeed,baseDamage:i.baseDamage,realDamage:i.baseDamage,damageReductionFactor:i.damageReductionFactor,parentSector:null,ll:1,impactActions:l,renderData:{},renderDataSet:!1,shouldRender:!1,sourceThing:d,hitOwnerDelay:i.hitOwnerDelay,impactOffset:"undefined"!=typeof h?h:i.impactOffset},y=p.fwd,x=p.moveSpeed;p.velocity.x=y.x*x,p.velocity.y=y.y*x,p.velocity.z=y.z*x;var g=i.spriteInfo;g.sheetTex=t.get(i.projectileSourceAsset),p.sprite=a.sprite(g,p),p.getSectorProps=function(e){p.parentSector=null;for(var t=0;t<e.length;t++){var a=e[t];r.pointInPolygon(p.p,a.l,a.b)&&(null!=p.parentSector?r.sectorWithinSector(a,p.parentSector)&&(p.parentSector=a,p.ll=a.ll):(p.parentSector=a,p.ll=a.ll))}},p.impact=function(e,t){p.sprite.switchSequence("impact"),p.destroyed=!0},p.checkForCollisions=function(e){var t=r.checkCollisionsThings(p.p,p.velocity,p.collisionRadius,e.t,!0),a=t.length;if(a>0){var n=p.age>p.hitOwnerDelay,i=t[0],s=99999;if(a>0){for(var l=0;a>l;l++){var u=t[l],c=u.p.x-p.p.x,f=u.p.y-p.p.y,m=Math.sqrt(c*c+f*f);if(s>m&&(i=u,s=m),n||u!==p.sourceThing){u.projectileHit(p.realDamage,p.fwd.x,p.fwd.y);for(var d=p.impactActions,h=d.length,y=0;h>y;y++){var x=d[y];o.impactAction(x,u)}}}var g=(s-(i.colRad+1))/s;return p.velocity.x*=g,p.velocity.y*=g,void p.impact()}}var v=p.verticalCollisionRadius,b=p.parentSector,w=p.nextPos;null!=b&&(w.z+v>b.ch||w.z-v<b.fh)&&p.impact();var S=r.checkCollisionsLinedefs(p.p,w,p.velocity,p.collisionRadius,2*p.verticalCollisionRadius,!0,!1,e.s,!0);if(S.length>0){var T=S[0],M=99999,D=S.length;for(cg=0;cg<D;cg++){var Y=S[cg],X=Y.intersectPoints[0].x-p.p.x,_=Y.intersectPoints[0].y-p.p.y,k=Math.sqrt(X*X+_*_);M>k&&(T=Y,M=k)}var I=r.intersectsLineWithLine(p.p.x,p.p.y,p.nextPos.x,p.nextPos.y,T.wall.sp.x,T.wall.sp.y,T.wall.ep.x,T.wall.ep.y,!0,!0);if(I.result===!0){var R=I.intersect.x-p.p.x,C=I.intersect.y-p.p.y;p.velocity.x=0,p.velocity.y=0,p.p.x+=R-p.normVelocity.x*p.impactOffset,p.p.y+=C-p.normVelocity.y*p.impactOffset}return void p.impact()}},p.update=function(e,t){var a=n.getDeltaTime();if(p.destroyed)p.destroyedTime+=a;else{var r=p.p,o=p.nextPos,i=p.fwd,s=p.velocity,l=p.normVelocity,u=p.moveSpeed*a;r.x=o.x,r.y=o.y,r.z=o.z,s.x=i.x*u,s.y=i.y*u,s.z=i.z*u;var c=Math.sqrt(p.velocity.x*p.velocity.x+p.velocity.y*p.velocity.y+p.velocity.z*p.velocity.z);l.x=s.x/c,l.y=s.y/c,l.z=s.z/c,o.x=r.x+s.x,o.y=r.y+s.y,o.z=r.z+s.z,p.age+=a,p.realDamage=p.baseDamage*(1-p.age/p.lifeTime*p.damageReductionFactor),p.shouldRender=p.age>=p.renderDelay,p.checkForCollisions(t)}p.getSectorProps(t.s),p.sprite.update(e)},s.push(p)}function i(e,t){for(var a=[],n=s.length,r=0;n>r;r++){var o=s[r];o.update(e,t),(o.age>o.lifeTime||o.destroyed&&o.destroyedTime>o.destroyDelay)&&a.push(r)}for(var i=0;i<a.length;i++)s.splice(a[i],1)}var s=[];return{update:i,projectile:e,get:function(){return s}}}();return i}),define("audioassets",["enginevars"],function(e){var t=function(){var e={musictest01:{guid:"musictest01",path:"audio/music/schemingweasel_loop1.m4a",type:"music",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},musiclevel1:{guid:"musiclevel1",path:"audio/music/zdot_north_west_instrumental.mp3",type:"music",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.35,playing:!1},menuopen:{guid:"menuopen",path:"audio/sfx/menuopen.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},menuclose:{guid:"menuclose",path:"audio/sfx/menuclose.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},menuselect:{guid:"menuselect",path:"audio/sfx/menuselect.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},menuaction:{guid:"menuaction",path:"audio/sfx/menuaction.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},ammoget:{guid:"ammoget",path:"audio/sfx/ammoget.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},assaultrifleboltfwd:{guid:"assaultrifleboltfwd",path:"audio/sfx/assaultrifleboltfwd.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},explodebarrel:{guid:"explodebarrel",path:"audio/sfx/explodebarrel.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},fire:{guid:"fire",path:"audio/sfx/fire.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},footstephi:{guid:"footstephi",path:"audio/sfx/footstephi.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},footsteplo:{guid:"footsteplo",path:"audio/sfx/footsteplo.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},grunt1:{guid:"grunt1",path:"audio/sfx/grunt1.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},grunt2:{guid:"grunt2",path:"audio/sfx/grunt2.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},grunt3:{guid:"grunt3",path:"audio/sfx/grunt3.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},grunt4:{guid:"grunt4",path:"audio/sfx/grunt4.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},trooperhurt1:{guid:"trooperhurt1",path:"audio/sfx/trooperhurt1.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},trooperhurt2:{guid:"trooperhurt2",path:"audio/sfx/trooperhurt2.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},getsmokegrunt1:{guid:"getsmokegrunt1",path:"audio/sfx/getsmokegrunt1.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},magslidein:{guid:"magslidein",path:"audio/sfx/magslidein.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},magslideinlg:{guid:"magslideinlg",path:"audio/sfx/magslideinlg.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},magslideout:{guid:"magslideout",path:"audio/sfx/magslideout.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.9,playing:!1},magslideoutlg:{guid:"magslideoutlg",path:"audio/sfx/magslideoutlg.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},pickupfail:{guid:"pickupfail",path:"audio/sfx/pickupfail.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.75,playing:!1},pistolshot1:{guid:"pistolshot1",path:"audio/sfx/pistolshot1.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.4,playing:!1},pistolshot2:{guid:"pistolshot2",path:"audio/sfx/pistolshot2.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},plasmashot:{guid:"plasmashot",path:"audio/sfx/plasmashot.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},shellin:{guid:"shellin",path:"audio/sfx/shellin.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},shotguncockback:{guid:"shotguncockback",path:"audio/sfx/shotguncockback.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},shotguncockbackfwd:{guid:"shotguncockbackfwd",path:"audio/sfx/shotguncockbackfwd.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},shotguncockfwd:{guid:"shotguncockfwd",path:"audio/sfx/shotguncockfwd.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},shotgunfire:{guid:"shotgunfire",path:"audio/sfx/shotgunfire.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},slidefwd:{guid:"slidefwd",path:"audio/sfx/slidefwd.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:.5,playing:!1},swish1:{guid:"swish1",path:"audio/sfx/swish1.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},bullethitnpc:{guid:"bullethitnpc",path:"audio/sfx/bullethitnpc.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},waterloop1:{guid:"waterloop1",path:"audio/sfx/waterloop1.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_ice_a:{guid:"footstep_ice_a",path:"audio/sfx/footstep_ice_a.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_ice_b:{guid:"footstep_ice_b",path:"audio/sfx/footstep_ice_b.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_ice_c:{guid:"footstep_ice_c",path:"audio/sfx/footstep_ice_c.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_leaves_a:{guid:"footstep_leaves_a",path:"audio/sfx/footstep_leaves_a.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_leaves_b:{guid:"footstep_leaves_b",path:"audio/sfx/footstep_leaves_b.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_leaves_c:{guid:"footstep_leaves_c",path:"audio/sfx/footstep_leaves_c.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_stone_a:{guid:"footstep_stone_a",path:"audio/sfx/footstep_stone_a.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_stone_b:{guid:"footstep_stone_b",path:"audio/sfx/footstep_stone_b.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_stone_c:{guid:"footstep_stone_c",path:"audio/sfx/footstep_stone_c.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_water_a:{guid:"footstep_water_a",path:"audio/sfx/footstep_water_a.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_water_b:{guid:"footstep_water_b",path:"audio/sfx/footstep_water_b.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1},footstep_water_c:{guid:"footstep_water_c",path:"audio/sfx/footstep_water_c.m4a",type:"sound",loaded:!1,rawBuffer:null,buffer:null,baseVolume:1,playing:!1}};return{get:function(){return e}}}();return t}),define("audio",["enginevars","audioassets","vector2"],function(e,t,a){var n=function(){function n(e){var t=new XMLHttpRequest;t.open("GET",e.path,!0),t.responseType="arraybuffer",t.asset=e,t.onload=function(){h.decodeAudioData(t.response,function(e){e||console.log("ERROR: MOD_Audio.loadBuffer : the XmlHttpRequest response buffer is corrupted or otherwise invalid."),t.asset.rawBuffer=e,t.asset.loaded=!0,++g===b&&(p=!0)},function(e){console.log("ERROR: MOD_Audio.loadBuffer : there was an error while decoding the XmlHttpRequest response.")})},t.send()}function r(){for(var e=v.length,t=0;e>t;t++)n(x[v[t]])}function o(e){v.length;return-1!=v.indexOf(e)?x[e]:(console.log("ERROR: MOD_Audio.getAssetByGUID : asset guid not found"),null)}function i(e,t,a,n,r,i,s){var l=o(e);if(null===l)return void console.log("ERROR: MOD_Audio.playSound : asset guid not found");if(l.guid===e){if(l.loaded){var u={assetGUID:l.guid,assetType:l.type,bufferSource:h.createBufferSource(),alive:!0,positional:i,baseVolume:l.baseVolume,playedAtVolume:t};if(u.bufferSource.buffer=l.rawBuffer,i?(u.pos=a,u.range=n,u.falloffStart=r,u.splitter=h.createChannelSplitter(2),u.merger=h.createChannelMerger(2),u.gainNodeLeft=h.createGain(),u.gainNodeRight=h.createGain(),u.bufferSource.connect(u.splitter),u.splitter.connect(u.gainNodeLeft,1,0),u.splitter.connect(u.gainNodeRight,0,0),u.gainNodeLeft.connect(u.merger,0,1),u.gainNodeRight.connect(u.merger,0,0),u.merger.connect(h.destination)):(u.gainNode=h.createGain(),u.bufferSource.connect(u.gainNode),u.gainNode.connect(h.destination)),u.bufferSource.buffer.onended=function(){u.alive=!1},u.bufferSource.start(0),u.bufferSource.loop=s,i)u.gainNodeLeft.gain.value=0,u.gainNodeRight.gain.value=0;else{var c=0;switch(u.assetType){case"sound":c=_.audioVolumeSound*_.audioVolumeMaster;break;case"music":c=_.audioVolumeMusic*_.audioVolumeMaster;break;default:console.log('ERROR: MOD_Audio.playSound : unrecognised asset type "'+u.assetType+'".')}u.gainNode.gain.value=u.playedAtVolume*u.baseVolume*c}return Y.push(u),u}X.push({guid:e,loop:s,volume:t,positional:i,pos:a,range:n,falloffStart:r})}}function s(e){e.bufferSource.stop(),e.alive=!1}function l(e){for(var t=Y.length,a=0;t>a;a++){var n=Y[a];n.assetGUID===e&&s(n)}}function u(){for(var e=Y.length,t=0;e>t;t++)s(Y[t])}function c(e){if(null!==M&&null!==D){var t=a.signedRadiansBetweenVectors(a.vectorToDestination(M,e.pos),D),n=Math.sin(t),r=Math.cos(t),o=(n+1)/2,i=1-o,s=1+r*S,l=e.pos.x-M.x,u=e.pos.y-M.y,c=Math.sqrt(l*l+u*u),f=_.audioVolumeSound*_.audioVolumeMaster,m=0;c<e.range&&(m=c>e.falloffStart?(e.range-c)/e.range:1),e.gainNodeLeft.gain.value=e.baseVolume*m*(T+i*w)*s*f,e.gainNodeRight.gain.value=e.baseVolume*m*(T+o*w)*s*f}else e.gainNodeLeft.gain.value=0,e.gainNodeRight.gain.value=0}function f(e){var t=0;switch(e.assetType){case"sound":t=_.audioVolumeSound*_.audioVolumeMaster;break;case"music":t=_.audioVolumeMusic*_.audioVolumeMaster;break;default:console.log('ERROR: MOD_Audio.updateSoundVolume : unrecognised asset type "'+e.assetType+'".')}e.gainNode.gain.value=e.playedAtVolume*e.baseVolume*t}function m(){r()}function d(e,t){p&&!y&&(console.log("All sound assets loaded!"),y=!0),M="undefined"!=typeof e?e:null,D="undefined"!=typeof t?t:null;for(var a=_.audioVolumeMaster!==k.audioVolumeMaster||_.audioVolumeMusic!==k.audioVolumeMusic||_.audioVolumeSound!==k.audioVolumeSound,n=0;n<Y.length;n++){var r=Y[n];r.alive?r.positional?c(r):a&&f(r):(Y.splice(n,1),n--)}for(var s=0;s<X.length;s++){var l=X[s],u=o(l.guid);u.loaded&&(i(l.guid,l.volume,l.pos,l.range,l.positional,l.loop),X.splice(s,1),s--)}k.audioVolumeMaster=_.audioVolumeMaster,k.audioVolumeMusic=_.audioVolumeMusic,k.audioVolumeSound=_.audioVolumeSound}window.AudioContext=window.AudioContext||window.webkitAudioContext;var h=new AudioContext,p=!1,y=!1,x=t.get(),g=0,v=Object.keys(x),b=v.length,w=e.get("directionalAudioPortion"),S=e.get("directionalAudioFwdBackScaling"),T=1-w,M=null,D=null,Y=[],X=[],_=e.getUserSettings(),k={audioVolumeMaster:0,audioVolumeMusic:0,audioVolumeSound:0};return{init:m,update:d,playSound:i,stopSound:l,stopAll:u}}();return n}),define("sounds",["audio","collision","globalevents"],function(e,t,a){var n=function(){function n(t){var a={g:t.g,p:{x:Math.round(t.p.x),y:Math.round(t.p.y)},t:t.t,po:t.po,rp:t.rp,rs:t.rs,v:t.v,l:t.l,a:t.a};a.a&&e.playSound(a.t,a.v,a.p,a.rp,a.rs,a.po,a.l),s.push(a)}function r(e,t,a,n,o){var i=[];i.push({guid:e.g,distFromSource:a}),o.push(e.g);for(var s=e.l,l=s.length,u=0;l>u;u++){var c=s[u];if(""!==c.osg&&!c.o){for(var f=c.osg,m=!1,d=o.length,h=0;d>h;h++){var p=o[h];if(p===f){m=!0;break}}if(!m){var y=c.mp,x=y.x-t.x,g=y.y-t.y,v=Math.sqrt(x*x+g*g),b=v+a;if(n>b){var w=c.oSec;if(w.ch>w.fh){var S=r(w,y,b,n,o);Array.prototype.push.apply(i,S)}}}}}return i}function o(e,n){for(var o=null,i=l.length,s=0;i>s;s++){var c=l[s];if(t.pointInPolygon(e,c.l,c.b)){o=c;break}}var f=r(o,e,0,n,[]);a.trigger(u.funcsound,{affectedSectors:f,soundRange:n})}function i(e){l=e.s;for(var t=e.sfx.length,a=0;t>a;a++)n(e.sfx[a])}var s=[],l=null,u=a.getEventKeys();return{init:i,funcSound:o}}();return n}),define("weapon",["enginevars","assets","time","sprite","vector2","collision","effects","effectdefs","weapondefs","projectiles","maths","globalevents","audio","sounds"],function(e,t,a,n,r,o,i,s,l,u,c,f,m,d){var h=function(){function h(e,l,h,y,T,M,D){var Y="undefined"==typeof M?!1:M;if(Y&&!e.playerCanOwn)return void console.log("ERROR: tried to give player a weapon type they cannot own");if(!Y&&!e.npcsCanOwn)return void console.log("ERROR: tried to give NPC a weapon type they cannot own");var X={itemType:"weapon",ranged:e.ranged,notificationText:e.notificationText,ammoNotificationText:e.ammoNotificationText,inventoryInfo:e.inventoryInfo,audioInfo:e.audioInfo,type:e.type,crossHairType:e.crossHairType,crossHairYPos:x.y,projectileDef:e.projectileDef,owner:y,player:T,playerOwned:Y,defaultHitEffect:e.defaultHitEffect,sceneData:null,p:y.getWeaponPos(),fwd:h,ammo:{finite:e.ammo.finite,refillAmount:e.ammo.capacity.refillAmount,mag:{capacity:e.ammo.capacity.mag,current:e.ammo.capacity.mag},total:{capacity:e.ammo.capacity.total,current:e.ammo.capacity.total}},states:{idle:"idle",firing:"firing",reloading:"reloading",singlereloading:"singlereloading"},reloadStates:{ready:"ready",reloadingin:"reloadingin",reloadingmag:"reloadingmag",reloadingout:"reloadingout"},hudCoords:e.hudCoords,weaponView:{basePos:{x:0,y:20},bobAnchor:{x:0,y:0},bobOffset:{x:0,y:0},aimOffset:{x:0,y:0}},damage:e.damage,minDamage:e.minDamage,range:e.range,rateOfFire:e.rateOfFire,shotCoolDown:0,firingShotThisFrame:!1,burstLength:{min:e.burstLength.min,max:e.burstLength.max,current:0,roundsFired:0},projectilesPerRound:e.projectilesPerRound,shotSpreadAngle:e.shotSpreadAngle,shotAngleIncrement:2*e.shotSpreadAngle/e.projectilesPerRound,hitScanResult:null,autoMode:e.autoMode,timeSinceFiring:e.rateOfFire,firingLocked:!1,sprite:null,darkSheet:null,lightSheet:null,containedAmmoAmount:"undefined"!=typeof D?D:e.defaultContainedAmmo,blockedSpawnOffset:1};if(X.currentState=X.states.idle,X.reloadState=X.reloadStates.ready,X.setBurstLength=function(){var e=X.burstLength;e.current=c.randomIntInRange(e.min,e.max),e.roundsFired=0},X.setBurstLength(),X.playerOwned){var _=e.spriteInfo;_.sheetTex=t.get(e.type),X.darkSheet=t.get(e.type+"_dark"),X.lightSheet=t.get(e.type+"_light"),X.sprite=n.sprite(_,X)}return X.fire=function(){if(!X.firingLocked&&(X.ammo.mag.current>0||!X.ammo.finite)){X.switchState(X.states.firing);X.owner.getHeadPos();(0==X.autoMode||1==X.autoMode)&&X.lock()}},X.playImpactEffect=function(e){if("player"!==e.typeHit){var t=e.coord,a=e.objRef,n=X.defaultHitEffect,o=0,l=0;if("function"==typeof a.getHitEffect)n=a.getHitEffect(X.projectileDef.name),o=a.baseHeight,l=a.effectOffsetFrac;else switch(e.typeHit){case"wall":o=a.ch-a.fh}var u=X.p,c={x:t.x-u.x,y:t.y-u.y},f=r.scaleVector(r.normalise(c),-v),m=r.sumVectors(c,f),d=r.sumVectors(m,u);if(d.z=t.z,"undefined"!=typeof n&&"none"!=n){var h=s.get(n);i.effect(h,d,void 0,void 0,{x:0,y:0,z:0})}}},X.makeFuncSound=function(e){d.funcSound(X.p,e.range)},X.playSound=function(e){m.playSound(e.guid,1,X.p,e.rangePrimary,e.rangeSecondary,!X.playerOwned,!1)},X.fireRound=function(){var e=X.playerOwned?X.hitScanResult:X.hitScanPrimary(X.fwd);if(null!==e&&e.result!==!1){if(X.playerOwned&&1!==X.projectilesPerRound){var t=e.elevation,a=r.rotateByRadians(X.fwd,-X.shotSpreadAngle),n=X.projectilesPerRound;a.z=t;for(var o=0;n>o;o++)e=X.hitScanSecondary(a),e.elevation=t,X.fireProjectile(a,e),a=r.rotateByRadians(a,X.shotAngleIncrement),a.z=t}else X.fireProjectile(X.fwd,e);X.ammo.finite&&X.ammo.mag.current--,X.makeFuncSound(X.audioInfo.sounds.fire),X.playSound(X.audioInfo.sounds.fire)}},X.updateHitscanResult=function(){X.hitScanResult=X.hitScanPrimary(X.fwd)},X.hitScanPrimary=function(e){var t=r.scaleVector(r.normalise(e),S),a=X.p,n=o.weaponHitScanPrimary(X.p,{x:a.x+t.x,y:a.y+t.y},X.sceneData.s,X.sceneData.t,X.player,X.playerOwned);if(n.result===!1)return n;var i=n.coord,s={x:Math.abs(i.x-a.x),y:Math.abs(i.y-a.y)},l=Math.sqrt(s.x*s.x+s.y*s.y);return aimPointZDelta=i.z-a.z,aimPointDeltaAng=Math.atan(aimPointZDelta/l),n.elevation=Math.sin(aimPointDeltaAng),n},X.hitScanSecondary=function(e){var t=r.scaleVector3D(r.normalise3D(e),X.range),a=o.weaponHitScanSecondary(X.p,t,X.sceneData.s,X.sceneData.t,X.player,X.playerOwned);return a},X.fireProjectile=function(e,t){if(t!==!1){var a=r.normalise(e);a.z=t.elevation;var n=X.projectileDef,o=t.coord.x-X.p.x,i=t.coord.y-X.p.y,s=(t.coord.z-X.p.z,Math.sqrt(o*o+i*i));switch(n.transmissionType){case b.hitscan:if(s>X.range)return;if(t.objRef.destructible){var l=X.getHitDamage(t,e);t.objRef.projectileHit(l,e.x,e.y)}X.playImpactEffect(t);break;case b.projectile:var c=a.x*n.spawnFwdOffset,f=a.y*n.spawnFwdOffset,m=Math.sqrt(c*c+f*f),d=X.p.x+c,h=X.p.y+f,p=X.p.z,y=n.projectileInfo.impactOffset;m>s&&(d=X.p.x+a.x*X.blockedSpawnOffset,h=X.p.y+a.y*X.blockedSpawnOffset,y=1),u.projectile(n.name,n.projectileInfo,n.impactActions,d,h,p,a,X.owner.parentThing,y)}}},X.getHitDamage=function(e,t){var a=e.objRef.getPos(),n=X.p,r={x:Math.abs(a.x-n.x),y:Math.abs(a.x-n.x)},o=X.range,i=Math.sqrt(r.x*r.x+r.y*r.y),s=i/o,l=X.damage*(1-s);return l<X.minDamage&&(l=X.minDamage),l>X.damage&&(l=X.damage),l},X.getWeaponViewOffsetX=function(){var e=X.weaponView;return e.basePos.x+e.bobAnchor.x+e.bobOffset.x+e.aimOffset.x},X.getWeaponViewOffsetY=function(){var e=X.weaponView;return e.basePos.y+e.bobAnchor.y+e.bobOffset.y+e.aimOffset.y},X.lock=function(){X.firingLocked=!0},X.unlock=function(){X.firingLocked=!1},X.reload=function(){var e=X.ammo,t=e.mag,a=e.total,n=(t.current,X.states.reloading);t.current<t.capacity&&X.currentState!=n&&a.current>0&&X.switchState(n)},X.updatePosition=function(){X.p=X.owner.getWeaponPos()},X.updateCrossHair=function(e){var t=X.hitScanResult;t&&t.result===!0?X.crossHairYPos=Math.round(x.y+(e-t.coord.z)*(1/t.distFromRayOrigin)*g):X.crossHairYPos=x.y},X.addAmmo=function(e){f.trigger(w.inventoryitemadded,{notificationText:"YOU PICKED UP "+e+" "+X.ammoNotificationText+".",showNotification:!0});var t=X.ammo.total,a=t.current+e;a>t.capacity&&(a=t.capacity),t.current=a},X.ammoFull=function(){var e=X.ammo.total;return e.current>=e.capacity},X.switchState=function(e){var t=X.states;switch(e){case t.idle:X.playerOwned?(0==X.ammo.mag.current?X.sprite.switchSequence("out"):X.sprite.switchSequence("idle"),X.currentState=e):X.currentState=e;break;case t.firing:X.timeSinceFiring=0,X.currentState=e,X.setBurstLength();break;case t.reloading:X.currentState=e,0===X.ammo.total.current&&X.switchState(t.idle),X.playerOwned&&X.switchReloadState(X.reloadStates.reloadingin);break;case t.singlereloading:X.currentState=e,X.playerOwned&&(X.sprite.switchSequence("singlereloading"),X.playSound(X.audioInfo.sounds.singlereloading),console.log("singlereloading"))}},X.switchReloadState=function(e){var t=X.reloadStates;switch(e){case t.ready:X.switchState(X.states.idle);break;case t.reloadingin:X.sprite.switchSequence("reloadingin"),X.reloadState=e,X.playSound(X.audioInfo.sounds.reloadingin),console.log("reloading in");break;case t.reloadingmag:X.sprite.switchSequence("reloadingmag"),X.reloadState=e,X.playSound(X.audioInfo.sounds.reloadingmag),console.log("reloading mag");break;case t.reloadingout:X.sprite.switchSequence("reloadingout"),X.reloadState=e,X.playSound(X.audioInfo.sounds.reloadingout),console.log("reloading out")}},X.stateActions=function(){var e=X.states,t=X.reloadStates;switch(X.currentState){case e.firing:if(0==X.shotCoolDown)X.playerOwned&&(X.ammo.finite===!0&&1===X.ammo.mag.current?X.sprite.switchSequence("firinglast"):X.sprite.switchSequence("firing")),
X.fireRound(),X.burstLength.roundsFired++,X.firingShotThisFrame=!0;else if(X.firingShotThisFrame=!1,X.shotCoolDown>=X.rateOfFire){(X.playerOwned||X.burstLength.roundsFired>=X.burstLength.current)&&(X.playerOwned&&0===X.autoMode?X.switchState(e.singlereloading):X.switchState(e.idle)),X.shotCoolDown=0;break}X.shotCoolDown+=p;break;case e.reloading:var a=X.sprite.currentSequenceFinished();if(X.reloadState==t.reloadingin)a&&X.switchReloadState(t.reloadingmag);else if(X.reloadState==t.reloadingmag){if(a){var n=X.ammo,r=n.mag,o=n.total,i=n.refillAmount,s=r.capacity-r.current;if(i>s&&(i=s),o.current<i&&(i=o.current),r.current+=i,o.current-=i,r.current==r.capacity){X.switchReloadState(t.reloadingout);break}if(o.current>0){X.switchReloadState(t.reloadingmag);break}X.switchReloadState(t.ready);break}}else if(X.reloadState==t.reloadingout&&a){X.switchReloadState(t.ready);break}break;case e.singlereloading:X.sprite.currentSequenceFinished()&&X.switchState(e.idle)}},X.update=function(e,t){p=a.getDeltaTime(),X.sceneData=e,X.timeSinceFiring+=p,X.updatePosition(),X.playerOwned&&X.updateHitscanResult(),X.stateActions(),X.playerOwned&&(X.sprite.update(X.p),X.updateCrossHair(t))},X}var p=a.getDeltaTime(),y=e.get("canvasSize"),x={x:Math.round(y.x/2),y:Math.round(y.y/2)},g=e.get("distToProjSurf"),v=e.get("effectSurfaceOffset"),b=l.getTransmissionTypes(),w=f.getEventKeys(),S=e.get("maxHitscanRange");return{weapon:h}}();return h}),define("inventory",["enginevars","globalevents"],function(e,t){var a=function(){function e(){t.trigger(m.inventoryitemadded,{notificationText:"CAN'T CARRY ANY MORE OF THIS ITEM",showNotification:!0})}function a(a,r,o){if(null!==a){if(!r){for(var i=c.items,s=i.length,l=!1,f=0;s>f;f++){var d=i[f];if(a.itemType===d.itemType&&a.type===d.type){l=!0,e(),"weapon"===a.itemType&&d.addAmmo(a.containedAmmoAmount);break}}if(l)return"weapon"===a.itemType&&a.addAmmo(a.containedAmmoAmount),!1}c.items.push(a),t.trigger(m.inventoryitemadded,{notificationText:"YOU PICKED UP "+a.notificationText+". ADDED TO STORAGE.",showNotification:o}),"weapon"===a.itemType&&a.addAmmo(a.containedAmmoAmount);for(var h in c.equipped)if(c.equipped.hasOwnProperty(h)&&null===c.equipped[h])return n(a,h),t.trigger(m.inventoryitemadded,{notificationText:"YOU PICKED UP "+a.notificationText+". EQUIPPED IN SLOT "+(parseInt(h,10)+1)+".",showNotification:o}),u(),!0;return u(),!0}}function n(e,t){e.inventoryInfo.equipped=!0,e.inventoryInfo.equipSlotIdx=parseInt(t),c.equipped[t]=e,u()}function r(e){var t=c.equipped;for(var a in t){var n=t[a];n===e&&(e.inventoryInfo.equipped=!1,e.inventoryInfo.equipSlotIdx=-1,t[a]=null)}u()}function o(e){for(var t=c.items,a=t.length,r=0;a>r;r++){var o=t[r];o.inventoryInfo.selected===!0&&n(o,e)}}function i(){for(var e=c.items,t=e.length,a=0;t>a;a++){var n=e[a];n.inventoryInfo.selected===!0&&n.inventoryInfo.equipped===!0&&r(n)}}function s(){}function l(e,t){var a=c.equipped[t];c.equipped[t]=c.equipped[e],c.equipped[e]=a;var n=c.equipped[e],r=c.equipped[t];null!==n&&(n.inventoryInfo.equipSlotIdx=e),null!==r&&(r.inventoryInfo.equipSlotIdx=t)}function u(){var e=0,t=c.equipped;for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];null!==n&&(e+=n.inventoryInfo.weight)}f=e,console.log("current load is "+e)}var c={equipped:{0:null,1:null,2:null},items:[]},f=0,m=t.getEventKeys();return{addItem:a,equipSelectedItem:o,unequipSelectedItem:i,dropSelectedItem:s,swapEquipSlotItems:l,notifyDuplicateRejected:e,getItems:function(){return c.items},getItemAtIndex:function(e){return c.items[e]},getSelectedItemIdx:function(){for(var e=c.items,t=e.length,a=0;t>a;a++)if(e[a].inventoryInfo.selected===!0)return a},getEquippedItems:function(){return c.equipped},getCurrentLoad:function(){return f}}}();return a}),define("moodhead",["enginevars","assets","maths","time"],function(e,t,a,n){var r=function(){function e(){return{frame:l.spriteSheet.frames["head-"+l.wearState+"-"+l.currentState.name],screenOffset:l.screenOffset,img:l.spriteSheet.asset.img,glScale:l.spriteSheet.glScale}}function r(){for(var e=l.states.normal,t=!1,n=0,r=3;!t;){switch(a.randomIntInRange(1,4)){case 1:e=l.states.lookleft;break;case 2:e=l.states.lookright;break;case 3:e=l.states.turnleft;break;case 4:e=l.states.turnright;break;default:e=l.states.normal}t=e!=l.currentState||++n>=r}return e}function o(e,t,o,i,u,c,f){s=n.getDeltaTime();var m=l.currentState.duration;if(e==t)return l.currentState=l.states.hit,void(l.stateCooldown=a.randomIntInRange(m.min,m.max));if(o.currentState==o.states.firing)return l.currentState=l.states.mean,void(l.stateCooldown=a.randomIntInRange(m.min,m.max));if(l.stateCooldown<=0){var d=l.states;l.currentState==d.hit?l.currentState=d.mean:l.currentState==d.normal?l.currentState=r():l.currentState=d.normal,l.stateCooldown=a.randomIntInRange(m.min,m.max)}l.stateCooldown-=s,l.wearState=1,i>Math.round(f/2)?l.wearState=1:i>0?l.wearState=2:u>Math.round(c/2)?l.wearState=4:l.wearState=5}function i(){l.currentState=l.states.normal,l.stateCooldown=a.randomIntInRange(l.states.normal.duration.min,l.states.normal.duration.max)}var s=n.getDeltaTime(),l={wearState:1,currentState:null,stateCooldown:0,screenOffset:{x:0,y:0},states:{normal:{name:"normal",duration:{min:40,max:240}},lookleft:{name:"lookleft",duration:{min:45,max:90}},lookright:{name:"lookright",duration:{min:45,max:90}},turnleft:{name:"turnleft",duration:{min:60,max:120}},turnright:{name:"turnright",duration:{min:60,max:120}},hit:{name:"hit",duration:{min:20,max:25}},mean:{name:"mean",duration:{min:35,max:45}}},spriteSheet:{asset:t.get("moodhead"),glScale:5,frames:{"head-1-mean":{x:204,y:2,w:30,h:44},"head-1-normal":{x:3,y:3,w:30,h:43},"head-1-lookleft":{x:35,y:3,w:30,h:43},"head-1-lookright":{x:67,y:3,w:30,h:43},"head-1-turnleft":{x:99,y:3,w:34,h:43},"head-1-turnright":{x:135,y:3,w:34,h:43},"head-1-hit":{x:171,y:3,w:31,h:44},"head-2-mean":{x:203,y:48,w:30,h:45},"head-2-normal":{x:3,y:49,w:30,h:44},"head-2-lookleft":{x:35,y:49,w:30,h:44},"head-2-lookright":{x:67,y:49,w:30,h:44},"head-2-turnleft":{x:99,y:49,w:34,h:43},"head-2-hit":{x:170,y:49,w:31,h:44},"head-2-turnright":{x:134,y:50,w:34,h:42},"head-3-mean":{x:202,y:94,w:31,h:45},"head-3-normal":{x:2,y:95,w:31,h:44},"head-3-lookleft":{x:35,y:95,w:30,h:44},"head-3-lookright":{x:67,y:95,w:30,h:44},"head-3-turnleft":{x:99,y:95,w:34,h:43},"head-3-hit":{x:170,y:95,w:30,h:44},"head-3-turnright":{x:134,y:96,w:33,h:42},"head-4-mean":{x:202,y:140,w:31,h:45},"head-4-normal":{x:2,y:142,w:31,h:43},"head-4-lookleft":{x:35,y:142,w:30,h:43},"head-4-lookright":{x:67,y:142,w:30,h:43},"head-4-turnleft":{x:99,y:142,w:34,h:43},"head-4-turnright":{x:134,y:142,w:33,h:43},"head-4-hit":{x:170,y:142,w:30,h:44},"head-5-lookleft":{x:35,y:189,w:30,h:47},"head-5-hit":{x:170,y:189,w:31,h:49},"head-5-mean":{x:202,y:189,w:31,h:46},"head-5-normal":{x:2,y:190,w:32,h:46},"head-5-lookright":{x:67,y:190,w:30,h:46},"head-5-turnleft":{x:99,y:190,w:34,h:46},"head-5-turnright":{x:134,y:190,w:33,h:46}}}};return{init:i,update:o,getCurrentFrame:e}}();return r}),define("camera",["enginevars"],function(e){var t=function(){function e(e,t,a){var n={pos:{x:e,y:t,z:a},fwd:{x:0,y:0,z:0},roll:0};return n.getPos=function(){return n.pos},n.getFwd=function(){return n.fwd},n.getRoll=function(){return n.roll},n.setPos=function(e,t,a){n.pos.x=e,n.pos.y=t,n.pos.z=a},n.setFwd=function(e,t,a){n.fwd.x=e,n.fwd.y=t,n.fwd.z=a},n.setRoll=function(e){n.roll=e},n}return{camera:e,getPos:function(){return m_Pos},getPos:function(){return m_Pos}}}();return t}),define("player",["enginevars","collision","input","vector2","time","weapon","weapondefs","impactactions","impactactiondefs","inventory","globalevents","moodhead","camera"],function(e,t,a,n,r,o,i,s,l,u,c,f,m){var d=function(){function h(){Gt=n.rotateByDegrees(Ut,90),Kt=n.rotateByDegrees(Ut,180),$t=n.rotateByDegrees(Ut,-90)}function p(){0>=Tt&&(Tt=0,Dt=!1,he=fe)}function y(){Yt=ct.lTrigger||lt.shift}function x(){Yt||(kt?ct.btnB||lt.c?_t||(_t=!0,Xt=!Xt):_t=!1:Xt=ct.btnB||lt.c),he=Xt?ce:ue}function g(){var e=ht.ch-ht.fh;if(0==e)k(Tt,{x:0,y:0});else if(ce>e){qt=!0,he=ht.ch-De;var t=ht.fh+1;t>he&&(he=t),(Ot-=gt)<=0&&(Ot=Ft,k(Et,{x:0,y:0}))}else ue>e?Xt=!0:Ot=0}function v(){var e={x:Ut.x,y:Ut.y};e=n.normalise(Ut);var t=Q.hitScanResult;if(mt&&null!=t&&t.result===!0&&("prop"===t.typeHit||"npc"===t.typeHit)&&hitScanObj.destructible===!0){hitScanObj=t.objRef;var r=n.vectorToDestination(jt,hitScanObj.getPos()),o=n.signedRadiansBetweenVectors(Ut,r),i=10*o;e=n.rotateByDegrees(e,i*gt)}if(lt.lt)e=n.rotateByDegrees(e,-tt*gt);else if(ct.rightStick.left){var s=ct.rightStick.axisLeftRight;s*=Math.abs(s)*ft,e=n.rotateByDegrees(e,at*s*gt)}if(lt.rt)e=n.rotateByDegrees(e,tt*gt);else if(ct.rightStick.right){var s=ct.rightStick.axisLeftRight;s*=Math.abs(s)*ft,e=n.rotateByDegrees(e,at*s*gt)}ut.locked&&(e=n.rotateByDegrees(e,nt*ut.deltaPos.x*gt)),Ut.x=e.x,Ut.y=e.y,h(),a.reset()}function b(){if(Qt.x=0,Qt.y=0,x(),y(),!qt){var e=ct.leftStick;lt.w?(Qt.x+=Ut.x*Ve,Qt.y+=Ut.y*Ve):e.fwd&&(Qt.x+=Ut.x*-e.axisFwdBack*Ve,Qt.y+=Ut.y*-e.axisFwdBack*Ve),lt.s?(Qt.x+=Kt.x*Ve,Qt.y+=Kt.y*Ve):e.back&&(Qt.x+=Kt.x*e.axisFwdBack*Ve,Qt.y+=Kt.y*e.axisFwdBack*Ve),lt.a?(Qt.x+=$t.x*Ve,Qt.y+=$t.y*Ve):e.left&&(Qt.x+=$t.x*-e.axisLeftRight*Ve,Qt.y+=$t.y*-e.axisLeftRight*Ve),lt.d?(Qt.x+=Gt.x*Ve,Qt.y+=Gt.y*Ve):e.right&&(Qt.x+=Gt.x*e.axisLeftRight*Ve,Qt.y+=Gt.y*e.axisLeftRight*Ve)}qt=!1,(lt.up||ct.dPad.fwd)&&(Wt+=5*Ze),(lt.dn||ct.dPad.back)&&(Wt-=5*Ze);var t=1-u.getCurrentLoad()/He;0>t?t=0:t>1&&(t=1),Qt=n.scaleVector(Qt,t);var a=Yt?Qe:1;Qt=n.scaleVector(Qt,a);var r=1;wt>Tt&&(r=Tt/wt,We>r&&(r=We),r>1&&(r=1)),Qt=n.scaleVector(Qt,r),Qt=n.scaleVector(Qt,G),Zt.x+=Qt.x,Zt.y+=Qt.y,Zt=n.scaleVector(Zt,K);var o=n.getMagnitude(Zt),i=W;Xt?i=U:Yt&&(i*=a),o>i?Zt=n.scaleVector(n.normalise(Zt),i):it>o&&(Zt.x=0,Zt.y=0),Jt=Zt}function w(){if(oe){for(var e=t.checkCollisionsNpcs(jt,Zt,se,dt.t),a=0;a<e.length;a++){var r,o=e[a],i=o.movement.p,s=i.x-jt.x,l=i.y-jt.y,u=Math.sqrt(s*s+l*l),c=-(u-se-o.parentThing.colRad),f=c/2,m=.01*f;if(vt)r=c;else{r=f+m;var h=n.scaleVector(n.normalise(n.vectorToDestination(i,jt)),f+m);Jt.x+=h.x,Jt.y+=h.y}var p=n.scaleVector(n.normalise(n.vectorToDestination(jt,i)),r);i.x+=p.x,i.y+=p.y}var y=R(dt.s),x=jt.x+Zt.x,g=jt.y+Zt.y,v=t.getEntityGeomCollisionResolution(jt,Jt,me+De,y,se,null,null,null,null,0);vt=v.x!==x||v.y!==g,Jt.x=v.x-jt.x,Jt.y=v.y-jt.y;var b=n.getMagnitude(Jt);Jt=t.getEntityPropCollisionResolution(jt,Zt,dt.t,Jt,se,vt,0),n.getMagnitude(Jt)>b&&(Jt=n.scaleVector(n.normalise(Jt),b)),te=Zt;for(var w=t.checkCollisionsPickups(jt,se,dt.t),S=w.length,T=0;S>T;T++){var M=w[T],D=M.activate(M,d);D&&(Pt=At,Bt.collect=!0)}for(var Y=dt.t,X=Y.length,_=0;X>_;_++){var k=Y[_];"pickup"===k.entityType&&k.pickup.locked&&(t.checkCollisionsPickup(jt,se,k.pickup)||k.pickup.unlock())}}jt.x+=Jt.x,jt.y+=Jt.y}function S(){var e=n.getMagnitude(Zt),t=n.getProjectedVector(Zt,Ut),a=n.getMagnitude(t),r=n.radiansBetweenVectors(Zt,Ut)<1.5708?1:-1;strafeVel=n.getProjectedVector(Zt,$t),strafeVelMag=n.getMagnitude(strafeVel),strafeDirection=n.radiansBetweenVectors(Zt,$t)<1.5708?-1:1,Q.weaponView.bobAnchor.x=strafeDirection*strafeVelMag*_e,Q.weaponView.bobAnchor.y=r*a*ke;var o=e/Se,i=qe*o,s=Be*o,l=Ae*o,u=Fe*o;Oe>l?l=Oe:l>Ae&&(l=Ae),Ne>i?i=Ne:i>qe&&(i=qe),Ee>u?u=Ee:u>Fe&&(u=Fe),ze>s?s=ze:s>Be&&(s=Be),Ie+=i*Ce*gt,Re+=s*Pe*gt,Ie>=1?(Ie=1,Ce=-1):-1>=Ie&&(Ie=-1,Ce=1),Re>=1?(Re=1,Pe=-1):-1>=Re&&(Re=-1,Pe=1),Q.weaponView.bobOffset.x=Ie*l,Q.weaponView.bobOffset.y=Re*u}function T(){}function M(){Z=u.getEquippedItems(),(lt.num1||ct.dPad.left)&&(J=0),(lt.num2||ct.dPad.right)&&(J=1),(lt.num3||ct.dPad.down)&&(J=2),C(Z),(lt.space||ct.rTrigger||ut.locked&&ut.leftBtn)&&Q.fire(),lt.space||ct.rTrigger||ut.leftBtn||Q.unlock(),(lt.r||ct.btnX)&&Q.reload(),S(),Q.update(dt,de),T()}function D(e){for(var a=0;a<e.length;a++){var n=e[a];t.pointInPolygon(jt,n.l,n.b)&&(pt=ht,ht=n)}}function Y(){if(ht===pt&&yt!==xt)return void(jt.z=yt);Ht=yt;var e=ot*gt;ot>e&&(e=ot),rt?$e*=e:$e=Ke,$e>st&&($e=st);var t=Ue*gt;Dt?rt&&(t=$e):t=Ge*gt,jt.z<Ht?(rt=!1,jt.z=Ht-jt.z<t?Ht:jt.z+t):jt.z>Ht?(rt=!0,jt.z=jt.z-Ht<t?Ht:jt.z-t):rt=!1}function X(){var e=Dt?Ue:Ge,t=e*gt;he>me?me=t>he-me?he:me+t:me>he&&(me=t>me-he?he:me-t),Dt||me!==he||Lt||(c.trigger(ra.playerdied),Lt=!0)}function _(e){Mt>e?Mt-=e:Mt>0?(Tt-=e-Mt,Mt=0):Tt-=e}function k(e,t,a){Rt=Ct,_(e),Bt.hit=!0}function I(){Rt-=gt,Pt-=gt,Bt.hit&&0>=Rt&&(Rt=0,Bt.hit=!1),Bt.collect&&0>=Pt&&(Pt=0,Bt.collect=!1)}function R(e){for(var a=[],n=jt.x-se,r=jt.y-se,o=jt.x+Zt-se,i=jt.y+Zt-se,s=o>n?n:o,l=i>r?r:i,u=Math.abs(o-n),c=Math.abs(i-r),f=e.length,m=0;f>m;m++){var d=e[m];t.intersectsRectWithRectCoords(s,l,u,c,d.b.x,d.b.y,d.b.w,d.b.h)===!0&&a.push(d)}return a}function C(e){for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];if(parseInt(t)===J&&null!==a)return void(Q=a)}Q=ee}function P(){var e=n.getMagnitude(Zt),t=e/Se,a=ye*t,r=ge*t;ve>r?r=ve:r>ge&&(r=ge),be>a?a=be:a>ye&&(a=ye),pe+=a*xe*gt,pe>=1?(pe=1,xe=-1):-1>=pe&&(pe=-1,xe=1),Ye=pe*r}function A(){var e=0,t=n.getMagnitude(Zt),a=n.getProjectedVector(Zt,$t),r=n.getMagnitude(a);if(t>0){var o=n.radiansBetweenVectors(Zt,$t);e=o>1.5708?-(r*we):r*we}ea.setRoll(e)}function F(){P(),A(),ea.setPos(jt.x,jt.y,jt.z+me+Ye+Wt),ea.setFwd(Ut.x,Ut.y,Ut.z)}function O(e,t){Nt.hasOwnProperty(e)&&(Nt[e]=t)}function E(e){return Nt.hasOwnProperty(e)?Nt[e]:void 0}function q(){return{p:ea.getPos(),fwd:ea.getFwd(),camRoll:ea.getRoll(),velocity:Zt,proj:te,slidingPlane:ae,insetA:ne,insetB:re,moveSpeed:Ve,occupiedSector:ht,mouseDelta:ut.deltaPos,currentWeapon:Q,hudEffects:Bt,alive:Dt,hudEffects:Bt,hitCooldown:Rt,hitCooldownTime:Ct,hudEffectTimer:Pt,hudEffectTimerTime:At,moodHeadFrame:f.getCurrentFrame(),ll:ht.ll}}function B(){return{currentWeapon:Q,currentItemEquipIdx:J,equippedItems:u.getEquippedItems(),inventory:u,hudEffects:Bt,hitCooldown:Rt,hitCooldownTime:Ct,hudEffectTimer:Pt,hudEffectTimerTime:At,alive:Dt,ll:ht.ll,armour:Mt,health:Tt,maxHealth:wt,maxArmour:St}}function N(){Vt.x=jt.x+Gt.x*je,Vt.y=jt.y+Gt.y*je,Vt.z=jt.z+na}function z(e){gt=r.getDeltaTime(),dt=e,lt=a.getKeyStates(),ut=a.getMouseStates(),ct=a.getPadStates(),oe=a.getCollisionOn(),D(dt.s),xt=yt,yt=ht.fh,Y(),X(),N(),p(),Dt&&(v(),b(),g(),F(),w(),M()),f.update(Rt,Ct,Q,Mt,Tt,wt,St),I()}function L(){Gt=n.rotateByDegrees(Ut,90),$t=n.rotateByDegrees(Ut,270),Kt=n.rotateByDegrees(Ut,180)}function j(){for(var e=0;e<zt.length;e++)Nt[zt[e]]=!1}function V(t,n){var r=t.p;jt.x=r.x,jt.y=r.y,jt.z=r.z,Ut.x=r.x,Ut.y=r.y,Ut.z=0,Vt.x=jt.x,Vt.y=jt.y,Vt.z=jt.z+na,L(),Ht=0,Wt=0,Zt={x:0,y:0},Qt={x:0,y:0},Jt={x:0,y:0},W=12,U=2,G=e.get("playerAcceleration"),K=e.get("playerFriction"),$=i.get(),Z=[],Q=null,J=0,ee=null,te={},ae={},ne={},re={},oe=!0,ie=e.get("maxScaledMovementStep"),se=e.get("playerCollisionRadius"),le=e.get("playerSoftCollisionRadius"),ue=e.get("cameraHeightStand"),ce=e.get("cameraHeightCrouch"),fe=e.get("cameraHeightDead"),me=ue,de=me,he=me,pe=0,xe=-1,ge=e.get("camBobScale"),ve=e.get("camMinBobScale"),ye=e.get("camBobFreq"),be=e.get("camMinBobFreq"),we=e.get("camRollScale"),Se=e.get("maxCamBobVelocity"),Te=e.get("minCamBobVelocity"),m_SprintCamBobVelocity=e.get("sprintCamBobVelocity"),Me=e.get("returningCameraBobIncrement"),De=e.get("playerHeadRoom"),Ye=0,Xe=1,_e=e.get("weaponViewOffsetAmtX"),ke=e.get("weaponViewOffsetAmtY"),Ie=0,Re=0,Ce=1,Pe=1,qe=e.get("weaponViewBobFreqX"),Be=e.get("weaponViewBobFreqY"),Ae=e.get("weaponViewBobScaleX"),Fe=e.get("weaponViewBobScaleY"),Oe=e.get("minWeaponViewBobScaleX"),Ee=e.get("minWeaponViewBobScaleY"),Ne=e.get("minWeaponViewBobFreqX"),ze=e.get("minWeaponViewBobFreqY"),Le=e.get("weaponViewAimOffsetMult"),je=e.get("weaponRightOffset"),Ve=e.get("playerMoveSpeed"),He=e.get("playerMaxWeightLimit"),We=e.get("playerMinInjurySpeedMult"),Ue=e.get("heightTransitionSpeed"),Ge=e.get("heightTransitionSpeedDead"),Ke=e.get("baseFallSpeed"),$e=Ke,Ze=.25,Qe=e.get("playerSprintSpeedMult"),Je=.5,et=5,tt=2,at=2.5,nt=.15,rt=!1,ot=e.get("gravityAcceleration"),it=.01,st=e.get("terminalVelocity"),lt=null,ut=a.getMouseStates(),ct=a.getPadStates(),ft=2,mt=!1,dt=null,ht=null,pt=null,yt=0,xt=0,gt=1,vt=!1,bt=[],wt=e.get("playerHealth"),St=e.get("playerArmour"),Tt=wt,Mt=St,Dt=!0,Yt=!1,Xt=!1,_t=!1,kt=!0,It=e.get("playerHealth"),Rt=0,Ct=e.get("playerHitCooldown"),Pt=0,At=e.get("hudEffectDuration"),Ft=e.get("crushDamageCooldown"),Ot=0,Et=e.get("crushDamageAmount"),qt=!1,Bt={hit:!1,collect:!1},Nt={},zt=l.getKeys(),na=e.get("playerWeaponZOffset"),Lt=!1,bt=n.pn,dt=n,ea=m.camera(jt.x,jt.y,jt.z),N(),u.addItem(o.weapon($.pistol,jt,Ut,this,this,!0),!1,!1),ee=o.weapon($.combatknife,jt,Ut,this,this,!0),Z=u.getEquippedItems(),C(Z),f.init(),j(),ta=[]}function H(e){var t=e.p,a=t.p,n=t.f;jt.x=a.x,jt.y=a.y,jt.z=a.z,Ut.x=n.x,Ut.y=n.y,Ut.z=n.z,L(),Zt.x=t.v.x,Zt.y=t.v.y,de=t.rch,he=t.tch,Ze=t.vs,rt=t.fa,vt=t.cww,Tt=t.h,It=t.ph,Mt=t.a,Dt=t.al,Xt=t.c,Nt=t.se;for(var r=t.w,i=r.length,l=0;i>l;l++){var c=r[l],f=o.weapon($[c.t],jt,Ut,this,this,!0);f.ammo.mag.current=c.am,f.ammo.total.current=c.at,f.shotCoolDown=c.scd,f.firingShotThisFrame=c.fstf,f.currentState=c.cs,f.reloadState=c.rs,f.timeSinceFiring=c.tsf,f.firingLocked=c.fl;var m=f.sprite,h=c.s;m.frameElapsed=h.e,m.sequenceElapsed=h.s,m.currentSequence=h.c,m.nextSequence=h.n,m.currentFrame=h.f,m.sequenceInProgress=h.i,m.isFullBright=h.b,u.addItem(f,!1,!1)}J=t.cw,Z=u.getEquippedItems(),C(Z),ta=[];for(var p=t.ia,y=p.length,x=0;y>x;x++){var g=p[x],v=(aa[g.a],g.p),b=s.impactAction(aa[g.p.t],d),w=b.params;w.pos=v.p,w.type=v.t,w.duration=v.d,w.age=v.a,w.damage=v.da,w.spread=v.s,w.attachToTarget=v.at,b.hasEffect=g.h,b.effectType=g.et,b.effectAnchor=g.ea,b.effectOffset=g.eo,b.actionDef.type=g.a,b.subject.g=g.s,ta.push(b)}}var W,U,G,K,$,Z,Q,J,ee,te,ae,ne,re,oe,ie,se,le,ue,ce,fe,me,de,he,pe,ye,xe,ge,ve,be,we,Se,Te,Me,De,Ye,Xe,_e,ke,Ie,Re,Ce,Pe,Ae,Fe,Oe,Ee,qe,Be,Ne,ze,Le,je,Ve,He,We,Ue,Ge,Ke,$e,Ze,Qe,Je,et,tt,at,nt,rt,ot,it,st,lt,ut,ct,ft,mt,dt,ht,pt,yt,xt,gt,vt,bt,wt,St,Tt,Mt,Dt,Yt,Xt,_t,kt,It,Rt,Ct,Pt,At,Ft,Ot,Et,qt,Bt,Nt,zt,Lt,jt={x:0,y:0,z:0},Vt={x:0,y:0,z:0},Ht=0,Wt=0,Ut={x:0,y:-1,z:0},Gt={x:1,y:0},Kt={x:0,y:1},$t={x:-1,y:0},Zt={x:0,y:0},Qt={x:0,y:0},Jt={x:0,y:0},ea=null,ta=[],aa=l.get(),na=0,ra=c.getEventKeys(),oa={x:0,y:-1},ia=(Math.atan2(oa.y,oa.x),[aa.fire,aa.net]);return{t:"player",update:z,init:V,getPos:function(){return jt},getFwd:function(){return Ut},getRight:function(){return Gt},getVelocity:function(){return Zt},getWeapons:function(){return u.getEquippedItems()},getCurrentWeaponIdx:function(){return J},getWeaponZOffset:function(){return na},getWeaponPos:function(){return Vt},getRealCamHeight:function(){return de},getTargetCamHeight:function(){return he},getVerticalSpeed:function(){return Ze},getIsFalling:function(){return rt},getOccupiedSector:function(){return ht},getOccupiedSectorGUID:function(){return ht.g},getCollidingWithWall:function(){return vt},getHealth:function(){return Tt},getPrevHealth:function(){return It},getArmour:function(){return Mt},getCrouching:function(){return Xt},getStatusEffects:function(){return Nt},getPlayerData:q,getCollisionRadius:function(){return se},getHudData:B,projectileHit:k,getAlive:function(){return Dt},getHeadPos:function(){return{x:jt.x,y:jt.y,z:jt.z+me+De+Wt}},getValidImpactActionTypes:function(){return ia},applyForce:function(e,t){Jt.x+=e,Jt.y+=t},setStatusEffect:O,isStatusEffectActive:E,destructible:!0,isPushable:!0,impactActions:ta,loadSaveData:H,moduleInventory:u,moduleWeapon:o,moduleWeaponDefs:i}}();return d}),define("pathnode",["enginevars"],function(e){var t=function(){function t(e,t,a,o,i,s,l,u,c){var f={x:Math.round(e),y:Math.round(t),mX:a,mY:o,nodeParentIdx:{x:0,y:0},v:i,occupants:[],occupyingPawn:0,debugHilight:"none",debugNumber:0,flag:"none",list:"none",gCost:0,hCost:0,fCost:0,moveCostOrthog:n,moveCostDiag:n*r,setIsNav:function(e){f.v=e}};return f.v&&(f.s=s,f.br=l,f.dy=u,f.l=c),f}function a(e,t,a,n,r){for(var o=e.length,i=0;o>i;i++){var s=e[i];s.fh=a,s.vs=n}if(!("undefined"==typeof t||t.length<1))for(var l=t.length,u=0;l>u;u++){var c=t[u];if(c.br)for(var f=c.l,m=f.length,d=0;m>d;d++)for(var h=f[d],p=h.bridges,y=p.length,x=0;y>x;x++){var g=p[x];g.bridgedSectorGUID===r&&(g.verticalSpace=n)}}}var n=e.get("pathingBaseMovementCost"),r=e.get("pathingMovementCostDiagMult");return{pathNode:t,updateVerticalSpaceInNodes:a}}();return t}),define("doors",["enginevars","collision","time","pathnode"],function(e,t,a,n){var r=function(){function r(t,a){for(var n={sectorGuid:t.sg,sector:null,autoCloseTime:e.get("doorAutoCloseTime"),lastOpenTime:Date.now(),speed:"undefined"!=typeof t.s?t.s:2.5,openHeight:t.oh,closedHeight:t.ch,opening:!1,closing:!1,isOpen:!1,isClosed:!0,locked:t.l,crushBlocking:t.c},r=0;r<a.length;r++)a[r].g===n.sectorGuid&&(n.sector=a[r]);return n.open=function(){n.locked||n.opening||n.isOpen||(n.opening=!0,n.closing=!1,n.isClosed=!1)},n.close=function(){n.closing||n.isClosed||(n.closing=!0,n.opening=!1,n.isOpen=!1)},n.toggle=function(){console.log("door toggle"),n.isOpen||n.opening?n.close():(n.isClosed||n.closing)&&n.open()},n.lock=function(){n.locked=!0,(n.isOpen||n.opening)&&n.close()},n.unlock=function(){n.locked=!1},n}function o(e,a,r){var o=e.sector;if(e.closing&&!e.crushBlocking){for(var i=[],s=a.t,l=s.length,u=0;l>u;u++){var c=s[u];if(t.pointInPolygon(c.p,o.l,o.b))i.push(c);else{for(var m=!1,d=o.l,h=d.length,p=0;h>p;p++){var y=d[p];if(t.intersectsLineWithCircle(y.sp,y.ep,c.p,c.colRad,!1).result===!0){m=!0;break}}m&&i.push(c)}}var x=r.getPos();if(t.pointInPolygon(x,o.l,o.b))i.push(r);else{for(var g=!1,v=r.getCollisionRadius(),d=o.l,h=d.length,p=0;h>p;p++){var y=d[p];if(t.intersectsLineWithCircle(y.sp,y.ep,x,v,!1).result===!0){g=!0;break}}g&&i.push(r)}for(var b=i.length,w=0;b>w;w++){var S=i[w];if(o.ch<=S.getHeadPos().z)return void e.open()}}var T=e.opening?e.openHeight:e.closedHeight,M=o.ch,D=T>M?1:-1,Y=e.speed*D*f,X=Math.abs(Y),_=Math.abs(T-M);X>=_?(o.ch=T,e.opening?(e.isOpen=!0,e.isClosed=!1,e.lastOpenTime=Date.now()):e.closing&&(e.isClosed=!0,e.isOpen=!1),e.opening=!1,e.closing=!1):o.ch+=Y,n.updateVerticalSpaceInNodes(o.pn,o.bpn,o.fh,o.ch-o.fh,o.g)}function i(e,a,n){for(var r=c.length,o=0;r>o;o++){var i=c[o],s=i.sector;if(!a&&!i.isClosed)return;var l=t.pointInPolygon(e,s.l,s.b);if(1!=l.result)for(var u=s.l,f=u.length,m=0;f>m;m++){var d=u[m],h=t.intersectsLineWithCircle(d.sp,d.ep,e,n);if(1==h.result)return void i.toggle()}else i.toggle()}}function s(e){for(var t=c.length,a=0;t>a;a++)if(c[a].g==e)return c[a]}function l(e,t){f=a.getDeltaTime();for(var n=c.length,r=0;n>r;r++){var i=c[r];(i.opening||i.closing)&&o(i,e,t),i.isOpen&&!i.closing&&Date.now()-i.lastOpenTime>i.autoCloseTime&&i.close()}}function u(e,t){c=[];for(var a=0;a<e.length;a++){var n=r(e[a],t);c.push(n)}}var c=[],f=a.getDeltaTime();return{init:u,update:l,toggleNearby:i,getDoorByGUID:s,get:function(){return c}}}();return r}),define("thingdefs",["enginevars"],function(e){var t=function(){var e={playerstart:{type:"playerstart",entityType:"engine",isRenderable:!1,isPushable:!1,isSolid:!1,instantiable:!1,isNPC:!1,destructible:!1,health:100},deadtree01:{type:"deadtree01",entityType:"prop",isSolid:!0,solidToProjectiles:!0,collisionRadius:16,projectileCollisionRadius:8,isRenderable:!0,isPushable:!1,instantiable:!0,isNPC:!1,destructible:!1,anchor:"floor",baseHeight:48,hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{fire:{damageMult:0,spriteScale:2},net:{damageMult:0,spriteScale:2}},spriteInfo:{assetName:"atlas1",sheetTex:null,sourceScale:.436,glScale:.8,hasOrientations:!1,frameCoords:{0:{x:266,y:2,w:66,h:91}},frameSequences:[{name:"idle",frames:[{frame:"0",duration:60,fullBright:!1,offset:2}]}]}},barrel01:{type:"barrel01",entityType:"prop",isSolid:!0,solidToProjectiles:!0,collisionRadius:13,projectileCollisionRadius:11,isRenderable:!0,isPushable:!0,mass:500,instantiable:!0,isNPC:!1,destructible:!0,leavesCorpse:!1,health:20,hitCooldownTime:60,anchor:"floor",baseHeight:28,idealAimPointZOffset:18,hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{fire:{damageMult:1,spriteScale:2.5},net:{damageMult:0,spriteScale:2.5}},destructibleDef:{clearImpactEffectsOnDestroy:!0,causeDamage:!0,damageTypes:["explosive","fire"],damageAmount:100,damageRadius:96,damageDelay:10},effectOffsetFrac:.5,spriteInfo:{assetName:"atlas1",sheetTex:null,sourceScale:.75,glScale:.8,hasOrientations:!1,frameCoords:{0:{x:2,y:2,w:26,h:37},1:{x:30,y:2,w:26,h:37},2:{x:58,y:2,w:26,h:37},3:{x:86,y:2,w:45,h:41},4:{x:133,y:2,w:63,h:56},5:{x:198,y:2,w:66,h:59}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:15,fullBright:!1,offset:0},{frame:"1",duration:15,fullBright:!1,offset:0},{frame:"2",duration:15,fullBright:!1,offset:0}]},{name:"destroy",loop:!1,frames:[{frame:"3",duration:10,fullBright:!0,offset:0},{frame:"4",duration:10,fullBright:!0,offset:0},{frame:"5",duration:10,fullBright:!0,offset:0}]},{name:"destroyed",loop:!0,frames:[{frame:"-1",duration:60,fullBright:!1,offset:0}]}]}},stalactite01:{type:"stalactite01",entityType:"prop",isSolid:!1,solidToProjectiles:!1,collisionRadius:1,projectileCollisionRadius:1,isRenderable:!0,isPushable:!1,instantiable:!0,isNPC:!1,destructible:!1,anchor:"ceiling",baseHeight:22,spriteInfo:{assetName:"stalactite01",sheetTex:null,sourceScale:1,glScale:.75,hasOrientations:!1,frameCoords:{1:{x:2,y:2,w:19,h:30,o:0}},frameSequences:[{name:"idle",frames:[{frame:"1",duration:60,fullBright:!1,offset:0}]}]}},monster01:{type:"monster01",entityType:"npc",isSolid:!0,solidToProjectiles:!0,collisionRadius:16,projectileCollisionRadius:16,isRenderable:!0,isPushable:!0,mass:90,instantiable:!0,isNPC:!0,destructible:!0,leavesCorpse:!0,health:50,hitCooldownTime:6,npcDef:{defaultWeaponType:"npcpistol",deadHeight:10,moveSpeed:1.3,turnSpeed:.1,attackDelay:24,attackIntervalMin:80,attackIntervalMax:120,aimTimeMin:15,aimTimeMax:60,meleeDistance:64,alertRadius:64,afterAimFrames:12,maxNearestNodeOffset:1,minPanicRepathFrames:30,maxPanicRepathFrames:90,panicSpeedMult:2,panicRadius:4,minPanicRadius:1,minWanderRepathFrames:180,maxWanderRepathFrames:360,wanderSpeedMult:1,wanderRadius:4,minWanderRadius:1,maxVisualRange:384,doorTriggerDist:36,hearingAcuity:.75,weaponOffsetFrac:.75,sounds:{hurt:[{guid:"getsmokegrunt1",rangePrimary:2048,rangeSecondary:1}],impact:[{guid:"bullethitnpc",rangePrimary:512,rangeSecondary:0}]}},hitEffects:{none:"none",force:"none",bullet:"bullethit_redbloodsmall",plasma:"none",explosive:"none"},validImpactActionTypes:{fire:{damageMult:1,spriteScale:1},net:{damageMult:0,spriteScale:1}},halfFOV:.698132,anchor:"floor",baseHeight:36,idealAimPointZOffset:32,effectOffsetFrac:.35,spriteInfo:{assetName:"monster01",sheetTex:null,sourceScale:.28,glScale:.23,hasOrientations:!0,frameCoords:{orientation:{north:{frames:{0:{x:2,y:2,w:90,h:155},1:{x:94,y:2,w:90,h:152},2:{x:186,y:2,w:90,h:149},3:{x:278,y:2,w:90,h:155},4:{x:370,y:2,w:90,h:157},5:{x:462,y:2,w:90,h:155},6:{x:554,y:2,w:90,h:150},7:{x:646,y:2,w:90,h:152},8:{x:345,y:647,w:68,h:155},9:{x:415,y:647,w:68,h:155},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}},northwest:{frames:{0:{x:738,y:2,w:60,h:160},1:{x:801,y:2,w:60,h:158},2:{x:863,y:2,w:60,h:154},3:{x:925,y:2,w:60,h:153},4:{x:2,y:164,w:62,h:155},5:{x:66,y:164,w:61,h:155},6:{x:129,y:164,w:60,h:151},7:{x:191,y:164,w:60,h:152},8:{x:485,y:647,w:95,h:161},9:{x:583,y:647,w:115,h:162},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}},west:{frames:{0:{x:253,y:164,w:66,h:144},1:{x:321,y:164,w:55,h:144},2:{x:379,y:164,w:44,h:144},3:{x:425,y:164,w:52,h:143},4:{x:479,y:164,w:67,h:146},5:{x:548,y:164,w:58,h:144},6:{x:608,y:164,w:43,h:142},7:{x:653,y:164,w:55,h:143},8:{x:700,y:647,w:112,h:146},9:{x:814,y:647,w:132,h:147},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}},southwest:{frames:{0:{x:710,y:164,w:73,h:157},1:{x:785,y:164,w:66,h:154},2:{x:853,y:164,w:63,h:157},3:{x:918,y:164,w:63,h:159},4:{x:4,y:325,w:64,h:163},5:{x:70,y:325,w:64,h:160},6:{x:136,y:325,w:63,h:153},7:{x:201,y:325,w:67,h:155},8:{x:2,y:811,w:89,h:157},9:{x:93,y:811,w:100,h:157},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}},south:{frames:{0:{x:270,y:325,w:67,h:160},1:{x:339,y:325,w:67,h:152},2:{x:408,y:325,w:67,h:150},3:{x:477,y:325,w:67,h:155},4:{x:546,y:325,w:67,h:158},5:{x:615,y:325,w:67,h:157},6:{x:684,y:325,w:67,h:151},7:{x:753,y:325,w:67,h:158},8:{x:195,y:811,w:59,h:157},9:{x:256,y:811,w:62,h:157},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},
16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}},southeast:{frames:{0:{x:910,y:490,w:54,h:156},1:{x:4,y:648,w:48,h:157},2:{x:54,y:648,w:45,h:157},3:{x:101,y:648,w:45,h:157},4:{x:148,y:648,w:49,h:158},5:{x:199,y:648,w:48,h:157},6:{x:249,y:648,w:45,h:155},7:{x:296,y:648,w:47,h:157},8:{x:320,y:811,w:92,h:155},9:{x:414,y:811,w:111,h:154},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}},east:{frames:{0:{x:429,y:490,w:69,h:145},1:{x:500,y:490,w:60,h:146},2:{x:562,y:490,w:47,h:146},3:{x:611,y:490,w:55,h:146},4:{x:668,y:490,w:66,h:147},5:{x:736,y:490,w:62,h:149},6:{x:800,y:490,w:47,h:147},7:{x:849,y:490,w:59,h:146},8:{x:527,y:811,w:114,h:140},9:{x:643,y:811,w:134,h:141},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}},northeast:{frames:{0:{x:822,y:325,w:70,h:155},1:{x:894,y:325,w:65,h:154},2:{x:4,y:490,w:66,h:155},3:{x:72,y:490,w:69,h:155},4:{x:143,y:490,w:74,h:154},5:{x:219,y:490,w:74,h:155},6:{x:295,y:490,w:65,h:155},7:{x:362,y:490,w:65,h:154},8:{x:779,y:811,w:85,h:153},9:{x:866,y:811,w:98,h:152},10:{x:987,y:2,w:85,h:154},11:{x:1074,y:2,w:85,h:138},12:{x:1161,y:2,w:96,h:121},13:{x:1259,y:2,w:109,h:96},14:{x:1370,y:2,w:133,h:83},15:{x:1505,y:2,w:135,h:70},16:{x:1642,y:2,w:135,h:64},17:{x:1779,y:2,w:89,h:154},18:{x:1870,y:2,w:88,h:156},19:{x:1960,y:2,w:87,h:158},20:{x:983,y:162,w:88,h:162},21:{x:1073,y:162,w:89,h:166},22:{x:1164,y:162,w:88,h:160},23:{x:1254,y:162,w:88,h:144},24:{x:1344,y:162,w:88,h:136},25:{x:1434,y:162,w:83,h:131},26:{x:1519,y:162,w:83,h:120},27:{x:1604,y:162,w:93,h:110},28:{x:1699,y:162,w:105,h:93},29:{x:1806,y:162,w:129,h:81},30:{x:961,y:330,w:131,h:68},31:{x:1094,y:330,w:131,h:61},32:{x:1227,y:330,w:89,h:159},33:{x:1318,y:330,w:89,h:157},34:{x:1409,y:330,w:97,h:138},35:{x:1508,y:330,w:99,h:111},36:{x:1609,y:330,w:118,h:91},37:{x:1729,y:330,w:138,h:67},38:{x:1869,y:330,w:140,h:63},39:{x:966,y:491,w:141,h:62},40:{x:1109,y:491,w:140,h:62},41:{x:1254,y:491,w:141,h:62},42:{x:1397,y:491,w:141,h:62}}}}},frameSequences:[{name:"idle",loop:!0,frames:[{frame:"0",duration:60,fullBright:!1,offset:0}]},{name:"walk",loop:!0,frames:[{frame:"0",duration:2,fullBright:!1,offset:0},{frame:"1",duration:2,fullBright:!1,offset:0},{frame:"2",duration:2,fullBright:!1,offset:0},{frame:"3",duration:2,fullBright:!1,offset:0},{frame:"4",duration:2,fullBright:!1,offset:0},{frame:"5",duration:2,fullBright:!1,offset:0},{frame:"6",duration:2,fullBright:!1,offset:0},{frame:"7",duration:2,fullBright:!1,offset:0}]},{name:"fastwalk",loop:!0,frames:[{frame:"0",duration:1,fullBright:!1,offset:0},{frame:"1",duration:1,fullBright:!1,offset:0},{frame:"2",duration:1,fullBright:!1,offset:0},{frame:"3",duration:1,fullBright:!1,offset:0},{frame:"4",duration:1,fullBright:!1,offset:0},{frame:"5",duration:1,fullBright:!1,offset:0},{frame:"6",duration:1,fullBright:!1,offset:0},{frame:"7",duration:1,fullBright:!1,offset:0}]},{name:"aiming",loop:!0,frames:[{frame:"8",duration:8,fullBright:!1,offset:0}]},{name:"firing",loop:!0,frames:[{frame:"9",duration:4,fullBright:!0,offset:0}]},{name:"special",loop:!1,frames:[{frame:"9",duration:120,fullBright:!1,offset:0}]},{name:"hit",loop:!1,frames:[{frame:"11",duration:12,fullBright:!1,offset:0}]},{name:"dying",loop:!1,frames:[{frame:"10",duration:4,fullBright:!1,offset:0},{frame:"11",duration:4,fullBright:!1,offset:0},{frame:"12",duration:4,fullBright:!1,offset:.5},{frame:"13",duration:4,fullBright:!1,offset:1},{frame:"14",duration:4,fullBright:!1,offset:1.75},{frame:"15",duration:4,fullBright:!1,offset:2.9},{frame:"16",duration:4,fullBright:!1,offset:4}]},{name:"headshot",loop:!1,frames:[{frame:"17",duration:4,fullBright:!1,offset:0},{frame:"18",duration:4,fullBright:!1,offset:0},{frame:"19",duration:4,fullBright:!1,offset:0},{frame:"20",duration:4,fullBright:!1,offset:0},{frame:"21",duration:4,fullBright:!1,offset:0},{frame:"22",duration:4,fullBright:!1,offset:0},{frame:"23",duration:4,fullBright:!1,offset:0},{frame:"24",duration:4,fullBright:!1,offset:0},{frame:"25",duration:4,fullBright:!1,offset:0},{frame:"26",duration:4,fullBright:!1,offset:0},{frame:"27",duration:4,fullBright:!1,offset:.5},{frame:"28",duration:4,fullBright:!1,offset:1},{frame:"29",duration:4,fullBright:!1,offset:1.75},{frame:"30",duration:4,fullBright:!1,offset:2.9},{frame:"31",duration:4,fullBright:!1,offset:4}]},{name:"gibbing",loop:!1,frames:[{frame:"32",duration:3,fullBright:!1,offset:0},{frame:"33",duration:3,fullBright:!1,offset:0},{frame:"34",duration:3,fullBright:!1,offset:0},{frame:"35",duration:3,fullBright:!1,offset:0},{frame:"36",duration:3,fullBright:!1,offset:0},{frame:"37",duration:3,fullBright:!1,offset:0},{frame:"38",duration:3,fullBright:!1,offset:.5},{frame:"39",duration:3,fullBright:!1,offset:1},{frame:"40",duration:3,fullBright:!1,offset:1.75},{frame:"41",duration:3,fullBright:!1,offset:2.9},{frame:"42",duration:3,fullBright:!1,offset:4}]},{name:"dead",loop:!0,frames:[{frame:"16",duration:60,fullBright:!1,offset:4}]},{name:"headshotted",loop:!0,frames:[{frame:"31",duration:60,fullBright:!1,offset:4}]},{name:"gibbed",loop:!0,frames:[{frame:"42",duration:60,fullBright:!1,offset:4}]}]}},"ammo-pistol":{type:"ammo-pistol",entityType:"pickup",isSolid:!1,solidToProjectiles:!1,collisionRadius:16,projectileCollisionRadius:1,isRenderable:!0,isPushable:!0,mass:1,instantiable:!0,isNPC:!1,destructible:!1,health:1,hitCooldownTime:60,anchor:"floor",baseHeight:8,pickupDef:{type:"ammo",amount:15,weaponType:"pistol",sounds:{activate:{guid:"ammoget",range:0},fail:{guid:"pickupfail",range:0}},activate:function(e,t){var a=t.moduleInventory.getAllItems(),n=a.equipped,r=a.stored,o=r.length;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];if("weapon"===s.item.itemType&&e.weaponType===s.item.type)return s.item.ammoFull()?!1:(s.item.addAmmo(e.amount),e.del(),!0)}for(var l=0;o>l;l++){var u=r[l];if("weapon"===u.item.itemType&&e.weaponType===u.item.type)return u.item.ammoFull()?!1:(u.item.addAmmo(e.amount),e.del(),!0)}return!1}},hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{},spriteInfo:{assetName:"ammo-pistol",sheetTex:null,sourceScale:1,glScale:.5,hasOrientations:!1,frameCoords:{1:{x:0,y:0,w:13,h:16,o:0}},frameSequences:[{name:"idle",frames:[{frame:"1",duration:60,fullBright:!1,offset:0}]}]}},"weapon-shotgun":{type:"weapon-shotgun",entityType:"pickup",isSolid:!1,solidToProjectiles:!1,collisionRadius:16,projectileCollisionRadius:1,isRenderable:!0,isPushable:!0,mass:5,instantiable:!0,isNPC:!1,destructible:!1,health:1,hitCooldownTime:60,anchor:"floor",baseHeight:8,pickupDef:{type:"weapon",amount:1,weaponType:"shotgun",sounds:{activate:{guid:"ammoget",range:0},fail:{guid:"pickupfail",range:0}},activate:function(e,t){var a=t.moduleInventory.addItem(t.moduleWeapon.weapon(e.getWeaponDef(),t.getPos(),t.getFwd(),t,t,!0),!1,!0);return e.del(),a}},hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{},spriteInfo:{assetName:"weapon-pickups",sheetTex:null,sourceScale:1,glScale:.8,hasOrientations:!1,frameCoords:{1:{x:1,y:1,w:45,h:9,o:0}},frameSequences:[{name:"idle",frames:[{frame:"1",duration:60,fullBright:!1,offset:0}]}]}},"weapon-plasmapistol":{type:"weapon-plasmapistol",entityType:"pickup",isSolid:!1,solidToProjectiles:!1,collisionRadius:16,projectileCollisionRadius:1,isRenderable:!0,isPushable:!0,mass:5,instantiable:!0,isNPC:!1,destructible:!1,health:1,hitCooldownTime:60,anchor:"floor",baseHeight:8,pickupDef:{type:"weapon",amount:1,weaponType:"plasmapistol",sounds:{activate:{guid:"ammoget",range:0},fail:{guid:"pickupfail",range:0}},activate:function(e,t){var a=t.moduleInventory.addItem(t.moduleWeapon.weapon(e.getWeaponDef(),t.getPos(),t.getFwd(),t,t,!0),!1,!0);return e.del(),a}},hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{},spriteInfo:{assetName:"weapon-pickups",sheetTex:null,sourceScale:1,glScale:.8,hasOrientations:!1,frameCoords:{1:{x:1,y:1,w:45,h:9,o:0}},frameSequences:[{name:"idle",frames:[{frame:"1",duration:60,fullBright:!1,offset:0}]}]}},"weapon-plasmatest":{type:"weapon-plasmatest",entityType:"pickup",isSolid:!1,solidToProjectiles:!1,collisionRadius:16,projectileCollisionRadius:1,isRenderable:!0,isPushable:!0,mass:5,instantiable:!0,isNPC:!1,destructible:!1,health:1,hitCooldownTime:60,anchor:"floor",baseHeight:8,pickupDef:{type:"weapon",amount:1,weaponType:"plasmatest",sounds:{activate:{guid:"ammoget",range:0},fail:{guid:"pickupfail",range:0}},activate:function(e,t){var a=t.moduleInventory.addItem(t.moduleWeapon.weapon(e.getWeaponDef(),t.getPos(),t.getFwd(),t,t,!0),!1,!0);return a?(e.del(),!0):(e.lock(),!1)}},hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{},spriteInfo:{assetName:"weapon-pickups",sheetTex:null,sourceScale:1,glScale:.8,hasOrientations:!1,frameCoords:{1:{x:48,y:1,w:45,h:9,o:0}},frameSequences:[{name:"idle",frames:[{frame:"1",duration:60,fullBright:!1,offset:0}]}]}},"weapon-nettest":{type:"weapon-nettest",entityType:"pickup",isSolid:!1,solidToProjectiles:!1,collisionRadius:16,projectileCollisionRadius:1,isRenderable:!0,isPushable:!0,mass:5,instantiable:!0,isNPC:!1,destructible:!1,health:1,hitCooldownTime:60,anchor:"floor",baseHeight:8,pickupDef:{type:"weapon",amount:1,weaponType:"nettest",sounds:{activate:{guid:"ammoget",range:0},fail:{guid:"pickupfail",range:0}},activate:function(e,t){var a=t.moduleInventory.addItem(t.moduleWeapon.weapon(e.getWeaponDef(),t.getPos(),t.getFwd(),t,t,!0),!1,!0);return a?(e.del(),!0):(e.lock(),!1)}},hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{},spriteInfo:{assetName:"weapon-pickups",sheetTex:null,sourceScale:1,glScale:.8,hasOrientations:!1,frameCoords:{1:{x:48,y:1,w:45,h:9,o:0}},frameSequences:[{name:"idle",frames:[{frame:"1",duration:60,fullBright:!1,offset:0}]}]}},"weapon-rockettest":{type:"weapon-rockettest",entityType:"pickup",isSolid:!1,solidToProjectiles:!1,collisionRadius:16,projectileCollisionRadius:1,isRenderable:!0,isPushable:!0,mass:5,instantiable:!0,isNPC:!1,destructible:!1,health:1,hitCooldownTime:60,anchor:"floor",baseHeight:8,pickupDef:{type:"weapon",amount:1,weaponType:"rockettest",sounds:{activate:{guid:"ammoget",range:0},fail:{guid:"pickupfail",range:0}},activate:function(e,t){var a=t.moduleInventory.addItem(t.moduleWeapon.weapon(e.getWeaponDef(),t.getPos(),t.getFwd(),t,t,!0),!1,!0);return a?(e.del(),!0):(e.lock(),!1)}},hitEffects:{none:"none",force:"none",bullet:"bullethit_smoke",plasma:"none",explosive:"none"},validImpactActionTypes:{},spriteInfo:{assetName:"weapon-pickups",sheetTex:null,sourceScale:1,glScale:.8,hasOrientations:!1,frameCoords:{1:{x:48,y:1,w:45,h:9,o:0}},frameSequences:[{name:"idle",frames:[{frame:"1",duration:60,fullBright:!1,offset:0}]}]}}};return{get:function(){return e}}}();return t}),define("astar",["enginevars","vector2"],function(e,t){var a=function(){function t(e,t){var a=e.x,n=e.y,r=t.x,o=t.y;return a!=r?n!=o?u[n][a].moveCostDiag+u[o][r].gCost:u[n][a].moveCostOrthog+u[o][r].gCost:n!=o?a!=r?u[n][a].moveCostDiag+u[o][r].gCost:u[n][a].moveCostOrthog+u[o][r].gCost:void 0}function a(e){var t=e.x,a=e.y,n=Math.abs(t-l.x),r=Math.abs(a-l.y);u[a][t].hCost=(n+r)*c}function n(e){var t=u[e.y][e.x];t.fCost=t.gCost+t.hCost}function r(e){var t=[];for(t.push(e);"start"!=u[e.y][e.x].flag;)e=u[e.y][e.x].nodeParentIdx,t.push(e);return t.reverse()}function o(e,t){for(var a=e.occupants,n=a.length,r=0;n>r;r++)if(a[r]!=t)return!0;return!1}function i(e,i,c,d){var h=c.parentThing.realHeight;u=d;for(var p=d.length,y=0;p>y;y++)for(var x=d[y],g=x.length,v=0;g>v;v++){var b=x[v];b.nodeParentIdx={x:0,y:0},b.flag="none",b.list="none",b.gCost=0,b.hCost=0,b.fCost=0}s=e,l=i;var w=u[s.y][s.x],S=u[l.y][l.x];w.flag="start",S.flag="goal";var T=[],M=[],D=[];w.list="open",T.push(s);for(var Y=s.x,X=s.y,_=X-1;X+1>=_;_++)for(var k=Y-1;Y+1>=k;k++)if((k!=Y||_!=X)&&_>=0&&p>_){x=u[_];var g=x.length;if(k>=0&&g>k){var b=x[k];if(b.v&&b.vs>=h){var I=!1;if(w.br&&!w.dy)for(var R=w.l,C=R.length,P=0;C>P;P++){var A=R[P];if(A.mX==b.mX&&A.mY==b.mY)for(var F=A.bridges,O=F.length,E=0;O>E;E++){var q=F[E];q.verticalSpace<h&&(I=!0)}}if(!I){var B=b.fh-w.fh;if((B>=0&&f>=B||0>B&&B>=m)&&(!b.isOccupied||!o(b,c))){var N=!1;if(k!=Y&&_!=X)for(var z=_-1;_+1>=z;z++)if(!(0>z||z>=p))for(var L=k-1;k+1>=L;L++)if(!(0>L||L>=d[z].length)&&(L==k||z==_)&&L>=Y-1&&Y+1>=L){var b=d[z][L];b.v&&o(b,c)||(N=!0)}if(!N){var b=u[_][k];b.nodeParentIdx.x=s.x,b.nodeParentIdx.y=s.y,b.list="open",T.push({x:k,y:_})}}}}}}for(var j=0;j<T.length;j++){var V=T[j],H=V.x,W=V.y;if(H==Y&&W==X){var U=T.splice(j,1)[0];d[U.y][U.x].list="closed",M.push(U);break}}for(var G=T.length,j=0;G>j;j++){var K=T[j],V=d[K.y][K.x];V.gCost=t(K,V.nodeParentIdx),a(K),n(K)}for(;T.length>0;){for(var $=T[0],Z=d[$.y][$.x],G=T.length,j=0;G>j;j++){var K=T[j],V=u[K.y][K.x];V.fCost<Z.fCost&&($=K,Z=V)}for(var j=0;G>j;j++){var Q=T[j];if(Q.x==$.x&&Q.y==$.y){var U=T.splice(j,1)[0];u[U.y][U.x].list="closed",M.push(U);break}}if("goal"==Z.flag)return r($);D=[];for(var J=$.x,ee=$.y,_=ee-1;ee+1>=_;_++)for(var k=J-1;J+1>=k;k++)if((k!=J||_!=ee)&&_>=0&&p>_){var x=d[_],g=x.length;if(k>=0&&g>k){var b=d[_][k];if("closed"!=b.list&&b.v&&b.vs>=h){var I=!1;if(Z.br&&!Z.dy)for(var R=Z.l,C=R.length,P=0;C>P;P++){var A=R[P];if(A.mX==b.mX&&A.mY==b.mY)for(var F=A.bridges,O=F.length,E=0;O>E;E++){var q=F[E];q.verticalSpace<h&&(I=!0)}}if(!I){var B=b.fh-Z.fh;if((B>=0&&f>=B||0>B&&B>=m)&&(!b.isOccupied||b.isOccupied&&b.occupyingThing==c)){var N=!1;if(k!=J&&_!=ee)for(var z=_-1;_+1>=z;z++)if(!(0>z||z>=p))for(var L=k-1;k+1>=L;L++)0>L||L>=u[z].length||(L==k||z==_)&&L>=$.x-1&&L<=$.x+1&&(!u[z][L].v||b.isOccupied&&b.occupyingThing!=c)&&(N=!0);N||D.push({x:k,y:_})}}}}}for(var te=D.length,j=0;te>j;j++){var ae=D[j],ne=u[ae.y][ae.x];if("open"!=ne.list)ne.list="open",T.push(ae),ne.nodeParentIdx.x=$.x,ne.nodeParentIdx.y=$.y,ne.gCost=t(ae,ne.nodeParentIdx),a(ae),n(ae);else{var re=t(ae,$);re<ne.gCost&&(ne.nodeParentIdx.x=$.x,ne.nodeParentIdx.y=$.y,ne.gCost=re,a(ae),n(ae))}}}var oe=[];return oe.push(s),oe}var s,l,u,c=e.get("pathingBaseMovementCost"),f=e.get("maxPathNodeHeightStepUp"),m=-e.get("maxPathNodeHeightStepDown");return{aStar:i}}();return a}),define("pathfinding",["enginevars","astar"],function(e,t){var a=function(){function a(e,a,r,o,i,s,l,u,c){var f=n(e,a,i,s,u,0);if(0==f.result)return[];var m=n(r,o,i,s,u,c);if(0==m.result)return[];var d={x:f.x,y:f.y},h={x:m.x,y:m.y};if(d.x==h.x&&d.y==h.y)return[];s[d.y][d.x].debugHilight=!0,s[h.y][h.x].debugHilight=!0;for(var p=t.aStar(d,h,i,s),y=[],x=0;x<p.length;x++)y.push(s[p[x].y][p[x].x]);return y.shift(),y}function n(e,t,a,n,o,i,s){"undefined"==typeof s&&(s=[]);var l=r(e,t,a,n,o),u={x:Math.floor((e+m)/c)-o.x,y:Math.floor((t+d)/c)-o.y};if(l)return{result:!0,x:u.x,y:u.y};if(1>i)return{result:!1};for(var f=0,h=[];!l;){if(++f>i)return l=!0,{result:!1};for(var p=u.y-f;p<=u.y+f;p++)if(p>=0&&p<n.length)for(var y=u.x-f;y<=u.x+f;y++)if(y>=0&&y<n[p].length){for(var x=!1,g=0;g<h.length;g++)(h[g].x==y||h[g].y==p)&&(x=!0);if(y==u.x&&p==u.y&&(x=!0),!x){if(r((y+o.x)*c-m,(p+o.y)*c-d,a,n,o))return{result:!0,x:y,y:p};h.push({x:y,y:p})}}}}function r(e,t,a,n,r){var o=a.parentThing.realHeight,i={x:Math.floor((e+m)/c)-r.x,y:Math.floor((t+d)/c)-r.y};if(i.y<0||i.y>=n.length)return!1;if(i.x<0||i.x>=n[i.y].length)return!1;var s=n[i.y][i.x];if(!s.v)return!1;if(s.vs<o)return!1;if(s.occupants.length)for(var l=0;l<s.occupants.length;l++)if(s.occupants[l]!=a)return!1;return!0}function o(e,t,a){return{x:Math.floor(e*c-m)-a.x,y:Math.floor(t*c-d)-a.y}}function i(e,t,a,n,r){s(a[t][e],n,r)}function s(e,t,a){var n=e.occupants;if(a){for(var r=n.length,o=0;r>o;o++)if(n[o]==t)return;n.push(t)}else for(var o=0;o<n.length;o++)n[o]==t&&(n.splice(o,1),o--)}function l(e,t,a,n,r,o,s,l){for(var u=Math.floor((e+m)/c)-n.x,f=Math.floor((t+d)/c)-n.y,h=0,p=f-o;f+o>=p;p++)if(!(0>p||p>=a.length))for(var y=u-o;u+o>=y;y++)0>y||y>=a[p].length||(i(y,p,a,r,s),h++)}function u(e){f=e,m=Math.round(f.x/2),d=Math.round(f.y/2)}var c=e.get("pathNodeSeparation"),f=(Math.round(c),e.get("worldSize")),m=Math.round(f.x/2),d=Math.round(f.y/2);return{init:u,getPath:a,enterLeaveNodesInRange:l,getClosestValidNode:n,nodeIndexToWorldCoord:o}}();return a}),define("movement",["enginevars","time","pathfinding","vector2","maths"],function(e,t,a,n,r){var o=function(){function e(e,o,i,s){var l={p:e.parentThing.p,o:e.parentThing.fwd,deltaTime:t.getDeltaTime(),path:[],navMesh:o,graphOffset:s,maxNearestNodeOffset:e.maxNearestNodeOffset,maxChooseRandomGoalAttempts:5,worldSize:i,destPatrolNode:0,waitElapsed:0,rePathDelay:0,rePathDelayTime:120,nodeSnapThreshold:2,orientSnapThreshold:.0174533,nodeExitRadius:1,nodeEntryRadius:0,goalRadius:0,minGoalRadius:0,parentNpc:e,pathGoalCoord:{x:0,y:0},destCoord:{x:0,y:0},journeyVector:{x:0,y:0},normVecToDest:{x:0,y:0},lastFramePos:{x:0,y:0},targetOrient:{x:e.parentThing.fwd.x,y:e.parentThing.fwd.y},moveSpeed:e.moveSpeed,panicSpeed:e.panicMoveSpeed,turnSpeed:e.turnSpeed,inMotion:!0,prevInMotion:!0,distFromPlayer:0,parentHeight:e.parentThing.realHeight};return l.setPos=function(e){var t=l.p;t.x=e.x,t.y=e.y},l.setOrient=function(e){var t=l.o;t.x=e.x,t.y=e.y},l.rotateTowardOrientation=function(){var e=n.signedRadiansBetweenVectors(l.o,l.targetOrient),t=Math.abs(e),a=l.turnSpeed*l.deltaTime,r=null;r=a>t?l.targetOrient:e>0?n.rotateByRadians(l.o,3.14159>t?a:-a):n.rotateByRadians(l.o,3.14159>t?-a:a),l.setOrient(r)},l.facingTargetOrient=function(){var e=l.o,t=l.orientSnapThreshold,a=l.targetOrient;return e.x+t>a.x&&e.x-t<a.x&&e.y+t>a.y&&e.y-t<a.y},l.exitLocalNodes=function(){a.enterLeaveNodesInRange(l.p.x,l.p.y,l.navMesh,l.graphOffset,l.parentNpc,l.nodeExitRadius,!1,!1)},l.enterLocalNodes=function(){a.enterLeaveNodesInRange(l.p.x,l.p.y,l.navMesh,l.graphOffset,l.parentNpc,l.nodeEntryRadius,!0,!1)},l.patrol=function(){var e=l.parentNpc.pn;if(e.length>0){var t=e[l.destPatrolNode],a=l.destCoord,n=t.p,r=l.p;a.x=n.x,a.y=n.y;var o=n.x-r.x,i=n.y-r.y,s=Math.sqrt(o*o+i*i);if(s<l.nodeSnapThreshold){if(l.waitElapsed<t.waitTime)return void(l.waitElapsed+=l.deltaTime);l.destPatrolNode==e.length-1?l.destPatrolNode=0:l.destPatrolNode++,t=e[l.destPatrolNode],l.waitElapsed=0}l.seek()}},l.rePath=function(){var e=(l.p,l.pathGoalCoord),t=a.getPath(l.p.x,l.p.y,e.x,e.y,l.parentNpc,l.navMesh,l.worldSize,l.graphOffset,l.maxNearestNodeOffset);return t.length>0?(l.path=t,!0):!1},l.pathFollow=function(){var e=l.path;if(e.length>0){var t=e[0];l.destCoord.x=t.x,l.destCoord.y=t.y;var a=t.x-l.p.x,r=t.y-l.p.y,o=Math.sqrt(a*a+r*r);if(o<l.nodeSnapThreshold){if(t.br&&e.length>1){var i=e[1];if(i.vs<l.parentHeight)return;for(var s=t.l,u=s.length,c=0;u>c;c++){var f=s[c];if(f.mX==i.mX&&f.mY==i.mY)for(var m=f.bridges,d=m.length,h=0;d>h;h++){var p=m[h];if(p.verticalSpace<l.parentHeight)return}}}e.shift(),0===e.length&&l.autoReChooseRandomGoal&&l.chooseRandomGoal(l.goalRadius,l.minGoalRadius)}l.seek()}else l.targetOrient=n.normalise(n.vectorToDestination(l.p,l.parentNpc.playerPos))},l.setDestToNearestValidNode=function(){var e=l.pathGoalCoord,t=a.getClosestValidNode(e.x,e.y,l.parentNpc,l.navMesh,l.graphOffset,l.maxNearestNodeOffset),n=a.nodeIndexToWorldCoord(t.x,t.y,l.graphOffset);n.result&&l.setPathGoal(n)},l.seek=function(){if(!l.parentNpc.parentThing.isStatusEffectActive("net")){var e=l.p,t=n.vectorToDestination(e,l.destCoord),a=n.normalise(t),r=l.parentNpc.currentState==l.parentNpc.states.panic?l.panicSpeed:l.moveSpeed,o=n.scaleVector(a,r*l.deltaTime);l.targetOrient=a,l.setPos(n.sumVectors(e,o))}},l.chooseRandomGoal=function(e,t){l.goalRadius=e,l.minGoalRadius=t;var n=l.p,o=a.getClosestValidNode(n.x,n.y,l.parentNpc,l.navMesh,l.graphOffset,l.maxNearestNodeOffset),i=l.navMesh,s=i.length,u=i[0].length,c=o.x,f=o.y,m=i[f][c],d=c-e,h=f-e,p=c+e,y=f+e,x=c-t,g=f-t,v=c+t,b=f+t;d=0>d?0:d,h=0>h?0:h,p=p>u?u-1:p,y=y>s?s-1:y,x=0>x?0:x,g=0>g?0:g,v=v>u?u-1:v,b=b>s?s-1:b;for(var x=o.x-t,g=o.y-t,w=!1,S=0;!w;){if(S++>l.maxChooseRandomGoalAttempts){w=!0,console.log("NPC failed to find a random goal");break}for(var T=[],M=h;y>M;M++)if(!(M>=g&&b>=M))for(var D=i[M],Y=d;p>Y;Y++)if(!(Y>=x&&v>=Y)){var X=D[Y];X.v&&T.push(X)}m=T[r.randomIntInRange(0,T.length-1)];var _=a.getPath(l.p.x,l.p.y,m.x,m.y,l.parentNpc,l.navMesh,l.worldSize,l.graphOffset,l.maxNearestNodeOffset);_.length>0&&(w=!0)}l.setPathGoal({x:m.x,y:m.y}),l.rePath()},l.setPathGoal=function(e){l.pathGoalCoord.x=e.x,l.pathGoalCoord.y=e.y},l.setOrientGoal=function(e){var t=n.normalise(n.vectorToDestination(l.p,e));l.targetOrient.x=t.x,l.targetOrient.y=t.y},l.setAutoReChooseRandomGoal=function(e){l.autoReChooseRandomGoal=e},l.update=function(){l.deltaTime=t.getDeltaTime();var e=l.p;l.rePathDelay>0&&(l.rePathDelay-=l.deltaTime);var a=Math.abs(e.x-l.lastFramePos.x),n=Math.abs(e.y-l.lastFramePos.y);l.prevInMotion=l.inMotion,l.inMotion=Math.sqrt(a*a+(n+n))>0,l.rotateTowardOrientation(),l.lastFramePos.x=e.x,l.lastFramePos.y=e.y},l}return{movement:e}}();return o}),define("npc",["enginevars","thingdefs","time","weapon","weapondefs","vector2","player","collision","movement","maths","impactactiondefs","doors","globalevents","audio"],function(e,t,a,n,r,o,i,s,l,u,c,f,m,d){var h=function(){function t(t,r,c,x,g,v,b,w){var S={alive:!0,g:p++,states:{idle:"idle",patrol:"patrol",advance:"advance",aim:"aim",attack:"attack",special:"special",hit:"hit",panic:"panic",dying:"dying",dead:"dead"},debug:{stateIdx:0},playerPos:i.getPos(),deadHeight:r.npcDef.deadHeight,currentState:"idle",prevState:"idle",nextState:"idle",switchToNewState:!1,causeOfDeath:"",framesSinceLastStateChange:0,framesSinceLastFiredShot:0,afterAimFrames:r.npcDef.afterAimFrames,parentThing:t,halfFOV:r.halfFOV,sceneData:x,moveSpeed:r.npcDef.moveSpeed,turnSpeed:r.npcDef.turnSpeed,maxVisualRange:r.npcDef.maxVisualRange,hearingAcuity:r.npcDef.hearingAcuity,alerted:!1,meleeDistance:r.npcDef.meleeDistance,alertRadius:r.npcDef.alertRadius,pn:g,prevColliding:!1,weapon:null,weaponZOffset:t.baseHeight*r.npcDef.weaponOffsetFrac,weaponPos:{x:0,y:0,z:0},specialWeapon:null,attackDelay:r.npcDef.attackDelay,attackDelayTime:r.npcDef.attackDelay,attackInterval:{min:r.npcDef.attackIntervalMin,max:r.npcDef.attackIntervalMax},attackedSinceStateChange:!1,timeUntilNextAttack:r.npcDef.attackIntervalMin,aimTime:0,aimTimeMin:r.npcDef.aimTimeMin,aimTimeMax:r.npcDef.aimTimeMax,maxNearestNodeOffset:r.npcDef.maxNearestNodeOffset,minPanicRepathFrames:r.npcDef.minPanicRepathFrames,maxPanicRepathFrames:r.npcDef.maxPanicRepathFrames,panicRepathTimer:0,panicMoveSpeed:r.npcDef.moveSpeed*r.npcDef.panicSpeedMult,panicRadius:r.npcDef.panicRadius,minPanicRadius:r.npcDef.minPanicRadius,minWanderRepathFrames:r.npcDef.minWanderRepathFrames,maxWanderRepathFrames:r.npcDef.maxWanderRepathFrames,wanderRepathTimer:0,wanderMoveSpeed:r.npcDef.moveSpeed*r.npcDef.wanderSpeedMult,wanderRadius:r.npcDef.wanderRadius,minWanderRadius:r.npcDef.minWanderRadius,crushDamageCooldown:e.get("crushDamageCooldown"),crushDamageTimer:0,crushDamageAmount:e.get("crushDamageAmount"),isBeingCrushed:!1,doorTriggerDist:r.npcDef.doorTriggerDist,canSeePlayer:!1,sounds:r.npcDef.sounds};return S.movement=l.movement(S,v,b,w),S.getPos=function(){return S.parentThing.getPos()},S.getFwd=function(){return S.parentThing.getFwd()},S.getHeadPos=function(){return S.parentThing.getHeadPos()},S.getWeaponPos=function(){return S.weaponPos},S.isDeadOrDying=function(){return S.currentState==S.states.dead||S.currentState==S.states.dying},S.checkForCollisions=function(){var e=s.checkCollisionsNpcNpcs(S,S.sceneData.t),t=S.movement.p;if(e.result)for(var a=e.others,n=0;n<a.length;n++){var r=a[n],i=r.movement.p,l=i.x-t.x,u=i.y-t.y,c=Math.sqrt(l*l+u*u),f=-(c-S.parentThing.colRad-r.parentThing.colRad),m=f/2,d=.01*m,h=o.scaleVector(o.normalise(o.vectorToDestination(t,i)),m+d);i.x+=h.x,i.y+=h.y;var p=o.scaleVector(o.normalise(o.vectorToDestination(i,t)),m+d);S.movement.p.x+=p.x,S.movement.p.y+=p.y}S.prevColliding=S.colliding,S.colliding=e.result},S.checkForStuck=function(){S.colliding&&S.prevColliding&&console.log("NPC ["+S.g+"] is stuck!")},S.checkPlayerInView=function(){var e=S.sceneData;S.canSeePlayer=s.lineOfSight(S.parentThing,i,e.s,e.t).result},S.checkForPlayer=function(){var e=S.parentThing,t=o.vectorToDestination(e.p,S.playerPos),a=o.getMagnitude(t),n=o.radiansBetweenVectors(t,e.fwd);if(a<S.maxVisualRange&&n<S.halfFOV){var r=S.sceneData;if(s.lineOfSight(e,i,r.s,r.t).result)return void(S.alerted=!0)}},S.hearSound=function(e){var t=e.affectedSectors,a=t.length,n=e.soundRange,r=S.parentThing.parentSector.g;for(as=0;as<a;as++){var o=t[as];if(o.guid===r)return void(n*S.hearingAcuity>o.distFromSource&&(S.alerted=!0))}},S.tryOpenDoor=function(){f.toggleNearby(S.parentThing.p,!1,S.doorTriggerDist)},S.patrol=function(){S.pn.length>0&&S.movement.patrol()},S.wander=function(){S.wanderRepathTimer-=d,S.wanderRepathTimer<=0&&(S.wanderRepathTimer=u.randomIntInRange(S.minWanderRepathFrames,S.maxWanderRepathFrames),S.movement.chooseRandomGoal(S.wanderRadius,S.minWanderRadius)),S.movement.pathFollow()},S.advance=function(){if(S.playerAlive&&o.getMagnitude(o.vectorToDestination(S.movement.p,S.playerPos))>S.meleeDistance){var e=S.movement.rePath();e?(S.movement.setPathGoal(S.playerPos),S.movement.pathFollow()):0===S.movement.path.length?S.wander():S.movement.pathFollow()}},S.tryAttack=function(){S.playerAlive&&(S.timeUntilNextAttack-=d,S.timeUntilNextAttack<=0&&(S.setNextState(S.states.aim),S.timeUntilNextAttack=u.randomIntInRange(S.attackInterval.min,S.attackInterval.max)))},S.checkPanic=function(){S.currentState!=S.states.panic&&S.parentThing.isStatusEffectActive("fire")?S.setNextState(S.states.panic):S.currentState!=S.states.panic||S.parentThing.isStatusEffectActive("fire")||S.setNextState(S.states.advance)},S.panic=function(){S.panicRepathTimer-=d,S.panicRepathTimer<=0&&(S.panicRepathTimer=u.randomIntInRange(S.minPanicRepathFrames,S.maxPanicRepathFrames),S.movement.chooseRandomGoal(S.panicRadius,S.minPanicRadius)),S.movement.pathFollow()},S.getRandomSound=function(e){if(S.sounds.hasOwnProperty(e)){var t=S.sounds[e];if(t.length>0)return t[u.randomIntInRange(0,t.length-1)]}else console.log('ERROR: MOD_NPC.getRandomSound : soundEvent "'+e+'" not recognised.')},S.checkCrush=function(){var e=S.parentThing,t=e.parentSector,a=t.fh,n=t.ch,r=e.realHeight,o=n-a;return t.crush?void(0==o?(e.projectileHit(e.health,0,0),t.isCrushingThing=!0):r>o?(S.isBeingCrushed=!0,t.isCrushingThing=!0,(S.crushDamageTimer-=d)<=0&&(S.crushDamageTimer=S.crushDamageCooldown,e.projectileHit(S.crushDamageAmount,0,0))):(S.crushDamageTimer=0,t.isCrushingThing=!1)):(S.isBeingCrushed=!1,S.crushDamageTimer=0,void(t.isCrushingThing=!1))},S.aimAtPlayer=function(){S.aimTime+=d,S.movement.setOrientGoal(S.playerPos),(S.movement.facingTargetOrient()&&S.aimTime>S.aimTimeMin||S.aimTime>S.aimTimeMax)&&(S.aimTime=0,S.setNextState(S.states.attack))},S.lookAtPlayer=function(){S.movement.setOrientGoal(S.playerPos)},S.attack=function(){if(!S.attackedSinceStateChange&&(S.movement.setOrientGoal(S.playerPos),S.attackDelay-=d,S.attackDelay<=0)){var e=s.lineOfSight(S.parentThing,i,S.sceneData.s,S.sceneData.t);e.result&&(S.weapon.fire(),S.weapon.unlock()),S.attackDelay=S.attackDelayTime,S.attackedSinceStateChange=!0}},S.checkHealth=function(){var e=S.parentThing;e.health!=e.prevHealth&&S.setNextState("hit"),e.health<=0&&S.setNextState("dying")},S.setStatusEffect=function(e){S.parentThing.setStatusEffect(e)},S.getWeaponZOffset=function(){return S.weaponZOffset},S.getCollisionRadius=function(){return S.parentThing.colRad},S.stateActions=function(){switch(S.currentState){case S.states.idle:S.checkPanic(),S.checkPlayerInView(),S.checkForPlayer(),S.checkCrush(),S.checkHealth(),S.checkForCollisions(),S.checkForStuck(),S.alerted&&S.setNextState(S.states.advance),S.pn.length>0&&S.setNextState(S.states.patrol);break;case S.states.patrol:S.checkPanic(),S.tryOpenDoor(),S.checkCrush(),S.patrol(),S.checkPlayerInView(),S.checkForPlayer(),S.checkHealth(),S.checkForCollisions(),S.checkForStuck();var e=S.movement;e.inMotion&&!e.prevInMotion?S.parentThing.sprite.switchSequence("walk"):!e.inMotion&&e.prevInMotion&&S.parentThing.sprite.switchSequence("idle"),S.alerted&&S.setNextState(S.states.advance);break;case S.states.advance:S.checkPanic(),S.tryOpenDoor(),S.checkCrush(),S.checkPlayerInView(),S.advance(),S.checkHealth(),S.checkForCollisions(),S.checkForStuck(),S.tryAttack();var e=S.movement;e.inMotion&&!e.prevInMotion?S.parentThing.sprite.switchSequence("walk"):!e.inMotion&&e.prevInMotion&&S.parentThing.sprite.switchSequence("idle"),S.movement.inMotion||S.lookAtPlayer();break;case S.states.aim:S.checkPanic(),S.checkCrush(),S.checkHealth(),S.checkPlayerInView(),S.checkForCollisions(),S.checkForStuck(),S.aimAtPlayer();break;case S.states.attack:S.checkPanic(),S.checkCrush(),S.checkHealth(),S.checkPlayerInView(),S.checkForCollisions(),S.checkForStuck(),S.attack(),S.weapon.firingShotThisFrame?(S.parentThing.sprite.switchSequence("firing"),S.framesSinceLastFiredShot=0):(S.attackedSinceStateChange&&S.framesSinceLastFiredShot>S.parentThing.sprite.getCurrentSequenceDuration()&&S.parentThing.sprite.switchSequence("aiming"),S.framesSinceLastFiredShot++),S.attackedSinceStateChange&&S.framesSinceLastFiredShot>S.parentThing.sprite.getCurrentSequenceDuration()+S.afterAimFrames&&S.weapon.currentState==S.weapon.states.idle&&S.setNextState(S.states.advance);break;case S.states.special:S.checkPanic(),S.checkCrush(),S.checkHealth(),S.checkForCollisions(),S.checkPlayerInView(),S.checkForStuck();
break;case S.states.hit:S.checkPanic(),S.checkCrush(),S.checkHealth(),S.checkForCollisions(),S.checkForStuck();var t=S.parentThing.sprite;S.framesSinceLastStateChange>t.frameSequences[t.currentSequence].duration&&S.setNextState("advance");break;case S.states.panic:S.panic(),S.checkCrush(),S.checkPanic(),S.checkHealth(),S.checkForCollisions(),S.checkForStuck();break;case S.states.dying:var t=S.parentThing.sprite;S.framesSinceLastStateChange>t.frameSequences[t.currentSequence].duration&&S.setNextState("dead");break;case S.states.dead:break;default:console.log("ERROR: MOD_NPC.stateActions : state not recognised")}S.switchToNewState&&(S.switchToNewState=!1,S.switchState(S.nextState))},S.setNextState=function(e){S.states.hasOwnProperty(e)&&(S.nextState=e,S.switchToNewState=!0)},S.switchState=function(e){if(console.log("NPC "+S.g+" switching to state "+e),S.states.hasOwnProperty(e)&&e!==S.currentState){S.prevState=S.currentState,S.currentState=e,S.framesSinceLastStateChange=0,S.attackedSinceStateChange=!1,S.weapon.switchState(S.weapon.states.idle),S.prevState===S.states.panic&&S.movement.setAutoReChooseRandomGoal(!1);var t=S.parentThing,a=t.sprite,n=S.states;switch(S.currentState){case n.idle:a.switchSequence("idle"),t.isSolid=!0;break;case n.patrol:a.switchSequence("walk");break;case n.advance:a.switchSequence("walk");break;case n.panic:a.switchSequence("fastwalk"),S.movement.setAutoReChooseRandomGoal(!0);break;case n.aim:a.switchSequence("aiming");break;case n.attack:a.switchSequence("aiming");break;case n.special:a.switchSequence("special");break;case n.hit:a.switchSequence("hit");break;case n.dying:switch(t.parentSector.isCrushingThing=!1,S.movement.exitLocalNodes(),S.causeOfDeath=u.randomIntInRange(0,2),S.causeOfDeath){case 0:a.switchSequence("dying");break;case 1:a.switchSequence("headshot");break;case 2:a.switchSequence("gibbing")}t.changeHeight(S.deadHeight),t.useZBufferOffset=!0,t.solidToThings=!1;break;case n.dead:switch(S.causeOfDeath){case 0:a.switchSequence("dead");break;case 1:a.switchSequence("headshotted");break;case 2:a.switchSequence("gibbed")}S.alive=!1;break;default:console.log('ERROR: npc.switchState : transition behaviour not defined for the state "'+e+'"')}}else console.log('ERROR: npc.switchState : state "'+e+'" not recognised')},S.updateWeaponPos=function(){S.weaponPos.x=S.movement.p.x,S.weaponPos.y=S.movement.p.y,S.weaponPos.z=S.movement.p.z+S.weaponZOffset},S.update=function(e){d=a.getDeltaTime(),S.sceneData=e,S.playerPos=i.getPos(),S.playerAlive=i.getAlive(),S.updateWeaponPos(),S.framesSinceLastStateChange+=d,S.movement.update(),S.weapon.update(e),S.stateActions(),S.isBeingCrushed=!1},S.updateWeaponPos(),S.weapon=n.weapon("undefined"!=typeof c.w?h[c.w]:r.npcDef.defaultWeaponType,S.movement.p,S.movement.o,S,i,!1),m.subscribe(y.funcsound,S.hearSound),S}var d=a.getDeltaTime(),h=r.get(),p=0,y=(c.getKeys(),m.getEventKeys());return{npc:t}}();return h}),define("pickups",["enginevars","weapondefs","audio"],function(e,t,a){var n=function(){function e(e,t,o){var i={guid:n++,t:t.type,amount:t.amount,sounds:t.sounds,parentThing:e,alive:!0};return i.activate=function(e,n){var r=!1,o=null;return o=i.sounds.fail,i.locked||(r=t.activate(e,n),r===!0&&(o=i.sounds.activate)),null!==o&&a.playSound(o.guid,1,i.parentThing.p,o.range,void 0,!1,!1),r},i.lock=function(){i.locked=!0},i.unlock=function(){i.locked=!1},i.del=function(){i.parentThing.del()},("weapon"===t.type||"ammo"===t.type)&&(i.weaponType=t.weaponType,i.weaponAmmoAmount="undefined"!=typeof o?o:t.defaultAmmoAmount,i.getWeaponDef=function(){return r.hasOwnProperty(i.weaponType)?r[i.weaponType]:void console.log('ERROR: MOD_Pickups.pickup : No weapondef for weapon type "'+i.weaponType+'".')}),i}var n=0,r=t.get();return{pickup:e}}();return n}),define("destructible",["enginevars","collision","vector2","time"],function(e,t,a,n){var r=function(){function e(e,r,o,i,s){var l={alive:!0,dying:!1,dyingTimer:0,health:i.health,parentThing:r,causeDamage:s.causeDamage,damageDone:!1,sceneThings:o,playerRef:e,clearImpactEffectsOnDestroy:s.clearImpactEffectsOnDestroy};return l.causeDamage&&(l.damageTypes=s.damageTypes,l.damageAmount=s.damageAmount,l.damageRadius=s.damageRadius,l.damageDelay=s.damageDelay),l.kill=function(){l.parentThing.sprite.switchSequence("destroy"),l.dying=!0,l.clearImpactEffectsOnDestroy===!0&&l.parentThing.clearImpactActions()},l.destroy=function(){l.parentThing.sprite.switchSequence("destroyed"),l.dying=!1,l.alive=!1,l.parentThing.del()},l.doDamage=function(){for(var e=t.collidingDestructiblesInRadius(l.playerRef,l.sceneThings,l.parentThing.p,l.damageRadius),n=e.length,r=0;n>r;r++)for(var o=e[r],i=l.damageTypes,s=i.length,u=0;s>u;u++)switch(i[u]){case"explosive":var c="player"===o.t?o.getPos():o.p,f=a.vectorToDestination(l.parentThing.p,c);o.projectileHit(l.damageAmount,f.x,f.y);break;case"fire":break;default:console.log("ERROR: MOD_Destructible.destroy : unrecognised damage type!")}},l.checkHealth=function(){l.alive===!0&&l.dying===!1&&l.health<=0&&l.kill()},l.update=function(e){l.alive!==!1&&(l.sceneThings=e,l.checkHealth(),l.dying&&(l.dyingTimer+=n.getDeltaTime(),s.causeDamage&&!l.damageDone&&l.dyingTimer>l.damageDelay&&(l.doDamage(),l.damageDone=!0),l.dyingTimer>l.parentThing.sprite.frameSequences[l.parentThing.sprite.currentSequence].duration&&l.destroy()))},l}return{destructible:e}}();return r}),define("things",["enginevars","assets","sprite","thingdefs","npc","time","collision","pickups","destructible","impactactiondefs","vector2","audio"],function(e,t,a,n,r,o,i,s,l,u,c,f){var m=function(){function m(e,t,a,n){for(var r=[],o=t.x-n,s=t.y-n,l=t.x+a-n,u=t.y+a-n,c=l>o?o:l,f=u>s?s:u,m=Math.abs(l-o),d=Math.abs(u-s),h=e.length,p=0;h>p;p++){var y=e[p];i.intersectsRectWithRectCoords(c,f,m,d,y.b.x,y.b.y,y.b.w,y.b.h)===!0&&r.push(y)}return r}function d(e,n,o,u){var d=x[n.t],h=n.p,p={alive:!0,isDead:!1,isCreature:n.isCreature,isSolid:d.isSolid,solidToProjectiles:d.solidToProjectiles,solidToThings:d.isSolid,isRenderable:d.isRenderable,isPushable:d.isPushable,g:e,player:u,t:d.type,entityType:d.entityType,isNPC:d.isNPC,p:{x:h.x,y:h.y,z:h.z},prevPos:{x:h.x,y:h.y,z:h.z},fwd:{x:n.o.x,y:n.o.y},colBBox:{x:0,y:0,w:0,h:0},mass:d.mass,invMass:1/d.mass,velocity:{x:0,y:0},nextVelocity:{x:0,y:0},colRad:d.collisionRadius,halfColRad:Math.round(d.collisionRadius/2),collidingWithWall:!1,projectileColRad:d.projectileCollisionRadius,anchor:d.anchor,anchorHeight:n.anchorHeight,baseHeight:d.baseHeight,realHeight:d.baseHeight,destructible:d.destructible,hitEffects:d.hitEffects,effectOffsetFrac:d.effectOffsetFrac,impactActions:[],statusEffects:{},statusEffectKeys:M,useZBufferOffset:!1,pcSectors:[],renderData:{},renderDataSet:!1,validImpactActionTypes:d.validImpactActionTypes},y=p.colBBox,D=p.colRad,Y=p.p,X=p.halfColRad;y.x=Math.round(Y.x-X),y.y=Math.round(Y.y-X),y.w=D,y.w=D,p.destructible&&(p.hitCooldown=0,p.hitCooldownTime=d.hitCooldownTime,p.health=d.health,p.prevHealth=p.health,p.idealAimPointZOffset=d.idealAimPointZOffset,p.isNPC||(p.destructibleThing=l.destructible(p.player,p,o.t,d,d.destructibleDef))),p.isPushable&&(p.forceVec={x:0,y:0},p.applyForce=function(e,t){var a=p.nextVelocity,n=p.invMass;a.x+=e*n*S,a.y+=t*n*S});var _=d.spriteInfo;_.sheetTex=t.get(_.assetName),p.sprite=a.sprite(_,p);var k=o.s;p.parentSector=null;for(var I=0;I<k.length;I++)if(i.pointInPolygon(p.p,k[I].l,k[I].b)){var R=k[I];null!=p.parentSector?(p.parentSector=R,p.ll=R.ll):(p.parentSector=R,p.ll=R.ll)}null==p.parentSector,p.getHitEffect=function(e){var t=p.hitEffects;return t.hasOwnProperty(e)?t[e]:t.none},p.getPos=function(){return p.p},p.getVelocity=function(){return p.velocity},p.getFwd=function(){var e=p.fwd;return{x:e.x,y:e.y}},p.getHeadPos=function(){var e=p.p;return{x:e.x,y:e.y,z:e.z+p.realHeight}},p.getPotentiallyCollidingSectors=function(e){var t=e.length,a=p.pcSectors;a.length=0;for(var n=0;t>n;n++){var r=e[n];i.intersectsRectWithRect(p.colBBox,r.b)&&a.push(r)}},p.getValidImpactActionTypes=function(){return p.validImpactActionTypes},p.getEffectSpriteScaler=function(e){for(var t=Object.keys(p.validImpactActionTypes),a=0;a<t.length;a++){var n=t[a];if(-1!==e.indexOf(n))return p.validImpactActionTypes[n].spriteScale}return 1},p.checkCollisions=function(e){for(var t=p.p,a=i.checkCollisionsThings(p.p,p.nextVelocity,p.colRad,e.t),n=a.length,r=0;n>r;r++){var o=a[r];if(p!==o){var s,l=o.p,u=l.x-t.x,f=l.y-t.y,d=Math.sqrt(u*u+f*f),h=-(d-p.colRad-o.colRad),y=o.nextVelocity;s=h;var x=c.scaleVector(c.normalise(c.vectorToDestination(t,l)),s);y.x+=x.x,y.y+=x.y}}var g=c.getMagnitude(p.nextVelocity),v=m(e.s,p.p,p.nextVelocity,p.colRad),b=i.getEntityGeomCollisionResolution(p.p,p.nextVelocity,p.getHeadPos(),v,p.colRad,null,null,null,null,0);p.nextVelocity.x=b.x-p.p.x,p.nextVelocity.y=b.y-p.p.y,p.collidingWithWall=b.result,c.getMagnitude(p.nextVelocity)>g&&(p.nextVelocity=c.scaleVector(c.normalise(p.nextVelocity),g))},p.update=function(e,t){var a=p.p,n=p.prevPos;if(a.x!==n.x||a.y!==n.y){var r=p.halfColRad;y.x=Math.round(a.x-r),y.y=Math.round(a.y-r),p.getPotentiallyCollidingSectors(t.s)}if(p.isNPC&&p.npc.update(t),p.destructible&&!p.isNPC&&(p.destructibleThing.update(t.t),p.destructibleThing.alive||p.leavesCorpse!==!1||p.del()),p.isPushable){var o=p.velocity,i=p.nextVelocity;if(c.getMagnitude(i)>w){var s=c.scaleVector(c.normalise(i),w);i.x=s.x,i.y=s.y}i.x*=v,i.y*=v}if(p.isSolid&&p.checkCollisions(t),p.isPushable){var a=p.p,n=p.prevPos;o.x=i.x,o.y=i.y,n.x=a.x,n.y=a.y,a.x+=o.x,a.y+=o.y}p.getSectorProps(t.s),p.sprite.update(e),p.hitCooldown-=T,p.hitCooldown<0&&(p.hitCooldown=0),p.destructible&&(p.prevHealth=p.health)},p.getSectorProps=function(e){for(var t=p.p,a=p.prevPos,n=0;n<e.length;n++)if(i.pointInPolygon(t,e[n].l,e[n].b)){var r=e[n];p.parentSector=r,p.ll=r.ll,"floor"==p.anchor?p.p.z=r.fh:"ceiling"==p.anchor&&(p.p.z=r.ch-p.realHeight)}null===p.parentSector&&(t.x=a.x,t.y=a.y)},p.playSound=function(e){f.playSound(e.guid,1,p.p,e.rangePrimary,e.rangeSecondary,!0,!1)},p.projectileHit=function(e,t,a){if(p.hitCooldown=p.hitCooldownTime,p.damageByAmount(e),p.destructible&&!p.isNPC&&(p.destructibleThing.health-=e),p.isPushable===!0){var n=e*S;n>b&&(n=b),forceVec=c.scaleVector(c.normalise({x:t,y:a}),n),p.applyForce(forceVec.x,forceVec.y)}p.isNPC&&p.npc.alive===!0&&p.npc.state!==p.npc.states.dying&&(p.playSound(p.npc.getRandomSound("hurt")),p.playSound(p.npc.getRandomSound("impact")))},p.damageByAmount=function(e){p.prevHealth=p.health,p.health-=e},p.changeHeight=function(e){p.realHeight=e},p.setStatusEffect=function(e,t){p.statusEffects.hasOwnProperty(e)&&(p.statusEffects[e]=t)},p.isStatusEffectActive=function(e){return p.statusEffects.hasOwnProperty(e)?p.statusEffects[e]:void 0},p.clearImpactActions=function(){for(var e=0;e<p.impactActions.length;e++)p.impactActions[e].kill()},p.del=function(){p.alive=!1,p.isSolid=!1,p.solidToThings=!1,p.sprite.kill(),p.clearImpactActions()},p.isNPC&&(p.npc=r.npc(p,d,n,o,n.pn,o.pn,o.size,o.graphOffset)),"pickup"===p.entityType&&(p.pickup=s.pickup(p,d.pickupDef));for(var C=M.length,P=0;C>P;P++)p.statusEffects[M[P]]=!1;g.push(p)}function h(e){for(var t=0;t<g.length;t++)if(g[t].g===e)return void g.splice(t,1)}function p(e,t,a){var n=0;g=[],thingsLen=e.length;for(var r=0;r<thingsLen;r++){var o=e[r],i=x[o.t];i.instantiable&&d(n++,o,t,a)}}function y(e,t){T=o.getDeltaTime();for(var a=0;a<g.length;a++){var n=g[a];n.update(e,t),n.alive||g.splice(a,1)}}var x=n.get(),g=[],v=(e.get("propCollisionRadius"),e.get("pushableFriction")),b=(e.get("minValidForce"),e.get("maxForceMagnitude")),w=e.get("maxPushVelocity"),S=e.get("pushForceBaseMultiplier"),T=o.getDeltaTime(),M=u.getKeys();return{init:p,update:y,getThings:function(){return g},deleteThingByGUID:h}}();return m}),define("triggeractions",["enginevars","pathnode","collision","impactactions","impactactiondefs"],function(e,t,a,n,r){var o=function(){var e=Math.abs,o=Math.round,i=r.get(),s={immediate:"immediate",enter:"enter",actionbutton:"actionbutton"},l={none:"none",leave:"leave"},u={changelevel:{entityType:"globals",params:{targetLevel:"int",targetPlayerStart:"string"},internalParams:[],eventCallback:function(e,t,a,n,r,o){return r.funcSwitchLevel(n.targetLevel,n.targetPlayerStart),!0}},savegame:{entityType:"globals",params:{checkpointId:"int"},internalParams:[],eventCallback:function(e,t,a,n,r,o){return r.funcSaveGame(),!0}},changesectorfloorheight:{entityType:"sectors",params:{targetHeight:"int",speed:"float"},internalParams:{},eventCallback:function(a,n,r,o,i,s){var l=!1,u=o.targetHeight>r.fh?1:-1,c=o.speed*u*s,f=e(c),m=e(o.targetHeight-r.fh);return f>=m?(r.fh=o.targetHeight,l=!0):r.fh+=c,t.updateVerticalSpaceInNodes(r.pn,r.bpn,r.fh,r.ch-r.fh,r.g),l}},updown:{entityType:"sectors",params:{topHeight:"int",bottomHeight:"int",speed:"float",moveFloor:"int",moveCeiling:"int"},internalParams:{moveDir:1,crushingSpeedMult:.2},eventCallback:function(e,a,n,r,o,i){var s=!1,l=r.speed;n.isCrushingThing&&(l*=o.crushingSpeedMult);var u=o.moveDir*l;r.moveFloor>0&&(n.fh+=u,n.fh>r.topHeight&&(o.moveDir=-1),n.fh<r.bottomHeight&&(o.moveDir=1)),r.moveCeiling>0&&(n.ch+=u,n.ch>r.topHeight&&(o.moveDir=-1),n.ch<r.bottomHeight&&(o.moveDir=1));var c=n.l;c.length;return t.updateVerticalSpaceInNodes(n.pn,n.bpn,n.fh,n.ch-n.fh,n.g),s}},changesectorceilingheight:{entityType:"sectors",params:{targetHeight:"int",speed:"float"},internalParams:{},eventCallback:function(a,n,r,i,s,l){var u=!1,c=i.targetHeight>r.ch?1:-1,f=o(i.speed*c*l),m=e(f),d=e(i.targetHeight-r.ch);return m>=d?(r.ch=i.targetHeight,u=!0):r.ch+=f,t.updateVerticalSpaceInNodes(r.pn,r.bpn,r.fh,r.ch-r.fh,r.g),u}},lightflickerrandom:{entityType:"sectors",params:{initialLightLevel:"float",activeLightLevel:"float",minDelay:"int",maxDelay:"int",minDuration:"int",maxDuration:"int"},internalParams:{locked:!1,active:!1,delay:1,elapsedDelay:0,duration:1,elapsedDuration:0},eventCallback:function(e,t,a,n,r,o){return r.locked?(r.elapsedDelay+=o,r.elapsedDelay>r.delay&&(r.active?(r.elapsedDuration+=o,r.elapsedDuration>r.duration&&(a.ll=n.initialLightLevel,r.active=!1,r.locked=!1)):(a.ll=n.activeLightLevel,r.active=!0))):(r.delay=Math.floor(Math.random()*(n.maxDelay-n.minDelay+1))+n.minDelay,r.duration=Math.floor(Math.random()*(n.maxDuration-n.minDuration+1))+n.minDuration,r.elapsedDelay=0,r.elapsedDuration=0,r.locked=!0),!1}},lightpulse:{entityType:"sectors",params:{duration:"float",minLevel:"float",maxLevel:"float"},internalParams:{elapsedDuration:0,direction:1},eventCallback:function(e,t,a,n,r,o){if(r.elapsedDuration+=o,r.elapsedDuration<n.duration){var i=r.elapsedDuration/n.duration,s=(n.maxLevel-n.minLevel)*i;1===r.direction?a.ll=n.minLevel+s:-1===r.direction&&(a.ll=n.maxLevel-s)}else r.elapsedDuration=0,r.direction=1===r.direction?-1:1;return!1}},setlinedefscrolling:{entityType:"lineDefs",params:{upperScrollingX:"int",upperScrollingY:"int",middleScrollingX:"int",middleScrollingY:"int",lowerScrollingX:"int",lowerScrollingY:"int"},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.tusx=n.upperScrollingX,a.tusy=n.upperScrollingY,a.tmsx=n.middleScrollingX,a.tmsy=n.middleScrollingY,a.tlsx=n.lowerScrollingX,a.tlsy=n.lowerScrollingY,a.isScrolling=0!=a.tusx||0!=a.tusy||0!=a.tmsx||0!=a.tmsy||0!=a.tlsx||0!=a.tlsy,!0}},changelinedefuppertex:{entityType:"lineDefs",params:{newTexRef:"string"},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.tur=n.newTexRef,!0}},changelinedefmiddletex:{entityType:"lineDefs",params:{newTexRef:"string"},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.tmr=n.newTexRef,!0}},changelinedeflowertex:{entityType:"lineDefs",params:{newTexRef:"string"},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.tlr=n.newTexRef,!0}},opendoor:{entityType:"doors",params:{},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.open(),!0}},closedoor:{entityType:"doors",params:{},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.close(),!0}},lockdoor:{entityType:"doors",params:{},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.lock(),!0}},unlockdoor:{entityType:"doors",params:{},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.unlock(),!0}},unlockandopendoor:{entityType:"doors",params:{},internalParams:{},eventCallback:function(e,t,a,n,r,o){return a.unlock(),a.open(),!0}},sectortickdamage:{entityType:"things",params:{damage:"int",interval:"int"},internalParams:{elapsedTimer:0},eventCallback:function(e,t,n,r,o,i){var s=!1;if(o.elapsedTimer++>r.interval){o.elapsedTimer=0;for(var l=0;l<n.length;l++){var u=n[l],c="player"===u.t?u.getPos():u.p;if(u.destructible){var f=!1;e.hasOwnProperty("sector")?a.pointInPolygon(c,e.sector.l,e.sector.b)&&(f=!0):a.m_Colliding_PointWithCircle(c,e.collider)&&(f=!0),f&&u.projectileHit(r.damage,0,0)}}}return s}},heatdamageoccupants:{entityType:"things",params:{damage:"int",interval:"int"},internalParams:{elapsedTimer:0},eventCallback:function(e,t,r,o,s,l){var u=!1;if(s.elapsedTimer++>o.interval){s.elapsedTimer=0;for(var c=0;c<r.length;c++){var f=r[c],m="player"===f.t?f.getPos():f.p;if(f.destructible){var d=!1;if(e.hasOwnProperty("sector")?a.pointInPolygon(m,e.sector.l,e.sector.b)&&(d=!0):a.m_Colliding_PointWithCircle(m,e.collider)&&(d=!0),d){var h=!1;h="player"===f.t?f.getAlive():f.isNPC?f.npc.alive:!f.isDead,h&&(f.projectileHit(o.damage,0,0),n.impactAction(i.fire,f))}}else n.impactAction(i.fire,f)}}return u}},pushoccupants:{entityType:"things",params:{forceX:"float",forceY:"float"},internalParams:{},eventCallback:function(e,t,n,r,o,i){for(var s=!1,l=0;l<n.length;l++){var u=n[l],c="player"===u.t?u.getPos():u.p;if(u.isPushable){var f=!1;e.hasOwnProperty("sector")?a.pointInPolygon(c,e.sector.l,e.sector.b)&&(f=!0):a.m_Colliding_PointWithCircle(c,e.collider)&&(f=!0),f&&u.applyForce(r.forceX,r.forceY)}}return s}}};return{get:function(){return u},getTriggerEvents:function(){return s},getUntriggerEvents:function(){return l}}}();return o}),define("triggers",["enginevars","collision","triggeractions","input","time"],function(e,t,a,n,r){var o=function(){function e(e,a){var n={g:e.g,t:e.t,timesFired:0,timesToTrigger:e.n,resetDelay:e.d,resetTimer:0,eventType:e.e,untriggerEventType:e.u,canTrigger:!0,actions:e.a};switch(n.t){case"sector":n.sector=a.getSectorByGUID(e.s);break;case"radial":n.collider={x:e.p.x,y:e.p.y,rad:e.r}}for(var r=n.actions,o=r.length,i=0;o>i;i++){var s=r[i];s.loadedParams={};for(var l=s.params,u=l.length,c=s.loadedParams,f=0;u>f;f++){var m=l[f];c[m.name]=m.val}}for(var r=n.actions,o=r.length,d=0;o>d;d++)r[d].sourceTrigger=n;return n.fire=function(){return n.canTrigger=!1,n.timesFired++,n.resetTimer=n.resetDelay,n.actions},n.untrigger=function(){n.canTrigger=!0;for(var e=n.actions,t=e.length,a=0;t>a;a++)for(var r=e[a],o=w[r.type].entityType,i=b[o],s=i.length,l=0;s>l;l++)for(var u=i[l],c=u.actions,f=0;f<c.length;f++)c[f].sourceTrigger.g===n.g&&c.splice(f,1)},n.update=function(e,a){if(n.resetTimer>0&&(n.resetTimer-=g),n.resetTimer<=0&&(-1==n.timesToTrigger||n.timesFired<n.timesToTrigger)){var r=!1;switch(n.t){case"sector":r=t.pointInPolygon(e,n.sector.l,n.sector.b);break;case"radial":r=t.collidingPointWithCircle(e,n.collider);break;default:console.log('ERROR: MOD_Triggers.update : Unrecognised trigger type "'+n.t+'".')}var o=!1;switch(n.eventType){case p.immediate:n.canTrigger&&(o=n.fire());break;case p.enter:r&&n.canTrigger?o=n.fire():n.canTrigger=!0;break;case p.actionbutton:r&&a?n.canTrigger&&(o=n.fire()):n.canTrigger=!0;break;default:console.log('ERROR: MOD_Triggers.update : Unrecognised trigger event type "'+n.e+'".')}switch(n.untriggerEventType){case y.leave:r||n.untrigger()}return o}return[]},n}function n(t,a){x=t,v=[],d();for(var n=x.tr.length,r=0;n>r;r++)v.push(e(x.tr[r],a))}function o(e){for(var t=e.length,a=0;t>a;a++)for(var n=e[a],r=n.length,o=0;r>o;o++){for(var i=n[o],s=!1,l=w[i.type].entityType,u=b[l],c=u.length,f=0;c>f;f++){var m=u[f];if(m.subject==i.subject){s=!0;for(var d=m.actions,h=d.length,o=0;h>o;o++)if(d[o].type===i.type)return;d.push({sourceTrigger:i.sourceTrigger,type:i.type,subject:i.subject,delay:i.delay,delayTimer:i.delay,loadedParams:i.loadedParams,internalParams:i.internalParams})}}s||u.push({subject:i.subject,actions:[{sourceTrigger:i.sourceTrigger,type:i.type,subject:i.subject,delay:i.delay,delayTimer:i.delay,loadedParams:i.loadedParams,internalParams:i.internalParams}]})}}function i(){for(var e=b.globals,t=e.length,a=b.lineDefs,n=a.length,r=b.sectors,o=r.length,i=b.doors,s=i.length,l=b.things,u=l.length,c=b.effects,f=c.length,m=b.triggers,d=m.length,l=b.things,u=l.length,h=0;t>h;h++)for(var p=e[h],y=p.actions,x=y.length,v=0;x>v;v++)y[v].delayTimer>0&&(y[v].delayTimer-=g);for(var w=0;n>w;w++)for(var S=a[w],T=S.actions,M=T.length,v=0;M>v;v++)T[v].delayTimer>0&&(T[v].delayTimer-=g);for(var D=0;o>D;D++)for(var Y=r[D],X=Y.actions,_=X.length,k=0;_>k;k++)X[k].delayTimer>0&&(X[k].delayTimer-=g);for(var I=0;s>I;I++)for(var R=i[I],C=R.actions,P=C.length,A=0;P>A;A++)C[A].delayTimer>0&&(C[A].delayTimer-=g);for(var F=0;u>F;F++)for(var O=l[F],E=O.actions,q=E.length,B=0;q>B;B++)E[B].delayTimer>0&&(E[B].delayTimer-=g);for(var N=0;f>N;N++)for(var z=c[N],L=z.actions,j=L.length,V=0;j>V;V++)L[V].delayTimer>0&&(L[V].delayTimer-=g);for(var H=0;d>H;H++)for(var W=m[H],U=W.actions,G=U.length,K=0;G>K;K++)U[K].delayTimer>0&&(U[K].delayTimer-=g);for(var F=0;u>F;F++)for(var O=l[F],E=O.actions,q=E.length,B=0;q>B;B++)E[B].delayTimer>0&&(E[B].delayTimer-=g)}function s(e,t,a){for(var n=b.globals,r=n.length,o=g,i=0;r>i;i++){for(var s=n[i],l=s.actions,u=l.length,c=0;u>c;c++){var f=l[c],m=f.type;if(f.delayTimer<=0){f.internalParams.funcSwitchLevel=t,f.internalParams.funcSaveGame=a;var d=w[m].eventCallback(f.sourceTrigger,e,f.loadedParams,f.internalParams,o);d&&(l.splice(c,1),c--,u--)}}1>u&&(n.splice(i,1),i--,r--)}}function l(e){for(var t=x.s,a=t.length,n=b.lineDefs,r=n.length,o=g,i=0;r>i;i++)for(var s=n[i],l=s.subject,u=s.actions,c=u.length,f=0;a>f;f++)for(var m=t[f].l,d=m.length,h=0;d>h;h++)if(m[h].g==l)for(var p=m[h],y=0;c>y;y++){var v=u[y],S=v.type;if(v.delayTimer<=0){var T=w[S].eventCallback(v.sourceTrigger,e,p,v.loadedParams,v.internalParams,o);T&&(u.splice(y,1),y--,c--)}}}function u(e){for(var t=x.s,a=t.length,n=b.sectors,r=n.length,o=g,i=0;r>i;i++){for(var s=n[i],l=s.subject,u=s.actions,c=u.length,f=0;a>f;f++)if(t[f].g==l)for(var m=t[f],d=0;c>d;d++){var h=u[d],p=h.type;if(h.delayTimer<=0){var y=w[p].eventCallback(h.sourceTrigger,e,m,h.loadedParams,h.internalParams,o);y&&(u.splice(d,1),d--,c--)}}1>c&&(n.splice(i,1),i--,r--)}}function c(e,t){for(var a=t.length,n=b.doors,r=n.length,o=g,i=0;r>i;i++){for(var s=n[i],l=s.subject,u=s.actions,c=u.length,f=0;a>f;f++)if(t[f].sg==l)for(var m=t[f],d=0;c>d;d++){var h=u[d],p=h.type;if(h.delayTimer<=0){var y=w[p].eventCallback(h.sourceTrigger,e,m,h.loadedParams,h.internalParams,o);y&&(u.splice(d,1),d--,c--)}}1>c&&(n.splice(i,1),i--,r--)}}function f(e,t,a){for(var n=b.things,r=n.length,o=(a.length,g),i=0;r>i;i++){for(var s=n[i],l=s.actions,u=l.length,c=0;u>c;c++){var f=l[c],m=f.type;if(f.delayTimer<=0){var d=w[m].eventCallback(f.sourceTrigger,e,a.concat(t),f.loadedParams,f.internalParams,o);d&&(l.splice(c,1),c--,u--)}}1>u&&(n.splice(i,1),i--,r--)}}function m(e,t,a,n){i(),s(t,a,n),l(t),u(t),c(t,t.getDoors()),f(t,e,t.getThings())}function d(){b.lineDefs=[],b.sectors=[],b.things=[],b.effects=[],b.triggers=[]}function h(e,t,a,n,i,s,l){g=r.getDeltaTime();for(var u=v.length,c=[],f=0;u>f;f++){var d=v[f].update(t,a);d.length>0&&c.push(d)}o(c),m(i,n,s,l)}var p=(a.get(),a.getTriggerEvents()),y=a.getUntriggerEvents(),x=null,g=r.getDeltaTime(),v=[],b={globals:[],lineDefs:[],sectors:[],doors:[],things:[],effects:[],triggers:[],things:[]},w=a.get();return{init:n,update:h,getTriggers:function(){return v}}}();return o}),define("levels",[],function(){var e=function(){var e={1:{size:{x:"2048",y:"2048",z:8192},skyTexture:"skyred",dimLight:{density:"0.0025",bias:"0.25"},fog:{density:"0.0001",colour:{r:"0.9",g:"0.9",b:"0.9"}},l:[],d:[],s:[{g:"s0",l:[{g:"l5",sp:{a:!0,x:-216,y:12},ep:{a:!0,x:-24,y:180},n:{l:{x:.658504607868518,y:-.7525766947068778},r:{x:-.658504607868518,y:.7525766947068778},le:{x:-114.73196313705185,y:89.97938644234497},re:{x:-125.26803686294815,y:102.02061355765503}},f:"0_8",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_11",tmx:0,tmy:0,tmsx:-1,tmsy:0,tmw:0,tmh:0,tlr:"0_11",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!0,b:{x:-216,y:12,w:192,h:168},fh:0,ch:128,psg:"s0",osg:"",ll:1,pg:"l5"},{g:"l7",sp:{a:!1,x:-112,y:-196},ep:{a:!1,x:-216,y:12},n:{l:{x:.8944271909999159,y:.447213595499958},r:{x:-.8944271909999159,y:-.44721359549995787},le:{x:-156.84458247200067,y:-88.42229123600033},re:{x:-171.15541752799933,y:-95.57770876399967}},f:"0_8",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-216,y:-196,w:104,h:208},fh:0,ch:128,psg:"s0",osg:"s3",ll:1,pg:"l7"},{g:"l9",sp:{a:!0,x:208,y:-156},ep:{a:!0,x:-112,y:-196},n:{l:{x:-.12403473458920852,y:.9922778767136677},r:{x:.12403473458920841,y:-.9922778767136677},le:{x:47.007722123286335,y:-168.06177698629065},re:{x:48.992277876713665,y:-183.93822301370935}},f:"0_8",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-112,y:-196,w:320,h:40},fh:0,ch:128,psg:"s0",osg:"",ll:1,pg:"l9"},{g:"l8",sp:{a:!1,x:256,y:52},ep:{a:!1,x:208,y:-156},n:{l:{x:-.9743911956946198,y:.22485950669875837},r:{x:.9743911956946198,y:-.22485950669875848},le:{x:224.20487043444305,y:-50.201123946409936},re:{x:239.79512956555695,y:-53.79887605359007}},f:"0_8",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:208,y:-156,w:48,h:208},fh:0,ch:128,psg:"s0",osg:"s1",ll:1,pg:"l8"},{g:"l6",sp:{a:!0,x:-24,y:180},ep:{a:!0,x:256,y:52},n:{l:{x:-.4157597602677943,y:-.9094744755858002},r:{x:.41575976026779443,y:.9094744755858002},le:{x:112.67392191785764,y:108.7242041953136},re:{x:119.32607808214236,y:123.2757958046864}},f:"0_8",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-24,y:52,w:280,h:128},fh:0,ch:128,psg:"s0",osg:"",ll:1,pg:"l6"}],b:{x:-216,y:-196,w:472,h:376},se:!1,f:"0_8",c:"-1_-1",fh:0,ch:128,fx:-83,fy:-8,fsx:0,fsy:0,cx:-83,cy:-8,csx:0,csy:0,ll:1,d:!1,t:!1,dy:!1,pvs:["s3","s4","s8","s5","s9","s1","s2"],tf:["0","8"],tc:["-1","-1"],vpr:!0},{g:"s1",l:[{g:"l16",sp:{a:!0,x:328,y:-220},ep:{a:!0,x:208,y:-156},n:{l:{x:.4705882352941176,y:.8823529411764706},r:{x:-.4705882352941177,y:-.8823529411764706},le:{x:271.7647058823529,y:-180.94117647058823},re:{x:264.2352941176471,y:-195.05882352941177}},f:"0_2",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:208,y:-220,w:120,h:64},fh:0,ch:128,psg:"s1",osg:"",ll:1,pg:"l16"},{g:"l18",sp:{a:!0,x:448,y:-188},ep:{a:!0,x:328,y:-220},n:{l:{x:-.2576626505603324,y:.9662349396012463},r:{x:.2576626505603323,y:-.9662349396012463},le:{x:385.9386987955173,y:-196.27012048319003},re:{x:390.0613012044827,y:-211.72987951680997}},f:"0_2",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:328,y:-220,w:120,h:32},fh:0,ch:128,psg:"s1",osg:"",ll:1,pg:"l18"},{g:"l20",sp:{a:!1,x:488,y:-28},ep:{a:!1,x:448,y:-188},n:{l:{x:-.9701425001453319,y:.2425356250363329},r:{x:.9701425001453319,y:-.24253562503633302},le:{x:460.23885999883737,y:-106.05971499970934},re:{x:475.76114000116263,y:-109.94028500029066}},f:"0_2",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:448,y:-188,w:40,h:160},fh:0,ch:128,psg:"s1",osg:"s2",ll:1,pg:"l20"},{g:"l21",sp:{a:!0,x:384,y:76},ep:{a:!0,x:488,y:-28},n:{l:{x:-.7071067811865476,y:-.7071067811865476},r:{x:.7071067811865476,y:.7071067811865476},le:{x:430.34314575050763,y:18.34314575050762},re:{x:441.65685424949237,y:29.65685424949238}},f:"0_2",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:384,y:-28,w:104,h:104},fh:0,ch:128,psg:"s1",osg:"",ll:1,pg:"l21"},{g:"l19",sp:{a:!0,x:256,y:52},ep:{a:!0,x:384,y:76},n:{l:{x:.18428853505018541,y:-.9828721869343219},r:{x:-.1842885350501853,y:.9828721869343219},le:{x:321.4743082804015,y:56.137022504525426},re:{x:318.5256917195985,y:71.86297749547458}},f:"0_2",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:256,y:52,w:128,h:24},fh:0,ch:128,psg:"s1",osg:"",ll:1,pg:"l19"},{g:"l17",sp:{a:!0,x:208,y:-156},ep:{a:!0,x:256,y:52},n:{l:{x:.9743911956946198,y:-.22485950669875837},r:{x:-.9743911956946198,y:.22485950669875848},le:{x:239.79512956555695,y:-53.798876053590064},re:{x:224.20487043444305,y:-50.20112394640993}},f:"0_2",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:208,y:-156,w:48,h:208},fh:0,ch:128,psg:"s1",osg:"s0",ll:1,pg:"l17"}],b:{x:208,y:-220,w:280,h:296},se:!1,f:"0_2",c:"-1_-1",fh:0,ch:128,fx:0,fy:0,fsx:0,fsy:0,cx:0,cy:0,csx:0,csy:0,ll:1,d:!1,t:!1,dy:!1,pvs:["s2","s0","s3","s4","s8","s5","s9"],tf:["0","2"],tc:["-1","-1"],vpr:!0},{g:"s2",l:[{g:"l27",sp:{a:!0,x:672,y:-284},ep:{a:!0,x:448,y:-188},n:{l:{x:.3939192985791676,y:.9191450300180578},r:{x:-.3939192985791677,y:-.9191450300180578},le:{x:563.1513543886333,y:-228.64683975985554},re:{x:556.8486456113667,y:-243.35316024014446}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:448,y:-284,w:224,h:96},fh:0,ch:128,psg:"s2",osg:"",ll:1,pg:"l27"},{g:"l29",sp:{a:!0,x:864,y:-204},ep:{a:!0,x:672,y:-284},n:{l:{x:-.3846153846153847,y:.9230769230769231},r:{x:.3846153846153846,y:-.9230769230769231},le:{x:764.9230769230769,y:-236.6153846153846},re:{x:771.0769230769231,y:-251.3846153846154}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:672,y:-284,w:192,h:80},fh:0,ch:128,psg:"s2",osg:"",ll:1,pg:"l29"},{g:"l31",sp:{a:!0,x:880,y:-108},ep:{a:!0,x:864,y:-204},n:{l:{x:-.9863939238321437,y:.16439898730535724},r:{x:.9863939238321437,y:-.16439898730535735},le:{x:864.1088486093429,y:-154.68480810155714},re:{x:879.8911513906571,y:-157.31519189844286}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:864,y:-204,w:16,h:96},fh:0,ch:128,psg:"s2",osg:"",ll:1,pg:"l31"},{g:"l32",sp:{a:!0,x:728,y:-4},ep:{a:!0,x:880,y:-108},n:{l:{x:-.5646839155919902,y:-.8253072612498318},r:{x:.5646839155919902,y:.8253072612498318},le:{x:799.4825286752641,y:-62.602458089998656},re:{x:808.5174713247359,y:-49.397541910001344}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:728,y:-108,w:152,h:104},fh:0,ch:128,psg:"s2",osg:"",ll:1,pg:"l32"},{g:"l30",sp:{a:!0,x:488,y:-28},ep:{a:!0,x:728,y:-4},n:{l:{x:.09950371902099897,y:-.9950371902099892},r:{x:-.09950371902099886,y:.9950371902099892
},le:{x:608.796029752168,y:-23.960297521679912},re:{x:607.203970247832,y:-8.039702478320088}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:488,y:-28,w:240,h:24},fh:0,ch:128,psg:"s2",osg:"",ll:1,pg:"l30"},{g:"l28",sp:{a:!0,x:448,y:-188},ep:{a:!0,x:488,y:-28},n:{l:{x:.9701425001453319,y:-.2425356250363329},r:{x:-.9701425001453319,y:.24253562503633302},le:{x:475.76114000116263,y:-109.94028500029066},re:{x:460.23885999883737,y:-106.05971499970934}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:448,y:-188,w:40,h:160},fh:0,ch:128,psg:"s2",osg:"s1",ll:1,pg:"l28"}],b:{x:448,y:-284,w:432,h:280},se:!1,f:"0_10",c:"-1_-1",fh:0,ch:128,fx:0,fy:0,fsx:0,fsy:0,cx:0,cy:0,csx:0,csy:0,ll:1,d:!1,t:!1,dy:!1,pvs:["s1","s0","s3","s4","s8","s5"],tf:["0","10"],tc:["-1","-1"],vpr:!0},{g:"s3",l:[{g:"l51",sp:{a:!0,x:-256,y:-4},ep:{a:!0,x:-216,y:12},n:{l:{x:.3713906763541038,y:-.9284766908852594},r:{x:-.37139067635410367,y:.9284766908852594},le:{x:-233.02887458916717,y:-3.4278135270820753},re:{x:-238.97112541083283,y:11.427813527082076}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-256,y:-4,w:40,h:16},fh:8,ch:128,psg:"s3",osg:"",ll:1,pg:"l51"},{g:"l53",sp:{a:!1,x:-152,y:-212},ep:{a:!1,x:-256,y:-4},n:{l:{x:.8944271909999159,y:.447213595499958},r:{x:-.8944271909999159,y:-.44721359549995787},le:{x:-196.84458247200067,y:-104.42229123600033},re:{x:-211.15541752799933,y:-111.57770876399967}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-256,y:-212,w:104,h:208},fh:8,ch:128,psg:"s3",osg:"s4",ll:1,pg:"l53"},{g:"l54",sp:{a:!0,x:-112,y:-196},ep:{a:!0,x:-152,y:-212},n:{l:{x:-.3713906763541038,y:.9284766908852594},r:{x:.37139067635410367,y:-.9284766908852594},le:{x:-134.97112541083283,y:-196.57218647291793},re:{x:-129.02887458916717,y:-211.42781352708207}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-152,y:-212,w:40,h:16},fh:8,ch:128,psg:"s3",osg:"",ll:1,pg:"l54"},{g:"l52",sp:{a:!0,x:-216,y:12},ep:{a:!0,x:-112,y:-196},n:{l:{x:-.8944271909999159,y:-.447213595499958},r:{x:.8944271909999159,y:.44721359549995787},le:{x:-171.15541752799933,y:-95.57770876399967},re:{x:-156.84458247200067,y:-88.42229123600033}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-216,y:-196,w:104,h:208},fh:8,ch:128,psg:"s3",osg:"s0",ll:1,pg:"l52"}],b:{x:-256,y:-212,w:144,h:224},se:!1,f:"0_10",c:"-1_-1",fh:8,ch:128,fx:66.5,fy:18,fsx:.5,fsy:-1,cx:0,cy:0,csx:0,csy:0,ll:1,d:!1,t:!1,dy:!1,pvs:["s4","s8","s5","s9","s0","s1","s2"],tf:["0","10"],tc:["-1","-1"],vpr:!0},{g:"s4",l:[{g:"l55",sp:{a:!1,x:-352,y:-44},ep:{a:!1,x:-256,y:-4},n:{l:{x:.3846153846153847,y:-.9230769230769231},r:{x:-.3846153846153846,y:.9230769230769231},le:{x:-300.9230769230769,y:-31.384615384615387},re:{x:-307.0769230769231,y:-16.615384615384613}},f:"0_11",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-352,y:-44,w:96,h:40},fh:0,ch:128,psg:"s4",osg:"s8",ll:1,pg:"l55"},{g:"l57",sp:{a:!1,x:-256,y:-252},ep:{a:!1,x:-352,y:-44},n:{l:{x:.9079593845004517,y:.41905817746174695},r:{x:-.9079593845004517,y:-.41905817746174684},le:{x:-296.7363249239964,y:-144.64753458030603},re:{x:-311.2636750760036,y:-151.35246541969397}},f:"0_11",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-352,y:-252,w:96,h:208},fh:0,ch:128,psg:"s4",osg:"s5",ll:1,pg:"l57"},{g:"l58",sp:{a:!1,x:-152,y:-212},ep:{a:!1,x:-256,y:-252},n:{l:{x:-.35897907930886913,y:.9333456062030595},r:{x:.358979079308869,y:-.9333456062030595},le:{x:-206.87183263447096,y:-224.53323515037553},re:{x:-201.12816736552904,y:-239.46676484962447}},f:"0_11",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-256,y:-252,w:104,h:40},fh:0,ch:128,psg:"s4",osg:"s9",ll:1,pg:"l58"},{g:"l56",sp:{a:!0,x:-256,y:-4},ep:{a:!0,x:-152,y:-212},n:{l:{x:-.8944271909999159,y:-.447213595499958},r:{x:.8944271909999159,y:.44721359549995787},le:{x:-211.15541752799933,y:-111.57770876399967},re:{x:-196.84458247200067,y:-104.42229123600033}},f:"0_11",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-256,y:-212,w:104,h:208},fh:0,ch:128,psg:"s4",osg:"s3",ll:1,pg:"l56"}],b:{x:-352,y:-252,w:200,h:248},se:!1,f:"0_11",c:"-1_-1",fh:0,ch:128,fx:5.199999999999895,fy:28.5,fsx:-.7,fsy:1.5,cx:0,cy:0,csx:0,csy:0,ll:1,d:!1,t:!1,dy:!1,pvs:["s8","s5","s9","s3","s0","s1","s2"],tf:["0","11"],tc:["-1","-1"],vpr:!0},{g:"s5",l:[{g:"l59",sp:{a:!0,x:-392,y:-60},ep:{a:!0,x:-352,y:-44},n:{l:{x:.3713906763541038,y:-.9284766908852594},r:{x:-.37139067635410367,y:.9284766908852594},le:{x:-369.0288745891672,y:-59.42781352708207},re:{x:-374.9711254108328,y:-44.57218647291793}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-392,y:-60,w:40,h:16},fh:8,ch:128,psg:"s5",osg:"",ll:1,pg:"l59"},{g:"l61",sp:{a:!0,x:-296,y:-268},ep:{a:!0,x:-392,y:-60},n:{l:{x:.9079593845004517,y:.41905817746174695},r:{x:-.9079593845004517,y:-.41905817746174684},le:{x:-336.7363249239964,y:-160.64753458030603},re:{x:-351.2636750760036,y:-167.35246541969397}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-392,y:-268,w:96,h:208},fh:8,ch:128,psg:"s5",osg:"",ll:1,pg:"l61"},{g:"l62",sp:{a:!0,x:-256,y:-252},ep:{a:!0,x:-296,y:-268},n:{l:{x:-.3713906763541038,y:.9284766908852594},r:{x:.37139067635410367,y:-.9284766908852594},le:{x:-278.9711254108328,y:-252.57218647291793},re:{x:-273.0288745891672,y:-267.4278135270821}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-296,y:-268,w:40,h:16},fh:8,ch:128,psg:"s5",osg:"",ll:1,pg:"l62"},{g:"l60",sp:{a:!0,x:-352,y:-44},ep:{a:!0,x:-256,y:-252},n:{l:{x:-.9079593845004517,y:-.41905817746174695},r:{x:.9079593845004517,y:.41905817746174684},le:{x:-311.2636750760036,y:-151.35246541969397},re:{x:-296.7363249239964,y:-144.64753458030603}},f:"0_10",c:"-1_-1",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-352,y:-252,w:96,h:208},fh:8,ch:128,psg:"s5",osg:"s4",ll:1,pg:"l60"}],b:{x:-392,y:-268,w:136,h:224},se:!1,f:"0_10",c:"-1_-1",fh:8,ch:128,fx:0,fy:0,fsx:0,fsy:0,cx:0,cy:0,csx:0,csy:0,ll:1,d:!1,t:!1,dy:!1,pvs:["s4","s8","s9","s3","s0","s1","s2"],tf:["0","10"],tc:["-1","-1"],vpr:!0},{g:"s8",l:[{g:"l87",sp:{a:!0,x:-352,y:-44},ep:{a:!0,x:-464,y:196},n:{l:{x:.9061831399952655,y:.4228854653311239},r:{x:-.9061831399952655,y:-.4228854653311238},le:{x:-400.7505348800379,y:79.38308372264899},re:{x:-415.2494651199621,y:72.61691627735101}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-464,y:-44,w:112,h:240},fh:0,ch:12,psg:"s8",osg:"",ll:.4,pg:"l87"},{g:"l89",sp:{a:!0,x:-256,y:-4},ep:{a:!0,x:-352,y:-44},n:{l:{x:-.3846153846153847,y:.9230769230769231},r:{x:.3846153846153846,y:-.9230769230769231},le:{x:-307.0769230769231,y:-16.615384615384613},re:{x:-300.9230769230769,y:-31.384615384615387}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-352,y:-44,w:96,h:40},fh:0,ch:12,psg:"s8",osg:"s4",ll:.4,pg:"l89"},{g:"l90",sp:{a:!0,x:-376,y:236},ep:{a:!0,x:-256,y:-4},n:{l:{x:-.894427190999916,y:-.44721359549995804},r:{x:.894427190999916,y:.4472135954999579},le:{x:-323.1554175279993,y:112.42229123600033},re:{x:-308.8445824720007,y:119.57770876399967}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-376,y:-4,w:120,h:240},fh:0,ch:12,psg:"s8",osg:"",ll:.4,pg:"l90"},{g:"l88",sp:{a:!0,x:-464,y:196},ep:{a:!0,x:-376,y:236},n:{l:{x:.41380294430118403,y:-.9103664774626047},r:{x:-.4138029443011839,y:.9103664774626047},le:{x:-416.68957644559055,y:208.71706818029915},re:{x:-423.31042355440945,y:223.28293181970085}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-464,y:196,w:88,h:40},fh:0,ch:12,psg:"s8",osg:"",ll:.4,pg:"l88"}],b:{x:-464,y:-44,w:208,h:280},se:!1,f:"0_11",c:"0_10",fh:0,ch:12,fx:19.199999999999886,fy:16.5,fsx:-.7,fsy:1.5,cx:0,cy:0,csx:0,csy:0,ll:.4,d:!1,t:!1,dy:!1,pvs:["s4","s5","s9","s3","s0","s1","s2"],tf:["0","11"],tc:["0","10"],vpr:!0},{g:"s9",l:[{g:"l91",sp:{x:-136,y:-516,a:!0},ep:{x:-256,y:-252,a:!0},n:{l:{x:.9103664774626047,y:.41380294430118403},r:{x:-.9103664774626047,y:-.4138029443011839},le:{x:-188.71706818029915,y:-380.68957644559055},re:{x:-203.28293181970085,y:-387.31042355440945}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-256,y:-516,w:120,h:264},fh:0,ch:12,psg:"s9",osg:"",ll:.4,pg:"l91"},{g:"l93",sp:{a:!0,x:-256,y:-252},ep:{a:!0,x:-152,y:-212},n:{l:{x:.35897907930886913,y:-.9333456062030595},r:{x:-.358979079308869,y:.9333456062030595},le:{x:-201.12816736552904,y:-239.46676484962447},re:{x:-206.87183263447096,y:-224.53323515037553}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"-1_-1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!1,o:!1,se:!1,b:{x:-256,y:-252,w:104,h:40},fh:0,ch:12,psg:"s9",osg:"s4",ll:.4,pg:"l93"},{g:"l94",sp:{a:!0,x:-152,y:-212},ep:{a:!0,x:-24,y:-468},n:{l:{x:-.8944271909999159,y:-.447213595499958},r:{x:.8944271909999159,y:.44721359549995787},le:{x:-95.15541752799933,y:-343.5777087639997},re:{x:-80.84458247200067,y:-336.4222912360003}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-152,y:-468,w:128,h:256},fh:0,ch:12,psg:"s9",osg:"",ll:.4,pg:"l94"},{g:"l92",sp:{a:!0,x:-24,y:-468},ep:{a:!0,x:-136,y:-516},n:{l:{x:-.3939192985791677,y:.9191450300180578},r:{x:.3939192985791676,y:-.9191450300180578},le:{x:-83.15135438863334,y:-484.64683975985554},re:{x:-76.84864561136666,y:-499.35316024014446}},f:"0_11",c:"0_10",tur:"0_1",tux:0,tuy:0,tusx:0,tusy:0,tuw:0,tuh:0,tmr:"0_1",tmx:0,tmy:0,tmsx:0,tmsy:0,tmw:0,tmh:0,tlr:"0_1",tlx:0,tly:0,tlsx:0,tlsy:0,tlw:0,tlh:0,af:!1,s:!0,o:!0,se:!1,b:{x:-136,y:-516,w:112,h:48},fh:0,ch:12,psg:"s9",osg:"",ll:.4,pg:"l92"}],b:{x:-256,y:-516,w:232,h:304},se:!1,f:"0_11",c:"0_10",fh:0,ch:12,fx:61.19999999999999,fy:13.5,fsx:-.7,fsy:1.5,cx:0,cy:0,csx:0,csy:0,ll:.4,d:!1,t:!1,dy:!1,pvs:["s4","s8","s5","s3","s0","s1"],tf:["0","11"],tc:["0","10"],vpr:!0}],bsp:{l:0,s:{sp:{x:-216,y:12},ep:{x:-112,y:-196}},f:{l:0,s:{sp:{x:-256,y:-4},ep:{x:-152,y:-212}},f:{l:0,s:{sp:{x:-352,y:-44},ep:{x:-256,y:-4}},f:{l:0,s:{sp:{x:-256,y:-252},ep:{x:-352,y:-44}},f:{l:0,s:{sp:{x:-152,y:-212},ep:{x:-256,y:-252}},f:{l:1,s:null,f:{},b:{},bb:{x:-352,y:-252,w:200,h:248},o:[{g:"l55",sp:{a:!1,x:-352,y:-44},ep:{a:!1,x:-256,y:-4},pg:"l55",psg:"s4",b:{x:-352,y:-44,w:96,h:40},n:{l:{x:.3846153846153847,y:-.9230769230769231},r:{x:-.3846153846153846,y:.9230769230769231},le:{x:-300.9230769230769,y:-31.384615384615387},re:{x:-307.0769230769231,y:-16.615384615384613}}},{g:"l57",sp:{a:!1,x:-256,y:-252},ep:{a:!1,x:-352,y:-44},pg:"l57",psg:"s4",b:{x:-352,y:-252,w:96,h:208},n:{l:{x:.9079593845004517,y:.41905817746174695},r:{x:-.9079593845004517,y:-.41905817746174684},le:{x:-296.7363249239964,y:-144.64753458030603},re:{x:-311.2636750760036,y:-151.35246541969397}}},{g:"l58",sp:{a:!1,x:-152,y:-212},ep:{a:!1,x:-256,y:-252},pg:"l58",psg:"s4",b:{x:-256,y:-252,w:104,h:40},n:{l:{x:-.35897907930886913,y:.9333456062030595},r:{x:.358979079308869,y:-.9333456062030595},le:{x:-206.87183263447096,y:-224.53323515037553},re:{x:-201.12816736552904,y:-239.46676484962447}}},{g:"l56",sp:{a:!0,x:-256,y:-4},ep:{a:!0,x:-152,y:-212},pg:"l56",psg:"s4",b:{x:-256,y:-212,w:104,h:208},n:{l:{x:-.8944271909999159,y:-.447213595499958},r:{x:.8944271909999159,y:.44721359549995787},le:{x:-211.15541752799933,y:-111.57770876399967},re:{x:-196.84458247200067,y:-104.42229123600033}}}]},b:{l:1,s:null,f:{},b:{},bb:{x:-256,y:-515.3394495412844,w:232,h:304},o:[{g:"l93",sp:{a:!0,x:-256,y:-252},ep:{a:!0,x:-152,y:-212},pg:"l93",psg:"s9",b:{x:-256,y:-252,w:104,h:40},n:{l:{x:.35897907930886913,y:-.9333456062030595},r:{x:-.358979079308869,y:.9333456062030595},le:{x:-201.12816736552904,y:-239.46676484962447},re:{x:-206.87183263447096,y:-224.53323515037553}}},{g:"l94",sp:{a:!0,x:-152,y:-212},ep:{a:!0,x:-24,y:-468},pg:"l94",psg:"s9",b:{x:-152,y:-468,w:128,h:256},n:{l:{x:-.8944271909999159,y:-.447213595499958},r:{x:.8944271909999159,y:.44721359549995787},le:{x:-95.15541752799933,y:-343.5777087639997},re:{x:-80.84458247200067,y:-336.4222912360003}}},{g:"l92a",sp:{x:-24,y:-468},ep:{x:-134.45871559633028,y:-515.3394495412844},pg:"l92",psg:"s9",b:{x:-134.45871559633028,y:-515.3394495412844,w:110.45871559633028,h:47.33944954128435},n:{l:{x:-.39391929857916735,y:.919145030018058},r:{x:.39391929857916724,y:-.919145030018058},le:{x:-82.38071218679848,y:-484.3165645304977},re:{x:-76.0780034095318,y:-499.02288501078664}}}]},bb:{x:-352,y:-515.3394495412844,w:328,h:512}},b:{l:0,s:{sp:{x:-256,y:-252},ep:{x:-296,y:-268}},f:{l:1,s:null,f:{},b:{},bb:{x:-391.741935483871,y:-268,w:136,h:224},o:[{g:"l61a",sp:{x:-296,y:-268},ep:{x:-391.741935483871,y:-60.55913978494624},pg:"l61",psg:"s5",b:{x:-391.741935483871,y:-268,w:95.74193548387098,h:207.44086021505376},n:{l:{x:.9079593845004517,y:.419058177461747},r:{x:-.9079593845004517,y:-.4190581774617469},le:{x:-336.6072926659319,y:-160.92710447277915},re:{x:-351.1346428179391,y:-167.6320353121671}}},{g:"l62",sp:{a:!0,x:-256,y:-252},ep:{a:!0,x:-296,y:-268},pg:"l62",psg:"s5",b:{x:-296,y:-268,w:40,h:16},n:{l:{x:-.3713906763541038,y:.9284766908852594},r:{x:.37139067635410367,y:-.9284766908852594},le:{x:-278.9711254108328,y:-252.57218647291793},re:{x:-273.0288745891672,y:-267.4278135270821}}},{g:"l60",sp:{a:!0,x:-352,y:-44},ep:{a:!0,x:-256,y:-252},pg:"l60",psg:"s5",b:{x:-352,y:-252,w:96,h:208},n:{l:{x:-.9079593845004517,y:-.41905817746174695},r:{x:.9079593845004517,y:.41905817746174684},le:{x:-311.2636750760036,y:-151.35246541969397},re:{x:-296.7363249239964,y:-144.64753458030603}}}]},b:{l:1,s:null,f:{},b:{},bb:{x:-256,y:-516,w:122,h:264},o:[{g:"l91",sp:{x:-136,y:-516,a:!0},ep:{x:-256,y:-252,a:!0},pg:"l91",psg:"s9",b:{x:-256,y:-516,w:120,h:264},n:{l:{x:.9103664774626047,y:.41380294430118403},r:{x:-.9103664774626047,y:-.4138029443011839},le:{x:-188.71706818029915,y:-380.68957644559055},re:{x:-203.28293181970085,y:-387.31042355440945}}},{g:"l92b",sp:{x:-134.45871559633028,y:-515.3394495412844},ep:{x:-136,y:-516},pg:"l92",psg:"s9",b:{x:-136,y:-516,w:1.5412844036697209,h:.6605504587156474},n:{l:{x:-.39391929857919433,y:.9191450300180465},r:{x:.3939192985791942,y:-.9191450300180465},le:{x:-138.38071218679872,y:-508.3165645304979},re:{x:-132.0780034095316,y:-523.0228850107866}}}]},bb:{x:-391.741935483871,y:-516,w:258,h:472}},bb:{x:-391.741935483871,y:-516,w:368,h:512}},b:{l:0,s:{sp:{x:-352,y:-44},ep:{x:-464,y:196}},f:{l:1,s:null,f:{},b:{},bb:{x:-464,y:-44,w:208,h:280},o:[{g:"l87",sp:{a:!0,x:-352,y:-44},ep:{a:!0,x:-464,y:196},pg:"l87",psg:"s8",b:{x:-464,y:-44,w:112,h:240},n:{l:{x:.9061831399952655,y:.4228854653311239},r:{x:-.9061831399952655,y:-.4228854653311238},le:{x:-400.7505348800379,y:79.38308372264899},re:{x:-415.2494651199621,y:72.61691627735101}}},{g:"l89",sp:{a:!0,x:-256,y:-4},ep:{a:!0,x:-352,y:-44},pg:"l89",psg:"s8",b:{x:-352,y:-44,w:96,h:40},n:{l:{x:-.3846153846153847,y:.9230769230769231},r:{x:.3846153846153846,y:-.9230769230769231},le:{x:-307.0769230769231,y:-16.615384615384613},re:{x:-300.9230769230769,y:-31.384615384615387}}},{g:"l90",sp:{a:!0,x:-376,y:236},ep:{a:!0,x:-256,y:-4},pg:"l90",psg:"s8",b:{x:-376,y:-4,w:120,h:240},n:{l:{x:-.894427190999916,y:-.44721359549995804},r:{x:.894427190999916,y:.4472135954999579},le:{x:-323.1554175279993,y:112.42229123600033},re:{x:-308.8445824720007,y:119.57770876399967}}},{g:"l88",sp:{a:!0,x:-464,y:196},ep:{a:!0,x:-376,y:236},pg:"l88",psg:"s8",b:{x:-464,y:196,w:88,h:40},n:{l:{x:.41380294430118403,y:-.9103664774626047},r:{x:-.4138029443011839,y:.9103664774626047},le:{x:-416.68957644559055,y:208.71706818029915},re:{x:-423.31042355440945,y:223.28293181970085}}}]},b:{l:1,s:null,f:{},b:{},bb:{x:-392,y:-60.55913978494624,w:40,h:17},o:[{g:"l59",sp:{a:!0,x:-392,y:-60},ep:{a:!0,x:-352,y:-44},pg:"l59",psg:"s5",b:{x:-392,y:-60,w:40,h:16},n:{l:{x:.3713906763541038,y:-.9284766908852594},r:{x:-.37139067635410367,y:.9284766908852594},le:{x:-369.0288745891672,y:-59.42781352708207},re:{x:-374.9711254108328,y:-44.57218647291793}}},{g:"l61b",sp:{x:-391.741935483871,y:-60.55913978494624},ep:{x:-392,y:-60},pg:"l61",psg:"s5",b:{x:-392,y:-60.55913978494624,w:.2580645161290249,h:.5591397849462396},n:{l:{x:.907959384500457,y:.41905817746173524},r:{x:-.907959384500457,y:-.4190581774617351},le:{x:-384.6072926659318,y:-56.927104472779234},re:{x:-399.13464281793915,y:-63.632035312167}}}]},bb:{x:-464,y:-60.55913978494624,w:208,h:297}},bb:{x:-464,y:-516,w:440,h:752}},b:{l:1,s:null,f:{},b:{},bb:{x:-256,y:-212,w:144,h:224},o:[{g:"l51",sp:{a:!0,x:-256,y:-4},ep:{a:!0,x:-216,y:12},pg:"l51",psg:"s3",b:{x:-256,y:-4,w:40,h:16},n:{l:{x:.3713906763541038,y:-.9284766908852594},r:{x:-.37139067635410367,y:.9284766908852594},le:{x:-233.02887458916717,y:-3.4278135270820753},re:{x:-238.97112541083283,y:11.427813527082076}}},{g:"l53",sp:{a:!1,x:-152,y:-212},ep:{a:!1,x:-256,y:-4},pg:"l53",psg:"s3",b:{x:-256,y:-212,w:104,h:208},n:{l:{x:.8944271909999159,y:.447213595499958},r:{x:-.8944271909999159,y:-.44721359549995787},le:{x:-196.84458247200067,y:-104.42229123600033},re:{x:-211.15541752799933,y:-111.57770876399967}}},{g:"l54",sp:{a:!0,x:-112,y:-196},ep:{a:!0,x:-152,y:-212},pg:"l54",psg:"s3",b:{x:-152,y:-212,w:40,h:16},n:{l:{x:-.3713906763541038,y:.9284766908852594},r:{x:.37139067635410367,y:-.9284766908852594},le:{x:-134.97112541083283,y:-196.57218647291793},re:{x:-129.02887458916717,y:-211.42781352708207}}},{g:"l52",sp:{a:!0,x:-216,y:12},ep:{a:!0,x:-112,y:-196},pg:"l52",psg:"s3",b:{x:-216,y:-196,w:104,h:208},n:{l:{x:-.8944271909999159,y:-.447213595499958},r:{x:.8944271909999159,y:.44721359549995787},le:{x:-171.15541752799933,y:-95.57770876399967},re:{x:-156.84458247200067,y:-88.42229123600033}}}]},bb:{x:-464,y:-516,w:440,h:752}},b:{l:0,s:{sp:{x:488,y:-28},ep:{x:448,y:-188}},f:{l:0,s:{sp:{x:208,y:-156},ep:{x:256,y:52}},f:{l:1,s:null,f:{},b:{},bb:{x:208,y:-220,w:280,h:296},o:[{g:"l16",sp:{a:!0,x:328,y:-220},ep:{a:!0,x:208,y:-156},pg:"l16",psg:"s1",b:{x:208,y:-220,w:120,h:64},n:{l:{x:.4705882352941176,y:.8823529411764706},r:{x:-.4705882352941177,y:-.8823529411764706},le:{x:271.7647058823529,y:-180.94117647058823},re:{x:264.2352941176471,y:-195.05882352941177}}},{g:"l18",sp:{a:!0,x:448,y:-188},ep:{a:!0,x:328,y:-220},pg:"l18",psg:"s1",b:{x:328,y:-220,w:120,h:32},n:{l:{x:-.2576626505603324,y:.9662349396012463},r:{x:.2576626505603323,y:-.9662349396012463},le:{x:385.9386987955173,y:-196.27012048319003},re:{x:390.0613012044827,y:-211.72987951680997}}},{g:"l20",sp:{a:!1,x:488,y:-28},ep:{a:!1,x:448,y:-188},pg:"l20",psg:"s1",b:{x:448,y:-188,w:40,h:160},n:{l:{x:-.9701425001453319,y:.2425356250363329},r:{x:.9701425001453319,y:-.24253562503633302},le:{x:460.23885999883737,y:-106.05971499970934},re:{x:475.76114000116263,y:-109.94028500029066}}},{g:"l21",sp:{a:!0,x:384,y:76},ep:{a:!0,x:488,y:-28},pg:"l21",psg:"s1",b:{x:384,y:-28,w:104,h:104},n:{l:{x:-.7071067811865476,y:-.7071067811865476},r:{x:.7071067811865476,y:.7071067811865476},le:{x:430.34314575050763,y:18.34314575050762},re:{x:441.65685424949237,y:29.65685424949238}}},{g:"l19",sp:{a:!0,x:256,y:52},ep:{a:!0,x:384,y:76},pg:"l19",psg:"s1",b:{x:256,y:52,w:128,h:24},n:{l:{x:.18428853505018541,y:-.9828721869343219},r:{x:-.1842885350501853,y:.9828721869343219},le:{x:321.4743082804015,y:56.137022504525426},re:{x:318.5256917195985,y:71.86297749547458}}},{g:"l17",sp:{a:!0,x:208,y:-156},ep:{a:!0,x:256,y:52},pg:"l17",psg:"s1",b:{x:208,y:-156,w:48,h:208},n:{l:{x:.9743911956946198,y:-.22485950669875837},r:{x:-.9743911956946198,y:.22485950669875848},le:{x:239.79512956555695,y:-53.798876053590064},re:{x:224.20487043444305,y:-50.20112394640993}}}]},b:{l:1,s:null,f:{},b:{},bb:{x:-216,y:-196,w:472,h:376},o:[{g:"l5",sp:{a:!0,x:-216,y:12},ep:{a:!0,x:-24,y:180},pg:"l5",psg:"s0",b:{x:-216,y:12,w:192,h:168},n:{l:{x:.658504607868518,y:-.7525766947068778},r:{x:-.658504607868518,y:.7525766947068778},le:{x:-114.73196313705185,y:89.97938644234497},re:{x:-125.26803686294815,y:102.02061355765503}}},{g:"l7",sp:{a:!1,x:-112,y:-196},ep:{a:!1,x:-216,y:12},pg:"l7",psg:"s0",b:{x:-216,y:-196,w:104,h:208},n:{l:{x:.8944271909999159,y:.447213595499958},r:{x:-.8944271909999159,y:-.44721359549995787},le:{x:-156.84458247200067,y:-88.42229123600033},re:{x:-171.15541752799933,y:-95.57770876399967}}},{g:"l9",sp:{a:!0,x:208,y:-156},ep:{a:!0,x:-112,y:-196},pg:"l9",psg:"s0",b:{x:-112,y:-196,w:320,h:40},n:{l:{x:-.12403473458920852,y:.9922778767136677},r:{x:.12403473458920841,y:-.9922778767136677},le:{x:47.007722123286335,y:-168.06177698629065},re:{x:48.992277876713665,y:-183.93822301370935}}},{g:"l8",sp:{a:!1,x:256,y:52},ep:{a:!1,x:208,y:-156},pg:"l8",psg:"s0",b:{x:208,y:-156,w:48,h:208},n:{l:{x:-.9743911956946198,y:.22485950669875837},r:{x:.9743911956946198,y:-.22485950669875848},le:{x:224.20487043444305,y:-50.201123946409936},re:{x:239.79512956555695,y:-53.79887605359007}}},{g:"l6",sp:{a:!0,x:-24,y:180},ep:{a:!0,x:256,y:52},pg:"l6",psg:"s0",b:{x:-24,y:52,w:280,h:128},n:{l:{x:-.4157597602677943,y:-.9094744755858002},r:{x:.41575976026779443,y:.9094744755858002},le:{x:112.67392191785764,y:108.7242041953136},re:{x:119.32607808214236,y:123.2757958046864}}}]},bb:{x:-216,y:-220,w:704,h:400}},b:{l:1,s:null,f:{},b:{},bb:{x:448,y:-284,w:432,h:280},o:[{g:"l27",sp:{a:!0,x:672,y:-284},ep:{a:!0,x:448,y:-188},pg:"l27",psg:"s2",b:{x:448,y:-284,w:224,h:96},n:{l:{x:.3939192985791676,y:.9191450300180578},r:{x:-.3939192985791677,y:-.9191450300180578},le:{x:563.1513543886333,y:-228.64683975985554},re:{x:556.8486456113667,y:-243.35316024014446}}},{g:"l29",sp:{a:!0,x:864,y:-204},ep:{a:!0,x:672,y:-284},pg:"l29",psg:"s2",b:{x:672,y:-284,w:192,h:80},n:{l:{x:-.3846153846153847,y:.9230769230769231},r:{x:.3846153846153846,y:-.9230769230769231},le:{x:764.9230769230769,y:-236.6153846153846},re:{x:771.0769230769231,y:-251.3846153846154}}},{g:"l31",sp:{a:!0,x:880,y:-108},ep:{a:!0,x:864,y:-204},pg:"l31",psg:"s2",b:{x:864,y:-204,w:16,h:96},n:{l:{x:-.9863939238321437,y:.16439898730535724},r:{x:.9863939238321437,y:-.16439898730535735},le:{x:864.1088486093429,y:-154.68480810155714},re:{x:879.8911513906571,y:-157.31519189844286}}},{g:"l32",sp:{a:!0,x:728,y:-4},ep:{a:!0,x:880,y:-108},pg:"l32",psg:"s2",b:{x:728,y:-108,w:152,h:104},n:{l:{x:-.5646839155919902,y:-.8253072612498318},r:{x:.5646839155919902,y:.8253072612498318},le:{x:799.4825286752641,y:-62.602458089998656},re:{x:808.5174713247359,y:-49.397541910001344}}},{g:"l30",sp:{a:!0,x:488,y:-28},ep:{a:!0,x:728,y:-4},pg:"l30",psg:"s2",b:{x:488,y:-28,w:240,h:24},n:{l:{x:.09950371902099897,y:-.9950371902099892},r:{x:-.09950371902099886,y:.9950371902099892},le:{x:608.796029752168,y:-23.960297521679912},re:{x:607.203970247832,y:-8.039702478320088}}},{g:"l28",sp:{a:!0,x:448,y:-188},ep:{a:!0,x:488,y:-28},pg:"l28",psg:"s2",b:{x:448,y:-188,w:40,h:160},n:{l:{x:.9701425001453319,y:-.2425356250363329},r:{x:-.9701425001453319,y:.24253562503633302},le:{x:475.76114000116263,y:-109.94028500029066},re:{x:460.23885999883737,y:-106.05971499970934}}}]},bb:{x:-216,y:-284,w:1096,h:464}},bb:{x:-464,y:-516,w:1344,h:752}},t:[{g:"t1",p:{x:660,y:-129,z:0},o:{x:-.9956726957313967,y:.09292945160159703},w:"npcpistol",t:"monster01",pn:[],ll:1,se:!1},{g:"t3",p:{x:596,y:-80,z:0},o:{x:-.9909924304103233,y:.13391789600139503},w:"npcpistol",t:"monster01",pn:[],ll:1,se:!1},{g:"t2",p:{x:521,y:-152,z:0},o:{x:-.9997830567281121,y:.02082881368183567},w:"npcpistol",t:"monster01",pn:[],ll:1,se:!1},{g:"t4",p:{x:362,y:-143,z:0},o:{x:.99,y:0},w:"none",t:"barrel01",ll:1,se:!1},{g:"t5",p:{x:285,y:7,z:0},o:{x:.99,y:0},w:"none",t:"deadtree01",ll:1,se:!1},{g:"t0",p:{x:28,y:-2,z:0},o:{x:.99,y:0},w:"none",t:"playerstart",ll:1,se:!1}],pno:{x:18,y:16},pn:[[{x:-432,y:-496,mX:0,mY:0,s:"",v:!1},{x:-400,y:-496,mX:1,mY:0,s:"",v:!1},{x:-368,y:-496,mX:2,mY:0,s:"",v:!1},{x:-336,y:-496,mX:3,mY:0,s:"",v:!1},{x:-304,y:-496,mX:4,mY:0,s:"",v:!1},{x:-272,y:-496,mX:5,mY:0,s:"",v:!1},{x:-240,y:-496,mX:6,mY:0,s:"",v:!1},{x:-208,y:-496,mX:7,mY:0,s:"",v:!1},{x:-176,y:-496,mX:8,mY:0,s:"",v:!1},{x:-144,y:-496,mX:9,mY:0,s:"s9",v:!1},{x:-112,y:-496,mX:10,mY:0,s:"s9",v:!0,br:!1},{x:-80,y:-496,mX:11,mY:0,s:"",v:!1},{x:-48,y:-496,mX:12,mY:0,s:"",v:!1},{x:-16,y:-496,mX:13,mY:0,s:"",v:!1},{x:16,y:-496,mX:14,mY:0,s:"",v:!1},{x:48,y:-496,mX:15,mY:0,s:"",v:!1},{x:80,y:-496,mX:16,mY:0,s:"",v:!1},{x:112,y:-496,mX:17,mY:0,s:"",v:!1},{x:144,y:-496,mX:18,mY:0,s:"",v:!1},{x:176,y:-496,mX:19,mY:0,s:"",v:!1},{x:208,y:-496,mX:20,mY:0,s:"",v:!1},{x:240,y:-496,mX:21,mY:0,s:"",v:!1},{x:272,y:-496,mX:22,mY:0,s:"",v:!1},{x:304,y:-496,mX:23,mY:0,s:"",v:!1},{x:336,y:-496,mX:24,mY:0,s:"",v:!1},{x:368,y:-496,mX:25,mY:0,s:"",v:!1},{x:400,y:-496,mX:26,mY:0,s:"",v:!1},{x:432,y:-496,mX:27,mY:0,s:"",v:!1},{x:464,y:-496,mX:28,mY:0,s:"",v:!1},{x:496,y:-496,mX:29,mY:0,s:"",v:!1},{x:528,y:-496,mX:30,mY:0,s:"",v:!1},{x:560,y:-496,mX:31,mY:0,s:"",v:!1},{x:592,y:-496,mX:32,mY:0,s:"",v:!1},{x:624,y:-496,mX:33,mY:0,s:"",v:!1},{x:656,y:-496,mX:34,mY:0,s:"",v:!1},{x:688,y:-496,mX:35,mY:0,s:"",v:!1},{x:720,y:-496,mX:36,mY:0,s:"",v:!1},{x:752,y:-496,mX:37,mY:0,s:"",v:!1},{x:784,y:-496,mX:38,mY:0,s:"",v:!1},{x:816,y:-496,mX:39,mY:0,s:"",v:!1},{x:848,y:-496,mX:40,mY:0,s:"",v:!1}],[{x:-432,y:-464,mX:0,mY:1,s:"",v:!1},{x:-400,y:-464,mX:1,mY:1,s:"",v:!1},{x:-368,y:-464,mX:2,mY:1,s:"",v:!1},{x:-336,y:-464,mX:3,mY:1,s:"",v:!1},{x:-304,y:-464,mX:4,mY:1,s:"",v:!1},{x:-272,y:-464,mX:5,mY:1,s:"",v:!1},{x:-240,y:-464,mX:6,mY:1,s:"",v:!1},{x:-208,y:-464,mX:7,mY:1,s:"",v:!1},{x:-176,y:-464,mX:8,mY:1,s:"",v:!1},{x:-144,y:-464,mX:9,mY:1,s:"s9",v:!0,br:!1},{x:-112,y:-464,mX:10,mY:1,s:"s9",v:!0,br:!1},{x:-80,y:-464,mX:11,mY:1,s:"s9",v:!0,br:!1},{x:-48,y:-464,mX:12,mY:1,s:"s9",v:!0,br:!1},{x:-16,y:-464,mX:13,mY:1,s:"",v:!1},{x:16,y:-464,mX:14,mY:1,s:"",v:!1},{x:48,y:-464,mX:15,mY:1,s:"",v:!1},{x:80,y:-464,mX:16,mY:1,s:"",v:!1},{x:112,y:-464,mX:17,mY:1,s:"",v:!1},{x:144,y:-464,mX:18,mY:1,s:"",v:!1},{x:176,y:-464,mX:19,mY:1,s:"",v:!1},{x:208,y:-464,mX:20,mY:1,s:"",v:!1},{x:240,y:-464,mX:21,mY:1,s:"",v:!1},{x:272,y:-464,mX:22,mY:1,s:"",v:!1},{x:304,y:-464,mX:23,mY:1,s:"",v:!1},{x:336,y:-464,mX:24,mY:1,s:"",v:!1},{x:368,y:-464,mX:25,mY:1,s:"",v:!1},{x:400,y:-464,mX:26,mY:1,s:"",v:!1},{x:432,y:-464,mX:27,mY:1,s:"",v:!1},{x:464,y:-464,mX:28,mY:1,s:"",v:!1},{x:496,y:-464,mX:29,mY:1,s:"",v:!1},{x:528,y:-464,mX:30,mY:1,s:"",v:!1},{x:560,y:-464,mX:31,mY:1,s:"",v:!1},{x:592,y:-464,mX:32,mY:1,s:"",v:!1},{x:624,y:-464,mX:33,mY:1,s:"",v:!1},{x:656,y:-464,mX:34,mY:1,s:"",v:!1},{x:688,y:-464,mX:35,mY:1,s:"",v:!1},{x:720,y:-464,mX:36,mY:1,s:"",v:!1},{x:752,y:-464,mX:37,mY:1,s:"",v:!1},{x:784,y:-464,mX:38,mY:1,s:"",v:!1},{x:816,y:-464,mX:39,mY:1,s:"",v:!1},{x:848,y:-464,mX:40,mY:1,s:"",v:!1}],[{x:-432,y:-432,mX:0,mY:2,s:"",v:!1},{x:-400,y:-432,mX:1,mY:2,s:"",v:!1},{x:-368,y:-432,mX:2,mY:2,s:"",v:!1},{x:-336,y:-432,mX:3,mY:2,s:"",v:!1},{x:-304,y:-432,mX:4,mY:2,s:"",v:!1},{x:-272,y:-432,mX:5,mY:2,s:"",v:!1},{x:-240,y:-432,mX:6,mY:2,s:"",v:!1},{x:-208,y:-432,mX:7,mY:2,s:"",v:!1},{x:-176,y:-432,mX:8,mY:2,s:"",v:!1},{x:-144,y:-432,mX:9,mY:2,s:"s9",v:!0,br:!1},{x:-112,y:-432,mX:10,mY:2,s:"s9",v:!0,br:!1},{x:-80,y:-432,mX:11,mY:2,s:"s9",v:!0,br:!1},{x:-48,y:-432,mX:12,mY:2,s:"s9",v:!1},{x:-16,y:-432,mX:13,mY:2,s:"",v:!1},{x:16,y:-432,mX:14,mY:2,s:"",v:!1},{x:48,y:-432,mX:15,mY:2,s:"",v:!1},{x:80,y:-432,mX:16,mY:2,s:"",v:!1},{x:112,y:-432,mX:17,mY:2,s:"",v:!1},{x:144,y:-432,mX:18,mY:2,s:"",v:!1},{x:176,y:-432,mX:19,mY:2,s:"",v:!1},{x:208,y:-432,mX:20,mY:2,s:"",v:!1},{x:240,y:-432,mX:21,mY:2,s:"",v:!1},{x:272,y:-432,mX:22,mY:2,s:"",v:!1},{x:304,y:-432,mX:23,mY:2,s:"",v:!1},{x:336,y:-432,mX:24,mY:2,s:"",v:!1},{x:368,y:-432,mX:25,mY:2,s:"",v:!1},{x:400,y:-432,mX:26,mY:2,s:"",v:!1},{x:432,y:-432,mX:27,mY:2,s:"",v:!1},{x:464,y:-432,mX:28,mY:2,s:"",v:!1},{x:496,y:-432,mX:29,mY:2,s:"",v:!1},{x:528,y:-432,mX:30,mY:2,s:"",v:!1},{x:560,y:-432,mX:31,mY:2,s:"",v:!1},{x:592,y:-432,mX:32,mY:2,s:"",v:!1},{x:624,y:-432,mX:33,mY:2,s:"",v:!1},{x:656,y:-432,mX:34,mY:2,s:"",v:!1},{x:688,y:-432,mX:35,mY:2,s:"",v:!1},{x:720,y:-432,mX:36,mY:2,s:"",v:!1},{x:752,y:-432,mX:37,mY:2,s:"",v:!1},{x:784,y:-432,mX:38,mY:2,s:"",v:!1},{x:816,y:-432,mX:39,mY:2,s:"",v:!1},{x:848,y:-432,mX:40,mY:2,s:"",v:!1}],[{x:-432,y:-400,mX:0,mY:3,s:"",v:!1},{x:-400,y:-400,mX:1,mY:3,s:"",v:!1},{x:-368,y:-400,mX:2,mY:3,s:"",v:!1},{x:-336,y:-400,mX:3,mY:3,s:"",v:!1},{x:-304,y:-400,mX:4,mY:3,s:"",v:!1},{x:-272,y:-400,mX:5,mY:3,s:"",v:!1},{x:-240,y:-400,mX:6,mY:3,s:"",v:!1},{x:-208,y:-400,mX:7,mY:3,s:"",v:!1},{x:-176,y:-400,mX:8,mY:3,s:"s9",v:!0,br:!1},{x:-144,y:-400,mX:9,mY:3,s:"s9",v:!0,br:!1},{x:-112,y:-400,mX:10,mY:3,s:"s9",v:!0,br:!1},{x:-80,y:-400,mX:11,mY:3,s:"s9",v:!0,br:!1},{x:-48,y:-400,mX:12,mY:3,s:"",v:!1},{x:-16,y:-400,mX:13,mY:3,s:"",v:!1},{x:16,y:-400,mX:14,mY:3,s:"",v:!1},{x:48,y:-400,mX:15,mY:3,s:"",v:!1},{x:80,y:-400,mX:16,mY:3,s:"",v:!1},{x:112,y:-400,mX:17,mY:3,s:"",v:!1},{x:144,y:-400,mX:18,mY:3,s:"",v:!1},{x:176,y:-400,mX:19,mY:3,s:"",v:!1},{x:208,y:-400,mX:20,mY:3,s:"",v:!1},{x:240,y:-400,mX:21,mY:3,s:"",v:!1},{x:272,y:-400,mX:22,mY:3,s:"",v:!1},{x:304,y:-400,mX:23,mY:3,s:"",v:!1},{x:336,y:-400,mX:24,mY:3,s:"",v:!1},{x:368,y:-400,mX:25,mY:3,s:"",v:!1},{x:400,y:-400,mX:26,mY:3,s:"",v:!1},{x:432,y:-400,mX:27,mY:3,s:"",v:!1},{x:464,y:-400,mX:28,mY:3,s:"",v:!1},{x:496,y:-400,mX:29,mY:3,s:"",v:!1},{x:528,y:-400,mX:30,mY:3,s:"",v:!1},{x:560,y:-400,mX:31,mY:3,s:"",v:!1},{x:592,y:-400,mX:32,mY:3,s:"",v:!1},{x:624,y:-400,mX:33,mY:3,s:"",v:!1},{x:656,y:-400,mX:34,mY:3,s:"",v:!1},{x:688,y:-400,mX:35,mY:3,s:"",v:!1},{x:720,y:-400,mX:36,mY:3,s:"",v:!1},{x:752,y:-400,mX:37,mY:3,s:"",v:!1},{x:784,y:-400,mX:38,mY:3,s:"",v:!1},{x:816,y:-400,mX:39,mY:3,s:"",v:!1},{x:848,y:-400,mX:40,mY:3,s:"",v:!1}],[{x:-432,y:-368,mX:0,mY:4,s:"",v:!1},{x:-400,
y:-368,mX:1,mY:4,s:"",v:!1},{x:-368,y:-368,mX:2,mY:4,s:"",v:!1},{x:-336,y:-368,mX:3,mY:4,s:"",v:!1},{x:-304,y:-368,mX:4,mY:4,s:"",v:!1},{x:-272,y:-368,mX:5,mY:4,s:"",v:!1},{x:-240,y:-368,mX:6,mY:4,s:"",v:!1},{x:-208,y:-368,mX:7,mY:4,s:"",v:!1},{x:-176,y:-368,mX:8,mY:4,s:"s9",v:!0,br:!1},{x:-144,y:-368,mX:9,mY:4,s:"s9",v:!0,br:!1},{x:-112,y:-368,mX:10,mY:4,s:"s9",v:!0,br:!1},{x:-80,y:-368,mX:11,mY:4,s:"s9",v:!1},{x:-48,y:-368,mX:12,mY:4,s:"",v:!1},{x:-16,y:-368,mX:13,mY:4,s:"",v:!1},{x:16,y:-368,mX:14,mY:4,s:"",v:!1},{x:48,y:-368,mX:15,mY:4,s:"",v:!1},{x:80,y:-368,mX:16,mY:4,s:"",v:!1},{x:112,y:-368,mX:17,mY:4,s:"",v:!1},{x:144,y:-368,mX:18,mY:4,s:"",v:!1},{x:176,y:-368,mX:19,mY:4,s:"",v:!1},{x:208,y:-368,mX:20,mY:4,s:"",v:!1},{x:240,y:-368,mX:21,mY:4,s:"",v:!1},{x:272,y:-368,mX:22,mY:4,s:"",v:!1},{x:304,y:-368,mX:23,mY:4,s:"",v:!1},{x:336,y:-368,mX:24,mY:4,s:"",v:!1},{x:368,y:-368,mX:25,mY:4,s:"",v:!1},{x:400,y:-368,mX:26,mY:4,s:"",v:!1},{x:432,y:-368,mX:27,mY:4,s:"",v:!1},{x:464,y:-368,mX:28,mY:4,s:"",v:!1},{x:496,y:-368,mX:29,mY:4,s:"",v:!1},{x:528,y:-368,mX:30,mY:4,s:"",v:!1},{x:560,y:-368,mX:31,mY:4,s:"",v:!1},{x:592,y:-368,mX:32,mY:4,s:"",v:!1},{x:624,y:-368,mX:33,mY:4,s:"",v:!1},{x:656,y:-368,mX:34,mY:4,s:"",v:!1},{x:688,y:-368,mX:35,mY:4,s:"",v:!1},{x:720,y:-368,mX:36,mY:4,s:"",v:!1},{x:752,y:-368,mX:37,mY:4,s:"",v:!1},{x:784,y:-368,mX:38,mY:4,s:"",v:!1},{x:816,y:-368,mX:39,mY:4,s:"",v:!1},{x:848,y:-368,mX:40,mY:4,s:"",v:!1}],[{x:-432,y:-336,mX:0,mY:5,s:"",v:!1},{x:-400,y:-336,mX:1,mY:5,s:"",v:!1},{x:-368,y:-336,mX:2,mY:5,s:"",v:!1},{x:-336,y:-336,mX:3,mY:5,s:"",v:!1},{x:-304,y:-336,mX:4,mY:5,s:"",v:!1},{x:-272,y:-336,mX:5,mY:5,s:"",v:!1},{x:-240,y:-336,mX:6,mY:5,s:"",v:!1},{x:-208,y:-336,mX:7,mY:5,s:"s9",v:!0,br:!1},{x:-176,y:-336,mX:8,mY:5,s:"s9",v:!0,br:!1},{x:-144,y:-336,mX:9,mY:5,s:"s9",v:!0,br:!1},{x:-112,y:-336,mX:10,mY:5,s:"s9",v:!0,br:!1},{x:-80,y:-336,mX:11,mY:5,s:"",v:!1},{x:-48,y:-336,mX:12,mY:5,s:"",v:!1},{x:-16,y:-336,mX:13,mY:5,s:"",v:!1},{x:16,y:-336,mX:14,mY:5,s:"",v:!1},{x:48,y:-336,mX:15,mY:5,s:"",v:!1},{x:80,y:-336,mX:16,mY:5,s:"",v:!1},{x:112,y:-336,mX:17,mY:5,s:"",v:!1},{x:144,y:-336,mX:18,mY:5,s:"",v:!1},{x:176,y:-336,mX:19,mY:5,s:"",v:!1},{x:208,y:-336,mX:20,mY:5,s:"",v:!1},{x:240,y:-336,mX:21,mY:5,s:"",v:!1},{x:272,y:-336,mX:22,mY:5,s:"",v:!1},{x:304,y:-336,mX:23,mY:5,s:"",v:!1},{x:336,y:-336,mX:24,mY:5,s:"",v:!1},{x:368,y:-336,mX:25,mY:5,s:"",v:!1},{x:400,y:-336,mX:26,mY:5,s:"",v:!1},{x:432,y:-336,mX:27,mY:5,s:"",v:!1},{x:464,y:-336,mX:28,mY:5,s:"",v:!1},{x:496,y:-336,mX:29,mY:5,s:"",v:!1},{x:528,y:-336,mX:30,mY:5,s:"",v:!1},{x:560,y:-336,mX:31,mY:5,s:"",v:!1},{x:592,y:-336,mX:32,mY:5,s:"",v:!1},{x:624,y:-336,mX:33,mY:5,s:"",v:!1},{x:656,y:-336,mX:34,mY:5,s:"",v:!1},{x:688,y:-336,mX:35,mY:5,s:"",v:!1},{x:720,y:-336,mX:36,mY:5,s:"",v:!1},{x:752,y:-336,mX:37,mY:5,s:"",v:!1},{x:784,y:-336,mX:38,mY:5,s:"",v:!1},{x:816,y:-336,mX:39,mY:5,s:"",v:!1},{x:848,y:-336,mX:40,mY:5,s:"",v:!1}],[{x:-432,y:-304,mX:0,mY:6,s:"",v:!1},{x:-400,y:-304,mX:1,mY:6,s:"",v:!1},{x:-368,y:-304,mX:2,mY:6,s:"",v:!1},{x:-336,y:-304,mX:3,mY:6,s:"",v:!1},{x:-304,y:-304,mX:4,mY:6,s:"",v:!1},{x:-272,y:-304,mX:5,mY:6,s:"",v:!1},{x:-240,y:-304,mX:6,mY:6,s:"",v:!1},{x:-208,y:-304,mX:7,mY:6,s:"s9",v:!0,br:!1},{x:-176,y:-304,mX:8,mY:6,s:"s9",v:!0,br:!1},{x:-144,y:-304,mX:9,mY:6,s:"s9",v:!0,br:!1},{x:-112,y:-304,mX:10,mY:6,s:"s9",v:!1},{x:-80,y:-304,mX:11,mY:6,s:"",v:!1},{x:-48,y:-304,mX:12,mY:6,s:"",v:!1},{x:-16,y:-304,mX:13,mY:6,s:"",v:!1},{x:16,y:-304,mX:14,mY:6,s:"",v:!1},{x:48,y:-304,mX:15,mY:6,s:"",v:!1},{x:80,y:-304,mX:16,mY:6,s:"",v:!1},{x:112,y:-304,mX:17,mY:6,s:"",v:!1},{x:144,y:-304,mX:18,mY:6,s:"",v:!1},{x:176,y:-304,mX:19,mY:6,s:"",v:!1},{x:208,y:-304,mX:20,mY:6,s:"",v:!1},{x:240,y:-304,mX:21,mY:6,s:"",v:!1},{x:272,y:-304,mX:22,mY:6,s:"",v:!1},{x:304,y:-304,mX:23,mY:6,s:"",v:!1},{x:336,y:-304,mX:24,mY:6,s:"",v:!1},{x:368,y:-304,mX:25,mY:6,s:"",v:!1},{x:400,y:-304,mX:26,mY:6,s:"",v:!1},{x:432,y:-304,mX:27,mY:6,s:"",v:!1},{x:464,y:-304,mX:28,mY:6,s:"",v:!1},{x:496,y:-304,mX:29,mY:6,s:"",v:!1},{x:528,y:-304,mX:30,mY:6,s:"",v:!1},{x:560,y:-304,mX:31,mY:6,s:"",v:!1},{x:592,y:-304,mX:32,mY:6,s:"",v:!1},{x:624,y:-304,mX:33,mY:6,s:"",v:!1},{x:656,y:-304,mX:34,mY:6,s:"",v:!1},{x:688,y:-304,mX:35,mY:6,s:"",v:!1},{x:720,y:-304,mX:36,mY:6,s:"",v:!1},{x:752,y:-304,mX:37,mY:6,s:"",v:!1},{x:784,y:-304,mX:38,mY:6,s:"",v:!1},{x:816,y:-304,mX:39,mY:6,s:"",v:!1},{x:848,y:-304,mX:40,mY:6,s:"",v:!1}],[{x:-432,y:-272,mX:0,mY:7,s:"",v:!1},{x:-400,y:-272,mX:1,mY:7,s:"",v:!1},{x:-368,y:-272,mX:2,mY:7,s:"",v:!1},{x:-336,y:-272,mX:3,mY:7,s:"",v:!1},{x:-304,y:-272,mX:4,mY:7,s:"",v:!1},{x:-272,y:-272,mX:5,mY:7,s:"",v:!1},{x:-240,y:-272,mX:6,mY:7,s:"s9",v:!1},{x:-208,y:-272,mX:7,mY:7,s:"s9",v:!0,br:!1},{x:-176,y:-272,mX:8,mY:7,s:"s9",v:!0,br:!1},{x:-144,y:-272,mX:9,mY:7,s:"s9",v:!0,br:!1},{x:-112,y:-272,mX:10,mY:7,s:"",v:!1},{x:-80,y:-272,mX:11,mY:7,s:"",v:!1},{x:-48,y:-272,mX:12,mY:7,s:"",v:!1},{x:-16,y:-272,mX:13,mY:7,s:"",v:!1},{x:16,y:-272,mX:14,mY:7,s:"",v:!1},{x:48,y:-272,mX:15,mY:7,s:"",v:!1},{x:80,y:-272,mX:16,mY:7,s:"",v:!1},{x:112,y:-272,mX:17,mY:7,s:"",v:!1},{x:144,y:-272,mX:18,mY:7,s:"",v:!1},{x:176,y:-272,mX:19,mY:7,s:"",v:!1},{x:208,y:-272,mX:20,mY:7,s:"",v:!1},{x:240,y:-272,mX:21,mY:7,s:"",v:!1},{x:272,y:-272,mX:22,mY:7,s:"",v:!1},{x:304,y:-272,mX:23,mY:7,s:"",v:!1},{x:336,y:-272,mX:24,mY:7,s:"",v:!1},{x:368,y:-272,mX:25,mY:7,s:"",v:!1},{x:400,y:-272,mX:26,mY:7,s:"",v:!1},{x:432,y:-272,mX:27,mY:7,s:"",v:!1},{x:464,y:-272,mX:28,mY:7,s:"",v:!1},{x:496,y:-272,mX:29,mY:7,s:"",v:!1},{x:528,y:-272,mX:30,mY:7,s:"",v:!1},{x:560,y:-272,mX:31,mY:7,s:"",v:!1},{x:592,y:-272,mX:32,mY:7,s:"",v:!1},{x:624,y:-272,mX:33,mY:7,s:"",v:!1},{x:656,y:-272,mX:34,mY:7,s:"s2",v:!1},{x:688,y:-272,mX:35,mY:7,s:"s2",v:!1},{x:720,y:-272,mX:36,mY:7,s:"",v:!1},{x:752,y:-272,mX:37,mY:7,s:"",v:!1},{x:784,y:-272,mX:38,mY:7,s:"",v:!1},{x:816,y:-272,mX:39,mY:7,s:"",v:!1},{x:848,y:-272,mX:40,mY:7,s:"",v:!1}],[{x:-432,y:-240,mX:0,mY:8,s:"",v:!1},{x:-400,y:-240,mX:1,mY:8,s:"",v:!1},{x:-368,y:-240,mX:2,mY:8,s:"",v:!1},{x:-336,y:-240,mX:3,mY:8,s:"",v:!1},{x:-304,y:-240,mX:4,mY:8,s:"s5",v:!1},{x:-272,y:-240,mX:5,mY:8,s:"s5",v:!0,br:!1},{x:-240,y:-240,mX:6,mY:8,s:"s4",v:!0,br:!1},{x:-208,y:-240,mX:7,mY:8,s:"s9",v:!0,br:!1},{x:-176,y:-240,mX:8,mY:8,s:"s9",v:!0,br:!1},{x:-144,y:-240,mX:9,mY:8,s:"s9",v:!1},{x:-112,y:-240,mX:10,mY:8,s:"",v:!1},{x:-80,y:-240,mX:11,mY:8,s:"",v:!1},{x:-48,y:-240,mX:12,mY:8,s:"",v:!1},{x:-16,y:-240,mX:13,mY:8,s:"",v:!1},{x:16,y:-240,mX:14,mY:8,s:"",v:!1},{x:48,y:-240,mX:15,mY:8,s:"",v:!1},{x:80,y:-240,mX:16,mY:8,s:"",v:!1},{x:112,y:-240,mX:17,mY:8,s:"",v:!1},{x:144,y:-240,mX:18,mY:8,s:"",v:!1},{x:176,y:-240,mX:19,mY:8,s:"",v:!1},{x:208,y:-240,mX:20,mY:8,s:"",v:!1},{x:240,y:-240,mX:21,mY:8,s:"",v:!1},{x:272,y:-240,mX:22,mY:8,s:"",v:!1},{x:304,y:-240,mX:23,mY:8,s:"",v:!1},{x:336,y:-240,mX:24,mY:8,s:"",v:!1},{x:368,y:-240,mX:25,mY:8,s:"",v:!1},{x:400,y:-240,mX:26,mY:8,s:"",v:!1},{x:432,y:-240,mX:27,mY:8,s:"",v:!1},{x:464,y:-240,mX:28,mY:8,s:"",v:!1},{x:496,y:-240,mX:29,mY:8,s:"",v:!1},{x:528,y:-240,mX:30,mY:8,s:"",v:!1},{x:560,y:-240,mX:31,mY:8,s:"",v:!1},{x:592,y:-240,mX:32,mY:8,s:"s2",v:!0,br:!1},{x:624,y:-240,mX:33,mY:8,s:"s2",v:!0,br:!1},{x:656,y:-240,mX:34,mY:8,s:"s2",v:!0,br:!1},{x:688,y:-240,mX:35,mY:8,s:"s2",v:!0,br:!1},{x:720,y:-240,mX:36,mY:8,s:"s2",v:!0,br:!1},{x:752,y:-240,mX:37,mY:8,s:"s2",v:!0,br:!1},{x:784,y:-240,mX:38,mY:8,s:"",v:!1},{x:816,y:-240,mX:39,mY:8,s:"",v:!1},{x:848,y:-240,mX:40,mY:8,s:"",v:!1}],[{x:-432,y:-208,mX:0,mY:9,s:"",v:!1},{x:-400,y:-208,mX:1,mY:9,s:"",v:!1},{x:-368,y:-208,mX:2,mY:9,s:"",v:!1},{x:-336,y:-208,mX:3,mY:9,s:"",v:!1},{x:-304,y:-208,mX:4,mY:9,s:"s5",v:!0,br:!1},{x:-272,y:-208,mX:5,mY:9,s:"s4",v:!0,br:!1},{x:-240,y:-208,mX:6,mY:9,s:"s4",v:!0,br:!1},{x:-208,y:-208,mX:7,mY:9,s:"s4",v:!0,br:!1},{x:-176,y:-208,mX:8,mY:9,s:"s4",v:!0,br:!1},{x:-144,y:-208,mX:9,mY:9,s:"s3",v:!1},{x:-112,y:-208,mX:10,mY:9,s:"",v:!1},{x:-80,y:-208,mX:11,mY:9,s:"",v:!1},{x:-48,y:-208,mX:12,mY:9,s:"",v:!1},{x:-16,y:-208,mX:13,mY:9,s:"",v:!1},{x:16,y:-208,mX:14,mY:9,s:"",v:!1},{x:48,y:-208,mX:15,mY:9,s:"",v:!1},{x:80,y:-208,mX:16,mY:9,s:"",v:!1},{x:112,y:-208,mX:17,mY:9,s:"",v:!1},{x:144,y:-208,mX:18,mY:9,s:"",v:!1},{x:176,y:-208,mX:19,mY:9,s:"",v:!1},{x:208,y:-208,mX:20,mY:9,s:"",v:!1},{x:240,y:-208,mX:21,mY:9,s:"",v:!1},{x:272,y:-208,mX:22,mY:9,s:"",v:!1},{x:304,y:-208,mX:23,mY:9,s:"",v:!1},{x:336,y:-208,mX:24,mY:9,s:"s1",v:!0,br:!1},{x:368,y:-208,mX:25,mY:9,s:"s1",v:!1},{x:400,y:-208,mX:26,mY:9,s:"",v:!1},{x:432,y:-208,mX:27,mY:9,s:"",v:!1},{x:464,y:-208,mX:28,mY:9,s:"",v:!1},{x:496,y:-208,mX:29,mY:9,s:"s2",v:!1},{x:528,y:-208,mX:30,mY:9,s:"s2",v:!0,br:!1},{x:560,y:-208,mX:31,mY:9,s:"s2",v:!0,br:!1},{x:592,y:-208,mX:32,mY:9,s:"s2",v:!0,br:!1},{x:624,y:-208,mX:33,mY:9,s:"s2",v:!0,br:!1},{x:656,y:-208,mX:34,mY:9,s:"s2",v:!0,br:!1},{x:688,y:-208,mX:35,mY:9,s:"s2",v:!0,br:!1},{x:720,y:-208,mX:36,mY:9,s:"s2",v:!0,br:!1},{x:752,y:-208,mX:37,mY:9,s:"s2",v:!0,br:!1},{x:784,y:-208,mX:38,mY:9,s:"s2",v:!0,br:!1},{x:816,y:-208,mX:39,mY:9,s:"s2",v:!0,br:!1},{x:848,y:-208,mX:40,mY:9,s:"s2",v:!1}],[{x:-432,y:-176,mX:0,mY:10,s:"",v:!1},{x:-400,y:-176,mX:1,mY:10,s:"",v:!1},{x:-368,y:-176,mX:2,mY:10,s:"",v:!1},{x:-336,y:-176,mX:3,mY:10,s:"s5",v:!1},{x:-304,y:-176,mX:4,mY:10,s:"s5",v:!0,br:!1},{x:-272,y:-176,mX:5,mY:10,s:"s4",v:!0,br:!1},{x:-240,y:-176,mX:6,mY:10,s:"s4",v:!0,br:!1},{x:-208,y:-176,mX:7,mY:10,s:"s4",v:!0,br:!1},{x:-176,y:-176,mX:8,mY:10,s:"s4",v:!0,br:!1},{x:-144,y:-176,mX:9,mY:10,s:"s3",v:!0,br:!1},{x:-112,y:-176,mX:10,mY:10,s:"s0",v:!0,br:!1},{x:-80,y:-176,mX:11,mY:10,s:"s0",v:!0,br:!1},{x:-48,y:-176,mX:12,mY:10,s:"s0",v:!0,br:!1},{x:-16,y:-176,mX:13,mY:10,s:"s0",v:!1},{x:16,y:-176,mX:14,mY:10,s:"s0",v:!1},{x:48,y:-176,mX:15,mY:10,s:"s0",v:!1},{x:80,y:-176,mX:16,mY:10,s:"",v:!1},{x:112,y:-176,mX:17,mY:10,s:"",v:!1},{x:144,y:-176,mX:18,mY:10,s:"",v:!1},{x:176,y:-176,mX:19,mY:10,s:"",v:!1},{x:208,y:-176,mX:20,mY:10,s:"",v:!1},{x:240,y:-176,mX:21,mY:10,s:"",v:!1},{x:272,y:-176,mX:22,mY:10,s:"s1",v:!0,br:!1},{x:304,y:-176,mX:23,mY:10,s:"s1",v:!0,br:!1},{x:336,y:-176,mX:24,mY:10,s:"s1",v:!0,br:!1},{x:368,y:-176,mX:25,mY:10,s:"s1",v:!0,br:!1},{x:400,y:-176,mX:26,mY:10,s:"s1",v:!0,br:!1},{x:432,y:-176,mX:27,mY:10,s:"s1",v:!0,br:!1},{x:464,y:-176,mX:28,mY:10,s:"s2",v:!0,br:!1},{x:496,y:-176,mX:29,mY:10,s:"s2",v:!0,br:!1},{x:528,y:-176,mX:30,mY:10,s:"s2",v:!0,br:!1},{x:560,y:-176,mX:31,mY:10,s:"s2",v:!0,br:!1},{x:592,y:-176,mX:32,mY:10,s:"s2",v:!0,br:!1},{x:624,y:-176,mX:33,mY:10,s:"s2",v:!0,br:!1},{x:656,y:-176,mX:34,mY:10,s:"s2",v:!0,br:!1},{x:688,y:-176,mX:35,mY:10,s:"s2",v:!0,br:!1},{x:720,y:-176,mX:36,mY:10,s:"s2",v:!0,br:!1},{x:752,y:-176,mX:37,mY:10,s:"s2",v:!0,br:!1},{x:784,y:-176,mX:38,mY:10,s:"s2",v:!0,br:!1},{x:816,y:-176,mX:39,mY:10,s:"s2",v:!0,br:!1},{x:848,y:-176,mX:40,mY:10,s:"s2",v:!0,br:!1}],[{x:-432,y:-144,mX:0,mY:11,s:"",v:!1},{x:-400,y:-144,mX:1,mY:11,s:"",v:!1},{x:-368,y:-144,mX:2,mY:11,s:"",v:!1},{x:-336,y:-144,mX:3,mY:11,s:"s5",v:!0,br:!1},{x:-304,y:-144,mX:4,mY:11,s:"s4",v:!0,br:!1},{x:-272,y:-144,mX:5,mY:11,s:"s4",v:!0,br:!1},{x:-240,y:-144,mX:6,mY:11,s:"s4",v:!0,br:!1},{x:-208,y:-144,mX:7,mY:11,s:"s4",v:!0,br:!1},{x:-176,y:-144,mX:8,mY:11,s:"s3",v:!0,br:!1},{x:-144,y:-144,mX:9,mY:11,s:"s3",v:!0,br:!1},{x:-112,y:-144,mX:10,mY:11,s:"s0",v:!0,br:!1},{x:-80,y:-144,mX:11,mY:11,s:"s0",v:!0,br:!1},{x:-48,y:-144,mX:12,mY:11,s:"s0",v:!0,br:!1},{x:-16,y:-144,mX:13,mY:11,s:"s0",v:!0,br:!1},{x:16,y:-144,mX:14,mY:11,s:"s0",v:!0,br:!1},{x:48,y:-144,mX:15,mY:11,s:"s0",v:!0,br:!1},{x:80,y:-144,mX:16,mY:11,s:"s0",v:!0,br:!1},{x:112,y:-144,mX:17,mY:11,s:"s0",v:!0,br:!1},{x:144,y:-144,mX:18,mY:11,s:"s0",v:!0,br:!1},{x:176,y:-144,mX:19,mY:11,s:"s0",v:!0,br:!1},{x:208,y:-144,mX:20,mY:11,s:"s0",v:!0,br:!1},{x:240,y:-144,mX:21,mY:11,s:"s1",v:!0,br:!1},{x:272,y:-144,mX:22,mY:11,s:"s1",v:!0,br:!1},{x:304,y:-144,mX:23,mY:11,s:"s1",v:!0,br:!1},{x:336,y:-144,mX:24,mY:11,s:"s1",v:!0,br:!1},{x:368,y:-144,mX:25,mY:11,s:"s1",v:!1},{x:400,y:-144,mX:26,mY:11,s:"s1",v:!0,br:!1},{x:432,y:-144,mX:27,mY:11,s:"s1",v:!0,br:!1},{x:464,y:-144,mX:28,mY:11,s:"s2",v:!0,br:!1},{x:496,y:-144,mX:29,mY:11,s:"s2",v:!0,br:!1},{x:528,y:-144,mX:30,mY:11,s:"s2",v:!0,br:!1},{x:560,y:-144,mX:31,mY:11,s:"s2",v:!0,br:!1},{x:592,y:-144,mX:32,mY:11,s:"s2",v:!0,br:!1},{x:624,y:-144,mX:33,mY:11,s:"s2",v:!0,br:!1},{x:656,y:-144,mX:34,mY:11,s:"s2",v:!0,br:!1},{x:688,y:-144,mX:35,mY:11,s:"s2",v:!0,br:!1},{x:720,y:-144,mX:36,mY:11,s:"s2",v:!0,br:!1},{x:752,y:-144,mX:37,mY:11,s:"s2",v:!0,br:!1},{x:784,y:-144,mX:38,mY:11,s:"s2",v:!0,br:!1},{x:816,y:-144,mX:39,mY:11,s:"s2",v:!0,br:!1},{x:848,y:-144,mX:40,mY:11,s:"s2",v:!0,br:!1}],[{x:-432,y:-112,mX:0,mY:12,s:"",v:!1},{x:-400,y:-112,mX:1,mY:12,s:"",v:!1},{x:-368,y:-112,mX:2,mY:12,s:"s5",v:!1},{x:-336,y:-112,mX:3,mY:12,s:"s5",v:!0,br:!1},{x:-304,y:-112,mX:4,mY:12,s:"s4",v:!0,br:!1},{x:-272,y:-112,mX:5,mY:12,s:"s4",v:!0,br:!1},{x:-240,y:-112,mX:6,mY:12,s:"s4",v:!0,br:!1},{x:-208,y:-112,mX:7,mY:12,s:"s4",v:!0,br:!1},{x:-176,y:-112,mX:8,mY:12,s:"s3",v:!0,br:!1},{x:-144,y:-112,mX:9,mY:12,s:"s0",v:!0,br:!1},{x:-112,y:-112,mX:10,mY:12,s:"s0",v:!0,br:!1},{x:-80,y:-112,mX:11,mY:12,s:"s0",v:!0,br:!1},{x:-48,y:-112,mX:12,mY:12,s:"s0",v:!0,br:!1},{x:-16,y:-112,mX:13,mY:12,s:"s0",v:!0,br:!1},{x:16,y:-112,mX:14,mY:12,s:"s0",v:!0,br:!1},{x:48,y:-112,mX:15,mY:12,s:"s0",v:!0,br:!1},{x:80,y:-112,mX:16,mY:12,s:"s0",v:!0,br:!1},{x:112,y:-112,mX:17,mY:12,s:"s0",v:!0,br:!1},{x:144,y:-112,mX:18,mY:12,s:"s0",v:!0,br:!1},{x:176,y:-112,mX:19,mY:12,s:"s0",v:!0,br:!1},{x:208,y:-112,mX:20,mY:12,s:"s0",v:!0,br:!1},{x:240,y:-112,mX:21,mY:12,s:"s1",v:!0,br:!1},{x:272,y:-112,mX:22,mY:12,s:"s1",v:!0,br:!1},{x:304,y:-112,mX:23,mY:12,s:"s1",v:!0,br:!1},{x:336,y:-112,mX:24,mY:12,s:"s1",v:!0,br:!1},{x:368,y:-112,mX:25,mY:12,s:"s1",v:!0,br:!1},{x:400,y:-112,mX:26,mY:12,s:"s1",v:!0,br:!1},{x:432,y:-112,mX:27,mY:12,s:"s1",v:!0,br:!1},{x:464,y:-112,mX:28,mY:12,s:"s1",v:!0,br:!1},{x:496,y:-112,mX:29,mY:12,s:"s2",v:!0,br:!1},{x:528,y:-112,mX:30,mY:12,s:"s2",v:!0,br:!1},{x:560,y:-112,mX:31,mY:12,s:"s2",v:!0,br:!1},{x:592,y:-112,mX:32,mY:12,s:"s2",v:!0,br:!1},{x:624,y:-112,mX:33,mY:12,s:"s2",v:!0,br:!1},{x:656,y:-112,mX:34,mY:12,s:"s2",v:!0,br:!1},{x:688,y:-112,mX:35,mY:12,s:"s2",v:!0,br:!1},{x:720,y:-112,mX:36,mY:12,s:"s2",v:!0,br:!1},{x:752,y:-112,mX:37,mY:12,s:"s2",v:!0,br:!1},{x:784,y:-112,mX:38,mY:12,s:"s2",v:!0,br:!1},{x:816,y:-112,mX:39,mY:12,s:"s2",v:!0,br:!1},{x:848,y:-112,mX:40,mY:12,s:"s2",v:!0,br:!1}],[{x:-432,y:-80,mX:0,mY:13,s:"",v:!1},{x:-400,y:-80,mX:1,mY:13,s:"",v:!1},{x:-368,y:-80,mX:2,mY:13,s:"s5",v:!0,br:!1},{x:-336,y:-80,mX:3,mY:13,s:"s5",v:!0,br:!1},{x:-304,y:-80,mX:4,mY:13,s:"s4",v:!0,br:!1},{x:-272,y:-80,mX:5,mY:13,s:"s4",v:!0,br:!1},{x:-240,y:-80,mX:6,mY:13,s:"s4",v:!0,br:!1},{x:-208,y:-80,mX:7,mY:13,s:"s3",v:!0,br:!1},{x:-176,y:-80,mX:8,mY:13,s:"s3",v:!0,br:!1},{x:-144,y:-80,mX:9,mY:13,s:"s0",v:!0,br:!1},{x:-112,y:-80,mX:10,mY:13,s:"s0",v:!0,br:!1},{x:-80,y:-80,mX:11,mY:13,s:"s0",v:!0,br:!1},{x:-48,y:-80,mX:12,mY:13,s:"s0",v:!0,br:!1},{x:-16,y:-80,mX:13,mY:13,s:"s0",v:!0,br:!1},{x:16,y:-80,mX:14,mY:13,s:"s0",v:!0,br:!1},{x:48,y:-80,mX:15,mY:13,s:"s0",v:!0,br:!1},{x:80,y:-80,mX:16,mY:13,s:"s0",v:!0,br:!1},{x:112,y:-80,mX:17,mY:13,s:"s0",v:!0,br:!1},{x:144,y:-80,mX:18,mY:13,s:"s0",v:!0,br:!1},{x:176,y:-80,mX:19,mY:13,s:"s0",v:!0,br:!1},{x:208,y:-80,mX:20,mY:13,s:"s0",v:!0,br:!1},{x:240,y:-80,mX:21,mY:13,s:"s1",v:!0,br:!1},{x:272,y:-80,mX:22,mY:13,s:"s1",v:!0,br:!1},{x:304,y:-80,mX:23,mY:13,s:"s1",v:!0,br:!1},{x:336,y:-80,mX:24,mY:13,s:"s1",v:!0,br:!1},{x:368,y:-80,mX:25,mY:13,s:"s1",v:!0,br:!1},{x:400,y:-80,mX:26,mY:13,s:"s1",v:!0,br:!1},{x:432,y:-80,mX:27,mY:13,s:"s1",v:!0,br:!1},{x:464,y:-80,mX:28,mY:13,s:"s1",v:!0,br:!1},{x:496,y:-80,mX:29,mY:13,s:"s2",v:!0,br:!1},{x:528,y:-80,mX:30,mY:13,s:"s2",v:!0,br:!1},{x:560,y:-80,mX:31,mY:13,s:"s2",v:!0,br:!1},{x:592,y:-80,mX:32,mY:13,s:"s2",v:!0,br:!1},{x:624,y:-80,mX:33,mY:13,s:"s2",v:!0,br:!1},{x:656,y:-80,mX:34,mY:13,s:"s2",v:!0,br:!1},{x:688,y:-80,mX:35,mY:13,s:"s2",v:!0,br:!1},{x:720,y:-80,mX:36,mY:13,s:"s2",v:!0,br:!1},{x:752,y:-80,mX:37,mY:13,s:"s2",v:!0,br:!1},{x:784,y:-80,mX:38,mY:13,s:"s2",v:!0,br:!1},{x:816,y:-80,mX:39,mY:13,s:"s2",v:!0,br:!1},{x:848,y:-80,mX:40,mY:13,s:"",v:!1}],[{x:-432,y:-48,mX:0,mY:14,s:"",v:!1},{x:-400,y:-48,mX:1,mY:14,s:"",v:!1},{x:-368,y:-48,mX:2,mY:14,s:"",v:!1},{x:-336,y:-48,mX:3,mY:14,s:"s4",v:!0,br:!1},{x:-304,y:-48,mX:4,mY:14,s:"s4",v:!0,br:!1},{x:-272,y:-48,mX:5,mY:14,s:"s4",v:!0,br:!1},{x:-240,y:-48,mX:6,mY:14,s:"s4",v:!0,br:!1},{x:-208,y:-48,mX:7,mY:14,s:"s3",v:!0,br:!1},{x:-176,y:-48,mX:8,mY:14,s:"s0",v:!0,br:!1},{x:-144,y:-48,mX:9,mY:14,s:"s0",v:!0,br:!1},{x:-112,y:-48,mX:10,mY:14,s:"s0",v:!0,br:!1},{x:-80,y:-48,mX:11,mY:14,s:"s0",v:!0,br:!1},{x:-48,y:-48,mX:12,mY:14,s:"s0",v:!0,br:!1},{x:-16,y:-48,mX:13,mY:14,s:"s0",v:!0,br:!1},{x:16,y:-48,mX:14,mY:14,s:"s0",v:!0,br:!1},{x:48,y:-48,mX:15,mY:14,s:"s0",v:!0,br:!1},{x:80,y:-48,mX:16,mY:14,s:"s0",v:!0,br:!1},{x:112,y:-48,mX:17,mY:14,s:"s0",v:!0,br:!1},{x:144,y:-48,mX:18,mY:14,s:"s0",v:!0,br:!1},{x:176,y:-48,mX:19,mY:14,s:"s0",v:!0,br:!1},{x:208,y:-48,mX:20,mY:14,s:"s0",v:!0,br:!1},{x:240,y:-48,mX:21,mY:14,s:"s1",v:!0,br:!1},{x:272,y:-48,mX:22,mY:14,s:"s1",v:!0,br:!1},{x:304,y:-48,mX:23,mY:14,s:"s1",v:!0,br:!1},{x:336,y:-48,mX:24,mY:14,s:"s1",v:!0,br:!1},{x:368,y:-48,mX:25,mY:14,s:"s1",v:!0,br:!1},{x:400,y:-48,mX:26,mY:14,s:"s1",v:!0,br:!1},{x:432,y:-48,mX:27,mY:14,s:"s1",v:!0,br:!1},{x:464,y:-48,mX:28,mY:14,s:"s1",v:!0,br:!1},{x:496,y:-48,mX:29,mY:14,s:"s2",v:!0,br:!1},{x:528,y:-48,mX:30,mY:14,s:"s2",v:!0,br:!1},{x:560,y:-48,mX:31,mY:14,s:"s2",v:!0,br:!1},{x:592,y:-48,mX:32,mY:14,s:"s2",v:!0,br:!1},{x:624,y:-48,mX:33,mY:14,s:"s2",v:!0,br:!1},{x:656,y:-48,mX:34,mY:14,s:"s2",v:!0,br:!1},{x:688,y:-48,mX:35,mY:14,s:"s2",v:!0,br:!1},{x:720,y:-48,mX:36,mY:14,s:"s2",v:!0,br:!1},{x:752,y:-48,mX:37,mY:14,s:"s2",v:!0,br:!1},{x:784,y:-48,mX:38,mY:14,s:"s2",v:!1},{x:816,y:-48,mX:39,mY:14,s:"",v:!1},{x:848,y:-48,mX:40,mY:14,s:"",v:!1}],[{x:-432,y:-16,mX:0,mY:15,s:"",v:!1},{x:-400,y:-16,mX:1,mY:15,s:"",v:!1},{x:-368,y:-16,mX:2,mY:15,s:"",v:!1},{x:-336,y:-16,mX:3,mY:15,s:"s8",v:!0,br:!1},{x:-304,y:-16,mX:4,mY:15,s:"s8",v:!0,br:!1},{x:-272,y:-16,mX:5,mY:15,s:"s4",v:!0,br:!1},{x:-240,y:-16,mX:6,mY:15,s:"s3",v:!0,br:!1},{x:-208,y:-16,mX:7,mY:15,s:"s3",v:!0,br:!1},{x:-176,y:-16,mX:8,mY:15,s:"s0",v:!0,br:!1},{x:-144,y:-16,mX:9,mY:15,s:"s0",v:!0,br:!1},{x:-112,y:-16,mX:10,mY:15,s:"s0",v:!0,br:!1},{x:-80,y:-16,mX:11,mY:15,s:"s0",v:!0,br:!1},{x:-48,y:-16,mX:12,mY:15,s:"s0",v:!0,br:!1},{x:-16,y:-16,mX:13,mY:15,s:"s0",v:!0,br:!1},{x:16,y:-16,mX:14,mY:15,s:"s0",v:!0,br:!1},{x:48,y:-16,mX:15,mY:15,s:"s0",v:!0,br:!1},{x:80,y:-16,mX:16,mY:15,s:"s0",v:!0,br:!1},{x:112,y:-16,mX:17,mY:15,s:"s0",v:!0,br:!1},{x:144,y:-16,mX:18,mY:15,s:"s0",v:!0,br:!1},{x:176,y:-16,mX:19,mY:15,s:"s0",v:!0,br:!1},{x:208,y:-16,mX:20,mY:15,s:"s0",v:!0,br:!1},{x:240,y:-16,mX:21,mY:15,s:"s0",v:!0,br:!1},{x:272,y:-16,mX:22,mY:15,s:"s1",v:!1},{x:304,y:-16,mX:23,mY:15,s:"s1",v:!1},{x:336,y:-16,mX:24,mY:15,s:"s1",v:!0,br:!1},{x:368,y:-16,mX:25,mY:15,s:"s1",v:!0,br:!1},{x:400,y:-16,mX:26,mY:15,s:"s1",v:!0,br:!1},{x:432,y:-16,mX:27,mY:15,s:"s1",v:!0,br:!1},{x:464,y:-16,mX:28,mY:15,s:"s1",v:!0,br:!1},{x:496,y:-16,mX:29,mY:15,s:"",v:!1},{x:528,y:-16,mX:30,mY:15,s:"",v:!1},{x:560,y:-16,mX:31,mY:15,s:"",v:!1},{x:592,y:-16,mX:32,mY:15,s:"",v:!1},{x:624,y:-16,mX:33,mY:15,s:"s2",v:!1},{x:656,y:-16,mX:34,mY:15,s:"s2",v:!1},{x:688,y:-16,mX:35,mY:15,s:"s2",v:!1},{x:720,y:-16,mX:36,mY:15,s:"s2",v:!0,br:!1},{x:752,y:-16,mX:37,mY:15,s:"",v:!1},{x:784,y:-16,mX:38,mY:15,s:"",v:!1},{x:816,y:-16,mX:39,mY:15,s:"",v:!1},{x:848,y:-16,mX:40,mY:15,s:"",v:!1}],[{x:-432,y:16,mX:0,mY:16,s:"",v:!1},{x:-400,y:16,mX:1,mY:16,s:"",v:!1},{x:-368,y:16,mX:2,mY:16,s:"s8",v:!0,br:!1},{x:-336,y:16,mX:3,mY:16,s:"s8",v:!0,br:!1},{x:-304,y:16,mX:4,mY:16,s:"s8",v:!0,br:!1},{x:-272,y:16,mX:5,mY:16,s:"s8",v:!1},{x:-240,y:16,mX:6,mY:16,s:"",v:!1},{x:-208,y:16,mX:7,mY:16,s:"s0",v:!1},{x:-176,y:16,mX:8,mY:16,s:"s0",v:!0,br:!1},{x:-144,y:16,mX:9,mY:16,s:"s0",v:!0,br:!1},{x:-112,y:16,mX:10,mY:16,s:"s0",v:!0,br:!1},{x:-80,y:16,mX:11,mY:16,s:"s0",v:!0,br:!1},{x:-48,y:16,mX:12,mY:16,s:"s0",v:!0,br:!1},{x:-16,y:16,mX:13,mY:16,s:"s0",v:!0,br:!1},{x:16,y:16,mX:14,mY:16,s:"s0",v:!0,br:!1},{x:48,y:16,mX:15,mY:16,s:"s0",v:!0,br:!1},{x:80,y:16,mX:16,mY:16,s:"s0",v:!0,br:!1},{x:112,y:16,mX:17,mY:16,s:"s0",v:!0,br:!1},{x:144,y:16,mX:18,mY:16,s:"s0",v:!0,br:!1},{x:176,y:16,mX:19,mY:16,s:"s0",v:!0,br:!1},{x:208,y:16,mX:20,mY:16,s:"s0",v:!0,br:!1},{x:240,y:16,mX:21,mY:16,s:"s0",v:!0,br:!1},{x:272,y:16,mX:22,mY:16,s:"s1",v:!1},{x:304,y:16,mX:23,mY:16,s:"s1",v:!1},{x:336,y:16,mX:24,mY:16,s:"s1",v:!0,br:!1},{x:368,y:16,mX:25,mY:16,s:"s1",v:!0,br:!1},{x:400,y:16,mX:26,mY:16,s:"s1",v:!0,br:!1},{x:432,y:16,mX:27,mY:16,s:"s1",v:!0,br:!1},{x:464,y:16,mX:28,mY:16,s:"",v:!1},{x:496,y:16,mX:29,mY:16,s:"",v:!1},{x:528,y:16,mX:30,mY:16,s:"",v:!1},{x:560,y:16,mX:31,mY:16,s:"",v:!1},{x:592,y:16,mX:32,mY:16,s:"",v:!1},{x:624,y:16,mX:33,mY:16,s:"",v:!1},{x:656,y:16,mX:34,mY:16,s:"",v:!1},{x:688,y:16,mX:35,mY:16,s:"",v:!1},{x:720,y:16,mX:36,mY:16,s:"",v:!1},{x:752,y:16,mX:37,mY:16,s:"",v:!1},{x:784,y:16,mX:38,mY:16,s:"",v:!1},{x:816,y:16,mX:39,mY:16,s:"",v:!1},{x:848,y:16,mX:40,mY:16,s:"",v:!1}],[{x:-432,y:48,mX:0,mY:17,s:"",v:!1},{x:-400,y:48,mX:1,mY:17,s:"",v:!1},{x:-368,y:48,mX:2,mY:17,s:"s8",v:!0,br:!1},{x:-336,y:48,mX:3,mY:17,s:"s8",v:!0,br:!1},{x:-304,y:48,mX:4,mY:17,s:"s8",v:!0,br:!1},{x:-272,y:48,mX:5,mY:17,s:"",v:!1},{x:-240,y:48,mX:6,mY:17,s:"",v:!1},{x:-208,y:48,mX:7,mY:17,s:"",v:!1},{x:-176,y:48,mX:8,mY:17,s:"",v:!1},{x:-144,y:48,mX:9,mY:17,s:"s0",v:!0,br:!1},{x:-112,y:48,mX:10,mY:17,s:"s0",v:!0,br:!1},{x:-80,y:48,mX:11,mY:17,s:"s0",v:!0,br:!1},{x:-48,y:48,mX:12,mY:17,s:"s0",v:!0,br:!1},{x:-16,y:48,mX:13,mY:17,s:"s0",v:!0,br:!1},{x:16,y:48,mX:14,mY:17,s:"s0",v:!0,br:!1},{x:48,y:48,mX:15,mY:17,s:"s0",v:!0,br:!1},{x:80,y:48,mX:16,mY:17,s:"s0",v:!0,br:!1},{x:112,y:48,mX:17,mY:17,s:"s0",v:!0,br:!1},{x:144,y:48,mX:18,mY:17,s:"s0",v:!0,br:!1},{x:176,y:48,mX:19,mY:17,s:"s0",v:!0,br:!1},{x:208,y:48,mX:20,mY:17,s:"s0",v:!0,br:!1},{x:240,y:48,mX:21,mY:17,s:"s0",v:!0,br:!1},{x:272,y:48,mX:22,mY:17,s:"s1",v:!1},{x:304,y:48,mX:23,mY:17,s:"s1",v:!0,br:!1},{x:336,y:48,mX:24,mY:17,s:"s1",v:!0,br:!1},{x:368,y:48,mX:25,mY:17,s:"s1",v:!0,br:!1},{x:400,y:48,mX:26,mY:17,s:"s1",v:!0,br:!1},{x:432,y:48,mX:27,mY:17,s:"",v:!1},{x:464,y:48,mX:28,mY:17,s:"",v:!1},{x:496,y:48,mX:29,mY:17,s:"",v:!1},{x:528,y:48,mX:30,mY:17,s:"",v:!1},{x:560,y:48,mX:31,mY:17,s:"",v:!1},{x:592,y:48,mX:32,mY:17,s:"",v:!1},{x:624,y:48,mX:33,mY:17,s:"",v:!1},{x:656,y:48,mX:34,mY:17,s:"",v:!1},{x:688,y:48,mX:35,mY:17,s:"",v:!1},{x:720,y:48,mX:36,mY:17,s:"",v:!1},{x:752,y:48,mX:37,mY:17,s:"",v:!1},{x:784,y:48,mX:38,mY:17,s:"",v:!1},{x:816,y:48,mX:39,mY:17,s:"",v:!1},{x:848,y:48,mX:40,mY:17,s:"",v:!1}],[{x:-432,y:80,mX:0,mY:18,s:"",v:!1},{x:-400,y:80,mX:1,mY:18,s:"s8",v:!0,br:!1},{x:-368,y:80,mX:2,mY:18,s:"s8",v:!0,br:!1},{x:-336,y:80,mX:3,mY:18,s:"s8",v:!0,br:!1},{x:-304,y:80,mX:4,mY:18,s:"s8",v:!1},{x:-272,y:80,mX:5,mY:18,s:"",v:!1},{x:-240,y:80,mX:6,mY:18,s:"",v:!1},{x:-208,y:80,mX:7,mY:18,s:"",v:!1},{x:-176,y:80,mX:8,mY:18,s:"",v:!1},{x:-144,y:80,mX:9,mY:18,s:"",v:!1},{x:-112,y:80,mX:10,mY:18,s:"s0",v:!0,br:!1},{x:-80,y:80,mX:11,mY:18,s:"s0",v:!0,br:!1},{x:-48,y:80,mX:12,mY:18,s:"s0",v:!0,br:!1},{x:-16,y:80,mX:13,mY:18,s:"s0",v:!0,br:!1},{x:16,y:80,mX:14,mY:18,s:"s0",v:!0,br:!1},{x:48,y:80,mX:15,mY:18,s:"s0",v:!0,br:!1},{x:80,y:80,mX:16,mY:18,s:"s0",v:!0,br:!1},{x:112,y:80,mX:17,mY:18,s:"s0",v:!0,br:!1},{x:144,y:80,mX:18,mY:18,s:"s0",v:!0,br:!1},{x:176,y:80,mX:19,mY:18,s:"s0",v:!1},{x:208,y:80,mX:20,mY:18,s:"",v:!1},{x:240,y:80,mX:21,mY:18,s:"",v:!1},{x:272,y:80,mX:22,mY:18,s:"",v:!1},{x:304,y:80,mX:23,mY:18,s:"",v:!1},{x:336,y:80,mX:24,mY:18,s:"",v:!1},{x:368,y:80,mX:25,mY:18,s:"",v:!1},{x:400,y:80,mX:26,mY:18,s:"",v:!1},{x:432,y:80,mX:27,mY:18,s:"",v:!1},{x:464,y:80,mX:28,mY:18,s:"",v:!1},{x:496,y:80,mX:29,mY:18,s:"",v:!1},{x:528,y:80,mX:30,mY:18,s:"",v:!1},{x:560,y:80,mX:31,mY:18,s:"",v:!1},{x:592,y:80,mX:32,mY:18,s:"",v:!1},{x:624,y:80,mX:33,mY:18,s:"",v:!1},{x:656,y:80,mX:34,mY:18,s:"",v:!1},{x:688,y:80,mX:35,mY:18,s:"",v:!1},{x:720,y:80,mX:36,mY:18,s:"",v:!1},{x:752,y:80,mX:37,mY:18,s:"",v:!1},{x:784,y:80,mX:38,mY:18,s:"",v:!1},{x:816,y:80,mX:39,mY:18,s:"",v:!1},{x:848,y:80,mX:40,mY:18,s:"",v:!1}],[{x:-432,y:112,mX:0,mY:19,s:"",v:!1},{x:-400,y:112,mX:1,mY:19,s:"s8",v:!0,br:!1},{x:-368,y:112,mX:2,mY:19,s:"s8",v:!0,br:!1},{x:-336,y:112,mX:3,mY:19,s:"s8",v:!0,br:!1},{x:-304,y:112,mX:4,mY:19,s:"",v:!1},{x:-272,y:112,mX:5,mY:19,s:"",v:!1},{x:-240,y:112,mX:6,mY:19,s:"",v:!1},{x:-208,y:112,mX:7,mY:19,s:"",v:!1},{x:-176,y:112,mX:8,mY:19,s:"",v:!1},{x:-144,y:112,mX:9,mY:19,s:"",v:!1},{x:-112,y:112,mX:10,mY:19,s:"",v:!1},{x:-80,y:112,mX:11,mY:19,s:"s0",v:!0,br:!1},{x:-48,y:112,mX:12,mY:19,s:"s0",v:!0,br:!1},{x:-16,y:112,mX:13,mY:19,s:"s0",v:!0,br:!1},{x:16,y:112,mX:14,mY:19,s:"s0",v:!0,br:!1},{x:48,y:112,mX:15,mY:19,s:"s0",v:!0,br:!1},{x:80,y:112,mX:16,mY:19,s:"s0",v:!0,br:!1},{x:112,y:112,mX:17,mY:19,s:"s0",v:!1},{x:144,y:112,mX:18,mY:19,s:"",v:!1},{x:176,y:112,mX:19,mY:19,s:"",v:!1},{x:208,y:112,mX:20,mY:19,s:"",v:!1},{x:240,y:112,mX:21,mY:19,s:"",v:!1},{x:272,y:112,mX:22,mY:19,s:"",v:!1},{x:304,y:112,mX:23,mY:19,s:"",v:!1},{x:336,y:112,mX:24,mY:19,s:"",v:!1},{x:368,y:112,mX:25,mY:19,s:"",v:!1},{x:400,y:112,mX:26,mY:19,s:"",v:!1},{x:432,y:112,mX:27,mY:19,s:"",v:!1},{x:464,y:112,mX:28,mY:19,s:"",v:!1},{x:496,y:112,mX:29,mY:19,s:"",v:!1},{x:528,y:112,mX:30,mY:19,s:"",v:!1},{x:560,y:112,mX:31,mY:19,s:"",v:!1},{x:592,y:112,mX:32,mY:19,s:"",v:!1},{x:624,y:112,mX:33,mY:19,s:"",v:!1},{x:656,y:112,mX:34,mY:19,s:"",v:!1},{x:688,y:112,mX:35,mY:19,s:"",v:!1},{x:720,y:112,mX:36,mY:19,s:"",v:!1},{x:752,y:112,mX:37,mY:19,s:"",v:!1},{x:784,y:112,mX:38,mY:19,s:"",v:!1},{x:816,y:112,mX:39,mY:19,s:"",v:!1},{x:848,y:112,mX:40,mY:19,s:"",v:!1}],[{x:-432,y:144,mX:0,mY:20,s:"s8",v:!1},{x:-400,y:144,mX:1,mY:20,s:"s8",v:!0,br:!1},{x:-368,y:144,mX:2,mY:20,s:"s8",v:!0,br:!1},{x:-336,y:144,mX:3,mY:20,s:"s8",v:!1},{x:-304,y:144,mX:4,mY:20,s:"",v:!1},{x:-272,y:144,mX:5,mY:20,s:"",v:!1},{x:-240,y:144,mX:6,mY:20,s:"",v:!1},{x:-208,y:144,mX:7,mY:20,s:"",v:!1},{x:-176,y:144,mX:8,mY:20,s:"",v:!1},{x:-144,y:144,mX:9,mY:20,s:"",v:!1},{x:-112,y:144,mX:10,mY:20,s:"",v:!1},{x:-80,y:144,mX:11,mY:20,s:"",v:!1},{x:-48,y:144,mX:12,mY:20,s:"s0",v:!0,br:!1},{x:-16,y:144,mX:13,mY:20,s:"s0",v:!0,br:!1},{x:16,y:144,mX:14,mY:20,s:"s0",v:!0,br:!1},{x:48,y:144,mX:15,mY:20,s:"s0",v:!1},{x:80,y:144,mX:16,mY:20,s:"",v:!1},{x:112,y:144,mX:17,mY:20,s:"",v:!1},{x:144,y:144,mX:18,mY:20,s:"",v:!1},{x:176,y:144,mX:19,mY:20,s:"",v:!1},{x:208,y:144,mX:20,mY:20,s:"",v:!1},{x:240,y:144,mX:21,mY:20,s:"",v:!1},{x:272,y:144,mX:22,mY:20,s:"",v:!1},{x:304,y:144,mX:23,mY:20,s:"",v:!1},{x:336,y:144,mX:24,mY:20,s:"",v:!1},{x:368,y:144,mX:25,mY:20,s:"",v:!1},{x:400,y:144,mX:26,mY:20,s:"",v:!1},{x:432,y:144,mX:27,mY:20,s:"",v:!1},{x:464,y:144,mX:28,mY:20,s:"",v:!1},{x:496,y:144,mX:29,mY:20,s:"",v:!1},{x:528,y:144,mX:30,mY:20,s:"",v:!1},{x:560,y:144,mX:31,mY:20,s:"",v:!1},{x:592,y:144,mX:32,mY:20,s:"",v:!1},{x:624,y:144,mX:33,mY:20,s:"",v:!1},{x:656,y:144,mX:34,mY:20,s:"",v:!1},{x:688,y:144,mX:35,mY:20,s:"",v:!1},{x:720,y:144,mX:36,mY:20,s:"",v:!1},{x:752,y:144,mX:37,mY:20,s:"",v:!1},{x:784,y:144,mX:38,mY:20,s:"",v:!1},{x:816,y:144,mX:39,mY:20,s:"",v:!1},{x:848,y:144,mX:40,mY:20,s:"",v:!1}],[{x:-432,y:176,mX:0,mY:21,s:"s8",v:!0,br:!1},{x:-400,y:176,mX:1,mY:21,s:"s8",v:!0,br:!1},{x:-368,y:176,mX:2,mY:21,s:"s8",v:!0,br:!1},{x:-336,y:176,mX:3,mY:21,s:"",v:!1},{x:-304,y:176,mX:4,mY:21,s:"",v:!1},{x:-272,y:176,mX:5,mY:21,s:"",v:!1},{x:-240,y:176,mX:6,mY:21,s:"",v:!1},{x:-208,y:176,mX:7,mY:21,s:"",v:!1},{x:-176,y:176,mX:8,mY:21,s:"",v:!1},{x:-144,y:176,mX:9,mY:21,s:"",v:!1},{x:-112,y:176,mX:10,mY:21,s:"",v:!1},{x:-80,y:176,mX:11,mY:21,s:"",v:!1},{x:-48,y:176,mX:12,mY:21,s:"",v:!1},{x:-16,y:176,mX:13,mY:21,s:"s0",v:!1},{x:16,y:176,mX:14,mY:21,s:"",v:!1},{x:48,y:176,mX:15,mY:21,s:"",v:!1},{x:80,y:176,mX:16,mY:21,s:"",v:!1},{x:112,y:176,mX:17,mY:21,s:"",v:!1},{x:144,y:176,mX:18,mY:21,s:"",v:!1},{x:176,y:176,mX:19,mY:21,s:"",v:!1},{x:208,y:176,mX:20,mY:21,s:"",v:!1},{x:240,y:176,mX:21,mY:21,s:"",v:!1},{x:272,y:176,mX:22,mY:21,s:"",v:!1},{x:304,y:176,mX:23,mY:21,s:"",v:!1},{x:336,y:176,mX:24,mY:21,s:"",v:!1},{x:368,y:176,mX:25,mY:21,s:"",v:!1},{x:400,y:176,mX:26,mY:21,s:"",v:!1},{x:432,y:176,mX:27,mY:21,s:"",v:!1},{x:464,y:176,mX:28,mY:21,s:"",v:!1},{x:496,y:176,mX:29,mY:21,s:"",v:!1},{x:528,y:176,mX:30,mY:21,s:"",v:!1},{x:560,y:176,mX:31,mY:21,s:"",v:!1},{x:592,y:176,mX:32,mY:21,s:"",v:!1},{x:624,y:176,mX:33,mY:21,s:"",v:!1},{x:656,y:176,mX:34,mY:21,s:"",v:!1},{x:688,y:176,mX:35,mY:21,s:"",v:!1},{x:720,y:176,mX:36,mY:21,s:"",v:!1},{x:752,y:176,mX:37,mY:21,s:"",v:!1},{x:784,y:176,mX:38,mY:21,s:"",v:!1},{x:816,y:176,mX:39,mY:21,s:"",v:!1},{x:848,y:176,mX:40,mY:21,s:"",v:!1}],[{x:-432,y:208,mX:0,mY:22,s:"s8",v:!1},{x:-400,y:208,mX:1,mY:22,s:"s8",v:!0,br:!1},{x:-368,y:208,mX:2,mY:22,s:"s8",v:!1},{x:-336,y:208,mX:3,mY:22,s:"",v:!1},{x:-304,y:208,mX:4,mY:22,s:"",v:!1},{x:-272,y:208,mX:5,mY:22,s:"",v:!1},{x:-240,y:208,mX:6,mY:22,s:"",v:!1},{x:-208,y:208,mX:7,mY:22,s:"",v:!1},{x:-176,y:208,mX:8,mY:22,s:"",v:!1},{x:-144,y:208,mX:9,mY:22,s:"",v:!1},{x:-112,y:208,mX:10,mY:22,s:"",v:!1},{x:-80,y:208,mX:11,mY:22,s:"",v:!1},{x:-48,y:208,mX:12,mY:22,s:"",v:!1},{x:-16,y:208,mX:13,mY:22,s:"",v:!1},{x:16,y:208,mX:14,mY:22,s:"",v:!1},{x:48,y:208,mX:15,mY:22,s:"",v:!1},{x:80,y:208,mX:16,mY:22,s:"",v:!1},{x:112,y:208,mX:17,mY:22,s:"",v:!1},{x:144,y:208,mX:18,mY:22,s:"",v:!1},{x:176,y:208,mX:19,mY:22,s:"",v:!1},{x:208,y:208,mX:20,mY:22,s:"",v:!1},{x:240,y:208,mX:21,mY:22,s:"",v:!1},{x:272,y:208,mX:22,mY:22,s:"",v:!1},{x:304,y:208,mX:23,mY:22,s:"",v:!1},{x:336,y:208,mX:24,mY:22,s:"",v:!1},{x:368,y:208,mX:25,mY:22,s:"",v:!1},{x:400,y:208,mX:26,mY:22,s:"",v:!1},{x:432,y:208,mX:27,mY:22,s:"",v:!1},{x:464,y:208,mX:28,mY:22,s:"",v:!1},{x:496,y:208,mX:29,mY:22,s:"",v:!1},{x:528,y:208,mX:30,mY:22,s:"",v:!1},{x:560,y:208,mX:31,mY:22,s:"",v:!1},{x:592,y:208,mX:32,mY:22,s:"",v:!1},{x:624,y:208,mX:33,mY:22,s:"",v:!1},{x:656,y:208,mX:34,mY:22,s:"",v:!1},{x:688,y:208,mX:35,mY:22,s:"",v:!1},{x:720,y:208,mX:36,mY:22,s:"",v:!1},{x:752,y:208,mX:37,mY:22,s:"",v:!1},{x:784,y:208,mX:38,mY:22,s:"",v:!1},{x:816,y:208,mX:39,mY:22,s:"",v:!1},{x:848,y:208,mX:40,mY:22,s:"",v:!1}]],tr:[{g:"tr1",p:{x:359,y:-73},t:"sector",n:-1,d:0,e:"immediate",u:"none",r:32,s:"s1",se:!1,a:[{type:"heatdamageoccupants",subject:"0",delay:0,params:[{name:"damage",val:5,valType:"int"},{name:"interval",val:40,valType:"int"}],internalParams:{elapsedTimer:0}}]}],sfx:[{g:"sf4",p:{x:-204,y:-232},t:"waterloop1",po:!0,rp:1024,rs:128,v:1,l:!0,a:!0,se:!1},{g:"sf5",p:{x:-303,y:-23},t:"waterloop1",po:!0,rp:1024,rs:128,v:1,l:!0,a:!0,se:!1}],dps:"t0"}};return{get:function(t){return e.hasOwnProperty(t)?JSON.parse(JSON.stringify(e[t])):void console.log("ERROR: Level "+t+" not found.")}}}();return e}),define("saveload",["time","globalevents"],function(e,t){var a=function(){function a(e){try{var t=window[e],a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(n){return!1}}function n(a){var n=c+" - ";n+=e.getCurrentDateTimeString(),localStorage.setItem(n,JSON.stringify(a)),t.trigger(f.gamesaved)}function r(e){var t=localStorage.getItem(c+e);return null==t?void console.log('ERROR: MOD_SaveLoad.loadGameData : local storage key "'+e+'" was not found.'):{saveData:JSON.parse(t),key:e}}function o(){for(var e=Object.keys(localStorage),t=e.length,a={},n=0;t>n;n++){var r=e[n];-1!=r.indexOf(c)&&(a[r]=JSON.parse(localStorage.getItem(r)))}return a}function i(){for(var e=Object.keys(localStorage),t=e.length,a=[],n=0;t>n;n++){var r=e[n];-1!=r.indexOf(c)&&a.push({key:r,displayKey:r.replace(c)})}return a}function s(e){e=c+e,localStorage.hasOwnProperty(e)&&localStorage.removeItem(e);
}function l(){for(var e=i(),t=e.length,a=0;t>a;a++){var n=e[a].key;localStorage.hasOwnProperty(n)&&localStorage.removeItem(n)}}function u(){a("localStorage")?console.log("Local storage check OK"):console.log("ERROR: Local storage not supported.")}var c="HybridSaveGame__",f=t.getEventKeys();return{init:u,saveGameData:n,loadGameData:r,loadAllGameData:o,getLocalStoragePrefix:function(){return c},getAllSavedGameKeys:i,deleteSaveByKey:s,deleteAllSaves:l}}();return a}),define("materialdefs",["enginevars"],function(e){var t=function(){function e(e){return"undefined"==typeof e?a:a.hasOwnProperty(e)?a[e]:void a.mat1}function t(e){for(var t in a)if(a.hasOwnProperty(t))for(var n=a[t],r=n.texRefs,o=r.length,i=0;o>i;i++)if(r[i]===e)return n;return console.log('ERROR: MOD_MaterialDefs.getMaterialForTexRef : no matching material found for texRef "'+e+'".'),null}var a={stone:{t:"stone",moveSpeedMult:1,frictionMult:1,moveNoiseMult:1,texRefs:["atlastest2","wolf_door_silver","wolf_bricks_blue","wolf_bricks_red","wolf_bricks_grey","wolf_panel_wood","doom_panel_marble","doom_switch_earth_on","hyb_paving_stone","hyb_dev","atlastest","atlastest2","window64"],sounds:["footstep_stone_a","footstep_stone_b","footstep_stone_c"]},leaves:{t:"leaves",moveSpeedMult:1,frictionMult:1,moveNoiseMult:1,texRefs:["floorleaves1"],sounds:["footstep_leaves_a","footstep_leaves_b","footstep_leaves_c"]},ice:{t:"ice",moveSpeedMult:1,frictionMult:1,moveNoiseMult:1,texRefs:["floorice1"],sounds:["footstep_ice_a","footstep_ice_b","footstep_ice_c"]},water:{t:"water",moveSpeedMult:1,frictionMult:1,moveNoiseMult:1,texRefs:["water64"],sounds:["footstep_water_a","footstep_water_b","footstep_water_c"]}};return{get:e,getMaterialForTexRef:t}}();return t}),define("gameworld",["player","enginevars","collision","input","time","doors","things","triggers","triggeractions","effects","effectdefs","projectiles","projectiledefs","pathnode","pathfinding","impactactions","impactactiondefs","levels","saveload","pickups","sounds","vector2","assets","materialdefs"],function(e,t,a,n,r,o,i,s,l,u,c,f,m,d,h,p,y,x,g,v,b,w,S,T){var M=function(){function l(e){for(var t=e.length,a=0,n=0;t>n;n++){var r=e[n],o=e[t-1>n?n+1:0];a+=(o.x-r.x)*(o.y+r.y)}return console.log(0>"polygon is "+a?" clockwise":"anticlockwise"),0>a}function v(e){for(var t=[],n=e.l,r=n.length,o=e.b,i=!1,s=0,u=0;r>u;u++){var c=n[u];t.push({x:c.sp.x,y:c.sp.y,removed:!1})}for(l(t)&&t.reverse(),e.renderData={flatTriangles:[]};!i;){for(var f=0,m=t.length,d=0;m>d;d++)t[d].removed||f++;if(3===f){for(var h=[],p=0;m>p;p++){var y=t[p];y.removed===!1&&h.push({x:y.x,y:y.y})}e.renderData.flatTriangles.push(h),i=!0;break}for(var x=!1,g=0;m>g;g++){var v=t[g];if(!v.removed){for(var b=null,S=null,T=1;m>T;T++){var M=g-T,D=M>=0?M:m+M,Y=t[D];if(!Y.removed){b=Y;break}}for(var X=1;m>X;X++){var _=g+X,k=m>_?_:_-m,I=t[k];if(!I.removed){S=I;break}}if(null===b||null===S)return void console.log("ERROR: MOD_GameWorld.triangulateSector : could not find prev/next vert.");for(var R={x:b.x-v.x,y:b.y-v.y},C={x:S.x-v.x,y:S.y-v.y},P=w.internalRadiansBetweenEdges(R,C),A={sp:{x:S.x,y:S.y},ep:{x:b.x,y:b.y}},F=a.lineWithinPolygon(A,n,o,!0),O=!1,E=0;m>E;E++){var q=t[E];if(!(q.x===v.x&&q.y===v.y||q.x===b.x&&q.y===b.y||q.x===S.x&&q.y===S.y)){var B=[{sp:{x:v.x,y:v.y},ep:{x:S.x,y:S.y}},{sp:{x:S.x,y:S.y},ep:{x:b.x,y:b.y}},{sp:{x:b.x,y:b.y},ep:{x:v.x,y:v.y}}];if(a.pointInPolygon(q,B,o)){O=!0;break}}}if(3.14159>P&&F&&!O){e.renderData.flatTriangles.push([{x:v.x,y:v.y},{x:S.x,y:S.y},{x:b.x,y:b.y}]),v.removed=!0,x=!0;break}console.log("TRIANG: vertex at "+v.x+", "+v.y+" is not an ear tip")}}if(!x){if(!(m>s))return void console.log("ERROR: MOD_GameWorld.triangulateSector : Failed to triangulate sector "+e.g+". All vertex orders attempted. Please change the sector's geometry and try again.");s++,console.log("MESSAGE: MOD_GameWorld.triangulateSector : failed to find a polygon ear after "+s+" attempts. "+(m-s)+" attempts remaining.")}}}function D(){for(var e=J.s,t=e.length,a=0;t>a;a++){var n=e[a];n.pn=[],n.bpn=[],n.isCrushingThing=!1,n.crush=!0,n.tf=n.f.split("_"),n.tc=n.c.split("_"),n.tfa=n.tf.length>=2&&-1===n.tf[0].indexOf("-1")&&-1===n.tf[1].indexOf("-1")?"atlas"+n.tf[0]:null,n.tca=n.tc.length>=2&&-1===n.tc[0].indexOf("-1")&&-1===n.tc[1].indexOf("-1")?"atlas"+n.tc[0]:null,n.isScrolling=0!==n.fsx||0!==n.fsy||0!==n.csx||0!==n.csy;var r=null!==n.tfa?S.get(n.tfa):null,o=null!==n.tca?S.get(n.tca):null;n.floorTexWidth=null!==r?r.texCoords[n.tf[1]].w:de.x,n.floorTexHeight=null!==r?r.texCoords[n.tf[1]].h:de.y,n.ceilingTexWidth=null!==o?o.texCoords[n.tc[1]].w:de.x,n.ceilingTexHeight=null!==o?o.texCoords[n.tc[1]].h:de.y,n.floorMaterial=null!==n.tfa?T.getMaterialForTexRef(n.tfa):null;for(var i=J.d,s=i.length,l=0;s>l;l++){var u=i[l];u.sg!==n.g||u.c||(n.crush=!1)}v(n);for(var c=n.l,f=c.length,m=0;f>m;m++){var d=c[m],h=d.b;d.mp={x:h.x+Math.round(h.w/2),y:h.y+Math.round(h.h/2)},d.pSec=""!==d.psg?R(d.psg):null,d.oSec=""!==d.osg?R(d.osg):null,A(d,n);d.tur.split("_"),d.tmr,d.tlr;d.tu=d.tur.split("_"),d.tm=d.tmr.split("_"),d.tl=d.tlr.split("_"),d.tua=-1===d.tu[0].indexOf("-1")&&-1===d.tu[1].indexOf("-1")?"atlas"+d.tu[0]:null,d.tma=-1===d.tm[0].indexOf("-1")&&-1===d.tm[1].indexOf("-1")?"atlas"+d.tm[0]:null,d.tla=-1===d.tl[0].indexOf("-1")&&-1===d.tl[1].indexOf("-1")?"atlas"+d.tl[0]:null,d.isScrolling=0!==d.tusx||0!==d.tusy||0!==d.tmsx||0!==d.tmsy||0!==d.tlsx||0!==d.tlsy;var p=null!==d.tua?S.get(d.tua):null,y=null!==d.tma?S.get(d.tma):null,x=null!==d.tla?S.get(d.tla):null;d.upperTexWidth=null!==p?p.texCoords[d.tu[1]].w:de.x,d.upperTexHeight=null!==p?p.texCoords[d.tu[1]].h:de.y,d.middleTexWidth=null!==y?y.texCoords[d.tm[1]].w:de.x,d.middleTexHeight=null!==y?y.texCoords[d.tm[1]].h:de.y,d.lowerTexWidth=null!==x?x.texCoords[d.tl[1]].w:de.x,d.lowerTexHeight=null!==x?x.texCoords[d.tl[1]].h:de.y}}}function Y(){for(var e=J.pn,t=e.length,a=e[0].length,n=0;t>n;n++)for(var r=0;a>r;r++){var o=e[n][r];e[n][r]=d.pathNode(o.x,o.y,o.mX,o.mY,o.v,o.s,o.br,o.dy,o.l),o=e[n][r];for(var i=J.s,s=i.length,l=0;s>l;l++){var u=i[l];u.g==o.s&&(o.fh=u.fh,o.vs=u.ch-u.fh,u.pn.push(o))}if(o.br)for(var c=o.l,f=c.length,m=0;f>m;m++){var h=c[m],p=h.bs,y=p.length;h.bridges=[];for(var x=0;y>x;x++){var g=R(p[x]);g.hasOwnProperty("bpn")||(g.bpn=[]),h.bridges.push({bridgedSectorGUID:g.g,verticalSpace:g.ch-g.fh}),g.bpn.push(o)}}}}function X(e){1===e.l?ye++:(pe++,X(e.f),X(e.b))}function _(e){X(e),J.bsp.numNodes={branch:pe,leaf:ye,total:pe+ye}}function k(){for(var e=J.t,t=e.length,n=0;t>n;n++)for(var r=e[n],o=J.s,i=o.length,s=0;i>s;s++){var l=o[s];a.pointInPolygon(r.p,l.l,l.b)&&"playerstart"==r.t&&(r.p.z=l.fh)}}function I(){D(),k(),_(J.bsp),Y()}function R(e){for(var t=J.s,a=t.length,n=0;a>n;n++){var r=t[n];if(r.g==e)return r}console.log('ERROR: MOD_GameWorld.getSectorByGUID : No sector with guid "'+e+'" exists.')}function C(e){for(var t=J.s,a=t.length,n=0;a>n;n++)for(var r=t[n],o=r.l,i=o.length,s=0;i>s;s++)if(o[s].g===e)return o[s];console.log('ERROR: MOD_GameWorld.getLineDefByGUID : No linedef with guid "'+e+'" exists.')}function P(e){for(var t=J.t,a=t.length,n=0;a>n;n++){var r=t[n];if(r.g==e)return r}console.log('ERROR: MOD_GameWorld.getThingByGUID : No thing with guid "'+e+'" exists.')}function A(e,t){if(""!=e.osg){var a=e.oSec,n=a.fh,r=a.ch;e.upper=t.ch-r,e.lower=n-t.fh}else e.upper=0,e.lower=0}function F(e,t){for(var n=t.length,r=0;n>r;r++){var o=t[r],i="player"===o.t?o.getPos():o.p;o.isPushable===!0&&a.pointInPolygon(i,e.l,e.b)===!0&&o.applyForce(-e.fsx*he,-e.fsy*he)}}function O(){for(var t=J.s,a=t.length,n=0;a>n;n++){var r=t[n];r.isScrolling&&(r.fx+=r.fsx,r.fy+=r.fsy,r.cx+=r.csx,r.cy+=r.csy,r.fx>r.floorTexWidth?r.fx=r.fx-r.floorTexWidth:r.fx<0&&(r.fx=r.floorTexWidth+r.fx),r.fy>r.floorTexHeight?r.fy=r.fy-r.floorTexHeight:r.fy<0&&(r.fy=r.floorTexHeight+r.fy),r.cx>r.ceilingTexWidth?r.cx=r.cx-r.ceilingTexWidth:r.cx<0&&(r.cx=r.ceilingTexWidth+r.cx),r.cy>r.ceilingTexHeight?r.cy=r.cy-r.ceilingTexHeight:r.cy<0&&(r.cy=r.ceilingTexHeight+r.cy),F(r,[e].concat(i.getThings())));for(var o=r.l,s=o.length,l=0;s>l;l++){var u=o[l];A(u,r);var c=r.fh,f=r.ch;u.fh=c,u.ch=f,u.middle=f-c-u.upper-u.lower,u.middleBottomZ=c+u.lower,u.middleTopZ=u.middleBottomZ+u.middle,u.ll=r.ll,u.isScrolling&&(u.tux+=u.tusx,u.tuy+=u.tusy,u.tmx+=u.tmsx,u.tmy+=u.tmsy,u.tlx+=u.tlsx,u.tly+=u.tlsy,u.tux>u.upperTexWidth?u.tux=u.tux-u.upperTexWidth:u.tux<0&&(u.tux=u.upperTexWidth+u.tux),u.tuy>u.upperTexHeight?u.tuy=u.tuy-u.upperTexHeight:u.tuy<0&&(u.tuy=u.upperTexHeight+u.tuy),u.tmx>u.middleTexWidth?u.tmx=u.tmx-u.middleTexWidth:u.tmx<0&&(u.tmx=u.middleTexWidth+u.tmx),u.tmy>u.middleTexHeight?u.tmy=u.tmy-u.middleTexHeight:u.tmy<0&&(u.tmy=u.middleTexHeight+u.tmy),u.tlx>u.lowerTexWidth?u.tlx=u.tlx-u.lowerTexWidth:u.tlx<0&&(u.tlx=u.lowerTexWidth+u.tlx),u.tly>u.lowerTexHeight?u.tly=u.tly-u.lowerTexHeight:u.tly<0&&(u.tly=u.lowerTexHeight+u.tly))}}}function E(e){e.ps=R(e.psg),e.pld=C(e.pg)}function q(e){if(0!==Object.keys(e.f).length&&q(e.f),1===e.l)for(var t=e.o,a=t.length,n=0;a>n;n++)E(t[n]);0!==Object.keys(e.b).length&&q(e.b)}function B(){q(J.bsp)}function N(e){console.log("Loading level "+e),J=x.get(e),ee=e,I()}function z(e,t){le=!0,ie=e,se=t}function L(){if(le=!1,N(ie),""===se&&(se=J.dps,""===se))return void console.log("ERROR: MOD_GameWorld.init : no default playerstart found in level "+ie+".");o.init(J.d,J.s),i.init(J.t,j(),e),s.init(J,M),b.init(J),h.init(J.size),B();for(var t=J.t,a=t.length,n=0;a>n;n++){var r=t[n];if("playerstart"==r.t&&r.g==se)return r}console.log("ERROR: cannot load level - no player start found")}function j(){var e={origin:Q,size:J.size,skyTexture:J.skyTexture,dimLightDensity:J.dimLight.density,dimLightBias:J.dimLight.bias,fogDensity:J.fog.density,fogColourR:J.fog.colour.r,fogColourG:J.fog.colour.g,fogColourB:J.fog.colour.b,bsp:J.bsp,s:J.s,d:J.d,t:i.getThings(),p:f.get(),e:u.get(),pn:J.pn,graphOffset:J.pno};return e}function V(){o.toggleNearby(e.getPos(),!0,me)}function H(){te=n.getKeyStates(),ae=n.getMouseStates(),ne=n.getPadStates(),re||!te.e&&!ne.btnA?te.e||ne.btnA||(re=!1):(V(),re=!0)}function W(){for(var t={l:ee,c:0,t:[],d:[],s:[],e:[],tr:[],ta:{g:[],l:[],s:[],t:[],e:[],tr:[]},p:{p:e.getPos(),f:e.getFwd(),v:e.getVelocity(),w:[],cw:e.getCurrentWeaponIdx(),rch:e.getRealCamHeight(),tch:e.getTargetCamHeight(),vs:e.getVerticalSpeed(),fa:e.getIsFalling(),cww:e.getCollidingWithWall(),h:e.getHealth(),ph:e.getPrevHealth(),a:e.getArmour(),al:e.getAlive(),c:e.getCrouching(),se:e.getStatusEffects(),ia:[]},pr:[]},a=e.impactActions,n=a.length,r=0;n>r;r++){var l=a[r];t.p.ia.push({p:{p:l.params.pos,t:l.params.type,d:l.params.duration,a:l.params.age,da:l.params.damage,s:l.params.spread,at:l.params.attachToTarget},h:l.hasEffect,et:l.effectType,ea:l.effectAnchor,eo:l.effectOffset,a:l.actionDef.type,s:l.subject.g})}for(var c=e.getWeapons(),m=c.length,d=0;m>d;d++){var h=c[d],p=h.sprite;t.p.w.push({t:h.type,am:h.ammo.mag.current,at:h.ammo.total.current,scd:h.shotCoolDown,fstf:h.firingShotThisFrame,cs:h.currentState,rs:h.reloadState,tsf:h.timeSinceFiring,fl:h.firingLocked,s:{e:p.frameElapsed,s:p.sequenceElapsed,c:p.currentSequence,n:p.nextSequence,f:p.currentFrame,i:p.sequenceInProgress,b:p.isFullBright}})}for(var y=i.getThings(),x=y.length,v=0;x>v;v++){var b=y[v],w={g:b.g,t:b.t,a:b.alive,d:b.isDead,n:b.isNPC,p:b.p,f:b.fwd,he:b.hitEffects,ia:[],se:b.statusEffects,s:b.isSolid};if(b.isRenderable){var S=b.sprite;w.sp={e:S.frameElapsed,s:S.sequenceElapsed,c:S.currentSequence,n:S.nextSequence,f:S.currentFrame,i:S.sequenceInProgress,b:S.isFullBright}}if("pickup"===b.entityType){var T=b.pickup;w.pu={al:T.alive}}for(var M=b.impactActions,D=M.length,Y=0;D>Y;Y++){var X=M[Y];w.ia.push({p:{p:X.params.pos,t:X.params.type,d:X.params.duration,a:X.params.age,da:X.params.damage,s:X.params.spread,at:X.params.attachToTarget},h:X.hasEffect,et:X.effectType,ea:X.effectAnchor,eo:X.effectOffset,a:X.actionDef.type,s:X.subject.g})}if(b.destructible)if(w.h=b.health,b.isNPC){var _=b.npc,k=_.movement,I=_.weapon,R=_.specialWeapon;w.npc={g:_.g,cs:_.currentState,ps:_.prevState,cod:_.causeOfDeath,fsls:_.framesSinceLastStateChange,fslf:_.framesSinceLastFiredShot,a:_.alerted,pc:_.prevColliding,w:{t:I.type,am:I.ammo.mag.current,at:I.ammo.total.current,scd:I.shotCoolDown,fstf:I.firingShotThisFrame,cs:I.currentState,rs:I.reloadState,tsf:I.timeSinceFiring,fl:I.firingLocked},assc:_.attackedSinceStateChange,tua:_.timeUntilNextAttack,prt:_.panicRepathTimer,m:{dpn:k.destPatrolNode,we:k.waitElapsed,pgc:k.pathGoalCoord,dc:k.destCoord,jv:k.journeyVector,nvd:k.normVecToDest,lfp:k.lastFramePos,to:k.targetOrient,im:k.inMotion,pim:k.prevInMotion,dfp:k.distFromPlayer}},null!=_.sw&&(w.npc.sw={t:R.type,am:R.ammo.mag.current,at:R.ammo.total.current,scd:R.shotCoolDown,fstf:R.firingShotThisFrame,cs:R.currentState,rs:R.reloadState,tsf:R.timeSinceFiring,fl:R.firingLocked})}else{var C=b.destructibleThing;w.dt={a:C.alive,dy:C.dying,dyt:C.dyingTimer,h:C.health,dd:C.damageDone}}t.t.push(w)}for(var P=o.get(),A=P.length,F=0;A>F;F++){var O=P[F];t.d.push({g:O.sectorGuid,lot:O.lastOpenTime,o:O.opening,c:O.closing,io:O.isOpen,ic:O.isClosed,l:O.locked})}for(var E=J.s,q=E.length,B=0;q>B;B++){var N=E[B];t.s.push({g:N.g,fh:N.fh,ch:N.ch})}for(var z=u.get(),L=z.length,v=0;L>v;v++){var j=z[v],V={t:j.effectType,p:j.p,d:j.duration,a:j.age,h:j.hasAttachedParent,f:j.followAxes,ao:j.attachmentOffset};j.hasAttachedParent&&(V.apg=j.attachedParentGUID),t.e.push(V)}for(var H=s.getTriggers(),W=H.length,v=0;W>v;v++){var U=H[v];t.tr.push({g:U.g,tf:U.timesFired,rt:U.resetTimer,ct:U.canTrigger})}for(var G=Object.keys(m_TriggeredEvents),K=G.length,$=0;K>$;$++){var Z=G[$],Q=m_TriggeredEvents[Z],te=Q.length,ae="";switch(Z){case"globals":ae="g";break;case"lineDefs":ae="l";break;case"sectors":ae="s";break;case"things":ae="t";break;case"effects":ae="e";break;case"triggers":ae="t"}for(var ne=0;te>ne;ne++){for(var re=Q[ne],oe={et:Z,a:[]},ie=re.actions,se=ie.length,le=0;se>le;le++){var ue=ie[le];oe.a.push({t:ue.type,s:ue.subject,d:ue.delay,dt:ue.delay,lp:ue.loadedParams,ip:ue.internalParams})}t.ta[ae].push(oe)}}for(var ce=f.get(),fe=ce.length,me=0;fe>me;me++){for(var de=ce[me],he={t:de.t,p:de.p,np:de.nextPos,f:de.fwd,a:de.age,d:de.destroyed,dt:de.destroyedTime,rd:de.realDamage,ps:de.parentSector.g,pia:[],v:de.velocity,fwd:de.fwd},pe=de.impactActions,ye=pe.length,xe=0;ye>xe;xe++)he.pia.push(pe[xe].type);t.pr.push(he)}g.saveGameData(t)}function U(e){return g.loadGameData(e)}function G(e){for(var t=i.getThings(),a=e.t,n=a.length,r=0;r<t.length;r++){for(var l=t[r],c=!1,m=0;n>m;m++){var d=a[m];if(l.g===d.g){if(c=!0,l.alive=d.a,l.isDead=d.d,l.isNPC=d.n,l.p.x=d.p.x,l.p.y=d.p.y,l.p.z=d.p.z,l.fwd.x=d.f.x,l.fwd.y=d.f.y,l.fwd.z=d.f.z,l.hitEffects=d.he,l.isSolid=d.s,l.isRenderable){var h=l.sprite,y=d.sp;h.frameElapsed=y.e,h.sequenceElapsed=y.s,h.currentSequence=y.c,h.nextSequence=y.n,h.currentFrame=y.f,h.sequenceInProgress=y.i,h.isFullBright=y.b}"pickup"===l.entityType&&(l.pickup.alive=d.pu.al),l.impactActions=[];for(var x=d.ia,g=x.length,v=0;g>v;v++){var b=x[v],w=p.impactAction(ue[b.p.t],l);w.params.pos=b.p.p,w.params.type=b.p.t,w.params.duration=b.p.d,w.params.age=b.p.a,w.params.damage=b.p.da,w.params.spread=b.p.s,w.params.attachToTarget=b.p.at,w.hasEffect=b.h,w.effectType=b.et,w.effectAnchor=b.ea,w.effectOffset=b.eo,w.actionDef.type=b.a,w.subject.g=b.s}if(l.destructible)if(l.health=d.h,l.isNPC){var S=d.npc,T=S.w,M=S.sw,D=S.m,Y=l.npc,X=Y.movement,_=Y.weapon,k=Y.specialWeapon;Y.currentState=S.cs,Y.prevState=S.ps,Y.causeOfDeath=S.cod,Y.framesSinceLastStateChange=S.fsls,Y.framesSinceLastFiredShot=S.fslf,Y.alerted=S.a,Y.prevColliding=S.pc,Y.attackedSinceStateChange=S.assc,Y.timeUntilNextAttack=S.tua,Y.prt=S.panicRepathTimer,_.ammo.mag.current=T.am,_.ammo.total.current=T.at,_.shotCoolDown=T.scd,_.firingShotThisFrame=S.fstf,_.currentState=T.cs,_.reloadState=T.rs,_.timeSinceFiring=T.tsf,_.firingLocked=T.fl,X.destPatrolNode=D.dpn,X.waitElapsed=D.we,X.pathGoalCoord=D.pgc,X.destCoord=D.dc,X.journeyVector=D.jv,X.normVecToDest=D.nvd,X.lastFramePos=D.lfp,X.targetOrient=D.to,X.inMotion=D.im,X.prevInMotion=D.pim,X.distFromPlayer=D.dfp,null!=k&&(k.ammo.mag.current=M.am,k.ammo.total.current=M.at,k.shotCoolDown=M.scd,k.firingShotThisFrame=S.fstf,k.currentState=M.cs,k.reloadState=M.rs,k.timeSinceFiring=M.tsf,k.firingLocked=M.fl)}else{var I=l.destructibleThing,R=d.dt;I.alive=R.a,I.dying=R.dy,I.dyingTimer=R.dyt,I.health=R.h,I.damageDone=R.dd}for(var C=d.se,A=Object.keys(C),F=A.length,O=0;F>O;O++){var E=A[O];l.statusEffects[E]=C[E]}break}}c||(i.deleteThingByGUID(l.g),r--)}var q=o.get(),B=q.length;savedDoors=e.d,savedDoorsLen=savedDoors.length;for(var N=0;B>N;N++)for(var z=q[N],L=0;B>L;L++){var j=savedDoors[N];if(z.sectorGuid===j.g){z.lastOpenTime=j.lot,z.opening=j.o,z.closing=j.c,z.isOpen=j.io,z.isClosed=j.ic,z.locked=j.l;break}}for(var V=J.s,H=V.length,W=e.s,U=W.length,G=0;H>G;G++)for(var K=V[G],$=0;U>$;$++){var Z=W[G];if(K.g===Z.g){K.fh=Z.fh,K.ch=Z.ch;break}}var Q=e.e,ee=Q.length;effects=[];for(var te=0;ee>te;te++){var ae=Q[te],ne=ce[ae.t],re=P(ae.apg),oe=u.effect(ne,ae.p,ae.d,re,ae.ao);oe.followAxes=ae.f,oe.age=ae.a}for(var ie=s.getTriggers(),se=ie.length,le=e.tr,me=le.length,r=0;se>r;r++)for(var de=ie[r],m=0;me>m;m++){var he=le[m];de.g===he.g&&(de.timesFired=he.tf,de.resetTimer=he.rt,de.canTrigger=he.ct)}for(var pe=Object.keys(m_TriggeredEvents),ye=pe.length,xe=(e.ta,0);ye>xe;xe++){var ge=pe[xe],ve=m_TriggeredEvents[ge],be=ve.length,we=e.ta;switch(ge){case"globals":stateObjKey="g";break;case"lineDefs":stateObjKey="l";break;case"sectors":stateObjKey="s";break;case"things":stateObjKey="t";break;case"effects":stateObjKey="e";break;case"triggers":stateObjKey="t"}for(var Se=we[stateObjKey],Te=Se.length,te=0;Te>te;te++)for(var Me=Se[te],De=Me.a,Ye=De.length,Xe=0;Ye>Xe;Xe++){var _e=De[Xe];if("savegame"!=_e.t&&"confirmloadgame"!=_e.t){for(var ke=0;be>ke;ke++){var Ie=ve[ke];if(_e.s===Ie.subject){Ie.actions.push({type:_e.t,subject:_e.s,delay:_e.d,delayTimer:_e.dt,loadedParams:_e.lp,internalParams:_e.ip});break}}ve.push({subject:_e.s,actions:[{type:_e.t,subject:_e.s,delay:_e.d,delayTimer:_e.dt,loadedParams:_e.lp,internalParams:_e.ip}]})}}}var Re=e.pr,Ce=Re.length;for(sp=0;sp<Ce;sp++){var Pe=Re[sp],Ae=(Pe.pia,fe[Pe.t]),Fe=Ae.projectileInfo,Oe=Ae.impactActions;f.projectile(Pe.t,Fe,Oe,Pe.p.x,Pe.p.y,Pe.p.z,Pe.fwd)}}function K(e){g.deleteSaveByKey(e)}function $(){g.deleteAllSaves()}function Z(){oe=r.getDeltaTime();var t=e.getPos(),a=j();return O(),H(),o.update(a,e),i.update(t,a),s.update(J,t,te.e||ne.btnA,M,e,z,W),p.update(a,e),le}var Q={x:0,y:0,z:0},J=null,ee=0,te=null,ae=null,ne=null,re=!1,oe=r.getDeltaTime(),ie=1,se="",le=!1,ue=y.get(),ce=c.get(),fe=m.get(),me=t.get("playerDoorTriggerDist"),de=t.get("defaultTextureSize"),he=t.get("sectorPushMult"),pe=0,ye=0;return{init:L,update:Z,actionButton:V,setCurrentLevel:function(e){J=e},getCurrentLevel:function(){return J},getThings:function(){return i.getThings()},getSceneData:j,getSectors:function(){return J.s},getSectorByGUID:R,getDoors:function(){return o.get()},getWorldSize:function(){return{x:parseInt(J.size.x),y:parseInt(J.size.y),z:parseInt(J.size.z)}},loadAllGameData:function(){return g.loadAllGameData()},getAllSavedGameKeys:function(){return g.getAllSavedGameKeys()},getLocalStoragePrefix:function(){return g.getLocalStoragePrefix()},loadSaveFile:U,loadSaveData:G,deleteSave:K,deleteAllSaves:$}}();return M}),define("worldrenderer",["assets","renderer","maths","enginevars","collision","vector2"],function(e,t,a,n,r,o){var i=function(){function a(e,t){return t.dist-e.dist}function i(){return new Uint8ClampedArray(N.y*N.x*4)}function s(){for(var e=B,t=N.x,a=N.y,n=0;t>n;n++){for(var r=[],o=[],i=0;a>=i;i++)r.push(e),o.push(e);$.push(r)}}function l(){for(var e=N.x,t=0;e>t;t++)Z.push([]),Q.push([]),J.push([]),ee.push([]),te.push([]),ae.push([])}function u(){for(var e=B,t=N.x,a=N.y,n=0;t>n;n++)for(var r=0;a>=r;r++)$[n][r]=e}function c(){for(var e=N.x,t=0;e>t;t++)ke[t]=!1}function f(e){var t=ce(e,{x:0,y:-1});Re=ve(t),Ce=ge(t)}function m(){for(var e=N.x,t=0;e>t;t++)Z[t]=[],Q[t]=[],J[t]=[],ee[t]=[],te[t]=[],ae[t]=[]}function d(){for(var e=ve,t=we,a=N.x,n=N.y,r=z.x,o=z.y,i=re,s=oe,l=ie,u=se,c=0;a>c;c++){var f=t((c-r)/F);i.push(f),s.push(e(f))}for(var m=0;n>=m;m++){var d=t((m-o)/F);l.push(d),u.push(e(d))}}function h(){for(var e=B,t=de,a=me,n=fe,r=re,o=le,i=N.x,s=0;i>s;s++)o[s]=t(n(a({x:0,y:-1},r[s])),e)}function p(){Ae=de(fe(me({x:0,y:-1},-Math.atan((z.x+1)/F))),B),Fe=de(fe(me({x:0,y:-1},E)),B)}function y(e){ne=e}function x(e,t,a,n,r,o){for(var i=ce(o,{x:0,y:-1}),s=ve(i),l=ge(i),u=De,c=r.x,f=r.y,m=q,d=e.length,h=0;d>h;h++){var p=e[h];if(p.isRenderable){var y=p.p,x=p.fwd,g=y.x-c,v=y.y-f,b=g*s-v*l,w=v*s+g*l,S=x.x*s-x.y*l,T=x.y*s+x.x*l;if(m>w){var M=p.renderData;p.renderDataSet||(p.renderDataSet=!0,M.t=p.t,M.isNPC=p.isNPC,M.collisionRadius=p.colRad,M.anchor=p.anchor,M.sprite=p.sprite),M.x=b,M.y=w,M.fwdX=S,M.fwdY=T,M.dist=u(g*g+v*v),M.anchorHeight=p.anchorHeight,M.ll=p.ll,M.useZBufferOffset=p.useZBufferOffset,W.push(p)}}}for(var D=t.length,Y=0;D>Y;Y++){var X=t[Y];if(X.isRenderable){var _=X.p,k=X.fwd,g=_.x-c,v=_.y-f,b=g*s-v*l,w=v*s+g*l,S=k.x*s-k.y*l,T=k.y*s+k.x*l;if(m>w){var M=X.renderData;X.renderDataSet||(X.renderDataSet=!0,M.collisionRadius=X.collisionRadius,M.sprite=X.sprite),M.x=b,M.y=w,M.z=_.z,M.fwdX=S,M.fwdY=T,M.dist=u(g*g+v*v),M.ll=X.ll,U.push(X)}}}for(var I=a.length,R=0;I>R;R++){var C=a[R],P=C.p,g=P.x-c,v=P.y-f,b=g*s-v*l,w=v*s+g*l;if(m>w){var M=C.renderData;C.renderDataSet||(C.renderDataSet=!0,M.t=C.effectType,M.sprite=C.sprite,M.fullBright=C.fullBright),M.x=b,M.y=w,M.z=C.p.z,M.dist=u(g*g+v*v),M.ll=C.ll,G.push(C)}}}function g(e){if(Be){for(var a=Ee,r=0;r<Oe.length;r++)t.drawLine(Oe[r].startX*a+z.x,Oe[r].startY*a+z.y,Oe[r].endX*a+z.x,Oe[r].endY*a+z.y,"#0f0",1,0,!0);t.drawLineCircle(z.x,z.y,n.get("playerCollisionRadius"),"#f00",1,!0),t.drawText("x: "+Math.round(e.p.x)+" y: "+Math.round(e.p.y),z.x,z.y+20,"#fff",12,!0);var o=ce(e.fwd,{x:0,y:-1}),i=Math.cos(o),s=Math.sin(o),l=e.proj.x*i-e.proj.y*s,u=e.proj.y*i+e.proj.x*s;t.drawLine(z.x,z.y,16*l+z.x,16*u+z.y,"#fff",1,0,!0);var c=e.slidingPlane.x*i-e.slidingPlane.y*s,f=e.slidingPlane.y*i+e.slidingPlane.x*s;t.drawLine(z.x,z.y,64*c+z.x,64*f+z.y,"#0ff",1,0,!0),t.drawLine(z.x,z.y,le[0].x+z.x,le[0].y+z.y,"#f00",1,0,!0),t.drawLine(z.x,z.y,le[le.length-1].x+z.x,le[le.length-1].y+z.y,"#f00",1,0,!0);for(var m=0;m<K.length;m++){var d=K[m].vs>32?"#84f":"#080";K[m].v||(d="#444"),t.drawLineCircle(K[m].x*a+z.x,K[m].y*a+z.y,2,d,1,!0)}}}function v(e){for(var t=Pe,a=t.length,n=0;a>n;n++)for(var r=t[n],o=r.l,i=o.length,s=0;i>s;s++){var l=o[s];if(l.g==e)return l}console.log('ERROR: MOD_WorldRenderer.getLineDefByGUID : lineDef with guid "'+e+'" not found.')}function b(e,t,a){var n=Ce,r=Re,o=e.sp,i=e.ep,s=o.x-t,l=o.y-a,u=i.x-t,c=i.y-a,f=s*r-l*n,m=l*r+s*n,d=u*r-c*n,h=c*r+u*n,p=(e.ps,e.pld),y=p.n,x=y.l,g=x.x,v=x.y,b=y.r,w=(b.x,b.y,g*r-v*n),S=v*r+g*n;return{pg:e.pg,origStartX:e.sp.x,origStartY:e.sp.y,startX:f,startY:m,endX:d,endY:h,normLeftX:w,normLeftY:S,texRefUpper:p.tur,texUpperOffsetX:p.tux,texUpperOffsetY:p.tuy,texRefMiddle:p.tmr,texMiddleOffsetX:p.tmx,texMiddleOffsetY:p.tmy,texRefLower:p.tlr,texLowerOffsetX:p.tlx,texLowerOffsetY:p.tly,f:p.f,c:p.c,isOpaque:p.o,anchorTexToFloor:p.af}}function w(e,t,a){var n=F,r=be,o=ve,i=De,s=Se,l=ue,u=Ae,c=Fe,f=ke,m=$,d=N.x,h=z.x,p=N.y,y=z.y,x=P,g=L,w=F,S=Xe,T=A,M=V,D=Z,Y=Q;if(!(pe(t,a,e.sp.x,e.sp.y,e.ep.x,e.ep.y)>=0)){var X=b(e,t,a);if(Oe.push(X),!(X.startY>=0&&X.endY>=0)){var _=v(X.pg);X.fh=_.fh,X.ch=_.ch,X.osfh=_.osfh,X.osch=_.osch,X.ll=_.ll,X.upper=_.upper,X.middle=_.middle,X.lower=_.lower;var k=X.startX,I=X.startY,R=X.endX,C=X.endY,O=k-R,E=I-C,q=i(O*O+E*E),B=u.x,j=u.y,H=c.x,W=c.y,U=pe(k,I,0,0,B,j),G=pe(k,I,0,0,H,W),K=pe(R,C,0,0,B,j),ne=pe(R,C,0,0,H,W),re=k,oe=I,ie=R,se=C,le=0,ce=0;if(0>U||G>0||0>K||ne>0){var fe=l(re,oe,ie,se,0,0,B,j),me=l(re,oe,ie,se,0,0,H,W);if(fe.result===!1&&me.result===!1)return;if(fe.result===!0){ie=fe.x,se=fe.y;var de=ie-R,he=se-C;ce=i(de*de+he*he)/q}if(me.result===!0){re=me.x,oe=me.y;var de=re-k,he=oe-I;le=i(de*de+he*he)/q}}var ye=s(-1,0),xe=s(se,ie)-ye,ge=s(oe,re)-ye,we=~~(n*r(ge))+h,Te=~~(n*r(xe))+h,Me=we-Te,Ye=i(ie*ie+se*se),_e=i(re*re+oe*oe),Re=Ye*o(xe),Ce=_e*o(ge),Pe=X.ch-X.fh,Ee=Pe>0;if(0!==Me){var qe=X.texRefMiddle,Be=X.texRefUpper,ze=X.texRefLower,Le="0"!=qe,je="0"!=Be,Ve="0"!=ze,He=X.upper>0,We=X.lower>0,Ue=X.isOpaque,Ge=X.anchorTexToFloor,Ke=Te,$e=we,Ze=1/Re,Qe=1/Ce,Je=1-le-ce,et=q*Je,tt=ce*q,at=Pe*Ze*w,nt=Pe*Qe*w,rt=Ee?X.upper/Pe:0,ot=(Ee?X.middle/Pe:0,Ee?X.lower/Pe:0),it=Pe/x,st=rt*at,lt=ot*at,ut=rt*nt,ct=ot*nt,ft=nt-at,mt=ut-st,dt=ct-lt,ht=T-X.fh,pt=ht*Ze*w,yt=ht*Qe*w,xt=yt-pt,gt=X.ll,vt=Re*g,bt=Ce*g;1>vt&&(vt=1),1>bt&&(bt=1);var wt=gt/vt,St=gt/bt,Tt=St-wt;if(Le)var Mt=S[qe],Dt=(Mt.img,Mt.texSizeX),Yt=Mt.texSizeY,Xt=Mt.pixels,_t=X.texMiddleOffsetX%Dt,kt=X.texMiddleOffsetY%Yt,It=tt+_t,Rt=It/Re,Ct=(It+et)/Ce;var Pt=je&&He;if(Pt)var At=S[Be],Ft=(At.img,At.texSizeX),Ot=At.texSizeY,Et=At.pixels,qt=X.texUpperOffsetX%Ft,Bt=X.texUpperOffsetY%Ot,Nt=tt+qt,zt=Nt/Re,Lt=(Nt+et)/Ce;var jt=Ve&&We;if(jt)var Vt=S[ze],Ht=(Vt.img,Vt.texSizeX),Wt=Vt.texSizeY,Ut=Vt.pixels,Gt=X.texLowerOffsetX%Ht,Kt=X.texLowerOffsetY%Wt,$t=tt+Gt,Zt=$t/Re,Qt=($t+et)/Ce;0>Ke&&(Ke=0),$e>d-1&&($e=d-1);for(var Jt=!1,ea=Ke;$e>=ea;ea++)if(f[ea]===!1){var ta=m[ea];Jt=!0;var aa=(ea-Ke)/Me,na=Ze+aa*(Qe-Ze),ra=1/na,oa=at+aa*ft,ia=st+aa*mt,sa=lt+aa*dt,la=pt+aa*xt,ua=y+la,ca=ua-oa,fa=wt+aa*Tt;fa>1&&(fa=1),0>sa&&(sa=0),0>ia&&(ia=0);var ma=~~(ca+ia),da=~~(ua-sa),ha=~ca,pa=~~(~ca-ia),ya=~~(~ua+sa);if(Ge&&(ha=~ua),0>ma&&(ma=0),da>p&&(da=p),Le){Ue&&(f[ea]=!0,Ie--);for(var xa=x/(oa/it),ga=Rt+aa*(Ct-Rt),va=ga/na,ba=~~(va%Dt),wa=ma;da>=wa;wa++)if(ta[wa]>ra){var Sa=~~(((wa+ha)*xa+kt)%Yt+Yt)%Yt,Ta=4*(Sa*Dt+ba),Ma=4*(wa*d+ea);if(0===Xt[Ta+3])continue;var Da=Xt[Ta],Ya=Xt[Ta+1],Xa=Xt[Ta+2];M[Ma]=Da*fa,M[Ma+1]=Ya*fa,M[Ma+2]=Xa*fa,M[Ma+3]=255,ta[wa]=ra}}if(Pt){var ga=zt+aa*(Lt-zt),va=ga/na,_a=~~ca,ka=ma;0>_a&&(_a=0),ka>=p&&(ka=p-1);for(var Ia=~~(va%Ft),Ra=Ot/(oa/it),Ca=_a;ka>=Ca;Ca++)if(ta[Ca]>ra){var Pa=~~(((Ca+pa)*Ra+Bt)%Ot+Ot)%Ot,Aa=4*(Pa*Ft+Ia),Fa=4*(Ca*d+ea),Oa=Et[Aa],Ea=Et[Aa+1],qa=Et[Aa+2];M[Fa]=Oa*fa,M[Fa+1]=Ea*fa,M[Fa+2]=qa*fa,M[Fa+3]=255,ta[Ca]=ra}}if(jt){var ga=Zt+aa*(Qt-Zt),va=ga/na,Ba=da,Na=~~ua;0>Ba&&(Ba=0),Na>p&&(Na=p);for(var za=~~(va%Ht),La=Wt/(oa/it),ja=Ba;Na>ja;ja++)if(ta[ja]>ra){var Va=~~((((ja+ya)*La+Kt)%Wt+Wt)%Wt),Ha=4*(Va*Ht+za),Wa=4*(ja*d+ea),Ua=Ut[Ha],Ga=Ut[Ha+1],Ka=Ut[Ha+2];M[Wa]=Ua*fa,M[Wa+1]=Ga*fa,M[Wa+2]=Ka*fa,M[Wa+3]=255,ta[ja]=ra}}D[ea].push(da),Y[ea].push(ma),J[ea].push([X.f,X.c]),ee[ea].push(X.ll),te[ea].push(X.fh),ae[ea].push(X.ch)}Jt&&Ne.push(e.ps.g)}}}}function S(e,t){var a=ke;a.length;if(Ie>0){var n=(e.bb,t.x),r=t.y;if(1===e.l)for(var o=e.o,i=o.length,s=0;i>s;s++)w(o[s],n,r);else{var l=e.o[0],u=pe(n,r,l.sp.x,l.sp.y,l.ep.x,l.ep.y);if(0>=u){S(e.f,t);for(var o=e.o,i=o.length,s=0;i>s;s++)w(o[s],n,r);S(e.b,t)}else{S(e.b,t);for(var o=e.o,i=o.length,s=0;i>s;s++)w(o[s],n,r);S(e.f,t)}}}}function T(e,t){for(var a=N.x,n=N.y,r=he(e),o=L,i=oe,s=re,l=$,u=ve,c=ge,f=Te,m=Me,d=Z,h=d.length,p=J,y=ee,x=te,g=F,v=m(.5*n),b=Xe,w=V,S=0;h>S;S++){var T=l[S],M=d[S],D=n-1;if(M.length>0)for(var Y=M.length,X=p[S],_=y[S],k=x[S],I=i[S],R=r+s[S],C=u(R),P=c(R),O=t.x,E=t.y,q=0;Y>q;q++){var B,z=M[q],j=X[q],H=j[0],W=_[q],U=k[q],G=~~(A-U);if(!(0>=G)){B=q>0?M[q-1]:n-1,v>z&&(z=v),B>D&&(B=D);var K=b[H];if("undefined"!=typeof K&&K.loaded===!0)for(var Q=B;Q>z;Q--){var ae=G*(g/(Q-v)),ne=ae/I;if(!(ae>=T[Q])){var ie=ne*C+O,se=ne*P+E,le=K.texSizeX,ue=K.texSizeY,ce=~~f(ie%le),fe=~~f(se%ue),me=4*(fe*le+ce),de=ne*o;1>de&&(de=1);var pe=W/de,ye=K.pixels[me]*pe,xe=K.pixels[me+1]*pe,be=K.pixels[me+2]*pe;Q==M[q]&&(ye=255,xe=0,be=255);var we=4*(Q*a+S);w[we]=ye,w[we+1]=xe,w[we+2]=be,w[we+3]=255,T[Q]=ae}}D>z&&(D=z)}}}}function M(e,t){for(var a=N.x,n=N.y,r=C,o=R,i=he(e),s=i+r,l=B,u=L,c=oe,f=re,m=$,d=ve,h=ge,p=Te,y=Me,x=Q,g=x.length,v=J,b=ee,w=te,S=ae,T=F,M=y(.5*n),D=V,Y=Xe,X=ne,_=0;g>_;_++){var k=m[_],I=x[_],P=0;if(I.length>0)for(var O=I.length,E=v[_],q=b[_],z=(w[_],S[_]),j=c[_],H=i+f[_],W=d(H),U=h(H),G=t.x,K=t.y,Z=0;O>Z;Z++){var ie,se=I[Z],le=E[Z],ue=le[1],ce=q[Z],fe=z[Z],me=~~(fe-A);if(ie=Z>0?I[Z-1]:0,se>M&&(se=M),P>ie&&(ie=P),"0"==ue){var de=Y[X],pe=de.texSizeX,ye=de.texSizeY,xe=~~(s/o*pe),be=~~((xe+_)%pe),we=de.pixels;if("undefined"!=typeof de&&de.loaded===!0)for(var Se=ie;se>Se;Se++)if(!(k[Se]<l)){var De=~~((Se+1)%ye),Ye=4*(De*pe+be),_e=4*(Se*a+_),ke=we[Ye],Ie=we[Ye+1],Re=we[Ye+2];D[_e]=ke,D[_e+1]=Ie,D[_e+2]=Re,D[_e+3]=255}}else{var Ce=Y[ue];if("undefined"!=typeof Ce&&Ce.loaded===!0)for(var pe=Ce.texSizeX,ye=Ce.texSizeY,Se=ie;se>Se;Se++){var Pe=me*(T/(M-Se)),Ae=Pe/j;if(!(Pe>=k[Se])){var Fe=Ae*W+G,Oe=Ae*U+K,Ee=~~p(Fe%pe),qe=~~p(Oe%ye),Be=4*(qe*pe+Ee),Ne=Ae*u;1>Ne&&(Ne=1);var ze=ce/Ne,ke=Ce.pixels[Be]*ze,Ie=Ce.pixels[Be+1]*ze,Re=Ce.pixels[Be+2]*ze,Le=4*(Se*a+_);D[Le]=ke,D[Le+1]=Ie,D[Le+2]=Re,D[Le+3]=255,k[Se]=Ae}}ie>P&&(P=ie)}}}}function D(e,n){var r=W,o=r.length,i=F,s=L,l=N.x,u=N.y,c=z.x,f=z.y,m=A,d=ce,h=(n.x,n.y,ve),p=be,y=V,x=$,g=a,v=Ee,b=Ne,w=b.length,S=0;r.sort(g);for(var T=[],M=0;w>M;M++){var D=b[M];-1==T.indexOf(D)&&T.push(D)}for(var Y=0;o>Y;Y++){for(var X=r[Y],_=X.renderData,k=X.parentSector.g,I=_.useZBufferOffset?xe:0,R=T.length,C=!1,P=0;R>P;P++)if(T[P]===k){C=!0;break}if(C){if(S++,Be){var O=_.isNPC?"#88f":"#f00";t.drawLineCircle(_.x*v+z.x,_.y*v+z.y,ye,O,1,!0),t.drawLine(_.x*v+z.x,_.y*v+z.y,_.x*v+64*_.fwdX+z.x,_.y*v+64*_.fwdY+z.y,O,1,0,!0)}var E=_.sprite,q=E.getCurrentFrame(),B=q.sheetTex,j=E.sourceScale,H=E.isFullBright;_.collisionRadius;if(B.loaded===!0){var U=q.frameCoords,G=U.o,K=U.x,Z=U.y,Q=U.w,J=U.h,ee=B.pixels,te=q.sheetTex,ae=te.texSizeX,ne=te.texSizeY,re=_.x,oe=_.y,ie=_.dist,se=d({x:0,y:-1},{x:re,y:oe}),le=ie*h(se),ue=le*s;1>ue&&(ue=1);var fe=H?1:_.ll/ue,me=1/le,de=Q*j*me*i,he=J*j*me*i,pe=he/(J*j),ge=J/he,we=de/2,Se=he/2,Te=c+i*p(se),Me=Te-we,De=Te+we;if(Me>=l||0>De)continue;var Ye=f-Se,Xe=f+Se;"floor"==_.anchor?(Xe=f+(m-_.anchorHeight+G)*pe,Ye=Xe-he):"ceiling"==_.anchor&&(Ye=f-(_.anchorHeight+G-m)*pe,Xe=Ye+he);var _e=-Me,ke=-Ye,Ie=~~_e,Re=~~ke;0>Me&&(Me=0),De>=l&&(De=l-1),0>Ye&&(Ye=0),Xe>=u&&(Xe=u-1),Me=~~Me,De=~~De,Ye=~~Ye,Xe=~~Xe;for(var Ce=Me;De>Ce;Ce++)for(var Pe=~~(((Ce+Ie)*ge+K)%ae),Ae=x[Ce],Fe=Ye;Xe>Fe;Fe++)if(!(Ae[Fe]<le-I)){var Oe=~~(((Fe+Re)*ge+Z)%ne),qe=4*(Oe*ne+Pe),ze=4*(Fe*l+Ce);if(0!=ee[qe+3]){var Le=ee[qe],je=ee[qe+1],Ve=ee[qe+2];y[ze]=Le*fe,y[ze+1]=je*fe,y[ze+2]=Ve*fe,y[ze+3]=255,Ae[Fe]=le}}}}}for(var He=0;o>He;He++)"undefined"==typeof r[He].parentSector}function Y(e,t){var n=U,r=n.length,o=F,i=L,s=N.x,l=N.y,u=z.x,c=z.y,f=A,m=ce,d=(t.x,t.y,ve),h=be,p=V,y=$,x=a,g=xe;n.sort(x);for(var v=0;r>v;v++){var b=n[v];if(!b.shouldRender)return;var w=b.renderData,S=(w.collisionRadius,w.sprite),T=S.getCurrentFrame(),M=T.sheetTex,D=S.isFullBright,Y=S.sourceScale;if(M.loaded===!0){var X=T.frameCoords,_=X.x,k=X.y,I=X.w,R=X.h,C=M.pixels,P=T.sheetTex,O=P.texSizeX,E=P.texSizeY,q=w.x,B=w.y,j=w.dist,H=m({x:0,y:-1},{x:q,y:B}),W=j*d(H),G=W*i;1>G&&(G=1);var K=D?1:w.ll/G,Z=1/W,Q=I*Y*Z*o,J=R*Y*Z*o,ee=J/(R*Y),te=R/J,ae=Q/2,ne=J/2,re=u+o*h(H),oe=re-ae,ie=re+ae;if(oe>=s||0>ie)continue;var se=c+ne+(f-w.z)*ee;startY=se-J;var le=-oe,ue=-startY,fe=~~le,me=~~ue;0>oe&&(oe=0),ie>=s&&(ie=s-1),startY<0&&(startY=0),se>=l&&(se=l-1),oe=~~oe,ie=~~ie,startY=~~startY,se=~~se;for(var de=oe;ie>de;de++)for(var he=~~(((de+fe)*te+_)%O),pe=y[de],ye=startY;se>ye;ye++)if(!(pe[ye]<W-g)){var ge=~~(((ye+me)*te+k)%E),we=4*(ge*E+he),Se=4*(ye*s+de);if(0!=C[we+3]){var Te=C[we],Me=C[we+1],De=C[we+2];p[Se]=Te*K,p[Se+1]=Me*K,p[Se+2]=De*K,p[Se+3]=255,pe[ye]=W}}}}}function X(e,t){if(0!=G.length){var n=G,r=n.length,o=F,i=L,s=N.x,l=N.y,u=z.x,c=z.y,f=A,m=ce,d=(t.x,t.y,ve),h=be,p=Me,y=De,x=V,g=$,v=a,b=qe;n.sort(v);for(var w=0;r>w;w++){var S=n[w],T=S.renderData,M=T.sprite,D=M.getCurrentFrame(),Y=D.sheetTex,X=M.isFullBright,_=M.sourceScale;if(Y.loaded===!0){var k=D.frameCoords,I=k.x,R=k.y,C=k.w,P=k.h,O=Y.pixels,E=D.sheetTex,q=E.texSizeX,B=E.texSizeY,j=T.x,H=T.y,W=T.dist,U=m({x:0,y:-1},{x:j,y:H}),K=W*d(U),Z=K-b,Q=X?1:(1-y(K)*i)*T.ll,J=1/K,ee=~~(C*_*J*o),te=~~(P*_*J*o),ae=te/(P*_),ne=P/te,re=~~(ee/2),oe=~~(te/2),ie=u+p(o*h(U)),se=(~~((f-T.z)*ae),
p(ie-re)),le=p(ie+re);if(se>=s||0>le)continue;var ue=p(c+oe+(f-T.z)*ae);startY=p(ue-te);var fe=-se,me=-startY;0>se&&(se=0),le>=s&&(le=s-1),startY<0&&(startY=0),ue>=l&&(ue=l-1);for(var de=se;le>=de;de++)for(var he=~~(((de+fe)*ne+I)%q),pe=g[de],ye=startY;ue>=ye;ye++)if(!(pe[ye]<Z)){var xe=~~(((ye+me)*ne+R)%B),ge=4*(xe*B+he),we=4*(ye*s+de);if(0!=O[ge+3]){var Se=O[ge],Te=O[ge+1],Ye=O[ge+2];x[we]=Se*Q,x[we+1]=Te*Q,x[we+2]=Ye*Q,x[we+3]=255}}}}}}function _(e,t){var a=t.fwd,n=t.p,r=(t.occupiedSector,e.s),o=e.t,i=e.p,s=e.e,l=e.pn;Pe=r,Oe=[],W=[],U=[],G=[],K=[],Ne=[],A=t.camHeight,Ie=N.x,u(),m(),c(),f(a),y(e.skyTexture),x(o,i,s,l,n,a),S(e.bsp,n),T(t.fwd,t.p),M(t.fwd,t.p),D(t.fwd,t.p,e.t),Y(t.fwd,t.p),X(t.fwd,t.p),g(t)}function k(e,a){_e&&(H=a.occupiedSector,V=i(),_(e,a),j.data.set(V),t.setCanvasPixels(j))}function I(){Xe=e.get(),d(),h(),p(),s(),l(),j=t.getCanvasPixels(),_e=!0}var R=6.28318531,C=3.14159265,P=n.get("wallHeight"),A=n.get("cameraHeight"),F=n.get("distToProjSurf"),O=n.get("fovAngle"),E=O/2,q=(Math.tan(E),n.get("nearClip")),B=n.get("farClip"),N=n.get("canvasSize"),z={x:Math.round(N.x/2),y:Math.round(N.y/2)},L=.002,j=null,V=null,H=null,W=[],U=[],G=[],K=[],$=[],Z=[],Q=[],J=[],ee=[],te=[],ae=[],ne="none",re=[],oe=[],ie=[],se=[],le=[],ue=r.intersectsLineWithLineOptimised,ce=(r.intersectsRectWithRect,r.rectWithinRect,r.collidingPointWithRect,r.pointInPolygon,o.radiansBetweenVectors,o.signedRadiansBetweenVectors),fe=o.normalise,me=o.rotateByRadians,de=o.scaleVector,he=o.radiansFromVector,pe=r.pointOnSegSide,ye=n.get("propCollisionRadius"),xe=n.get("thingOcclusionOffset"),ge=Math.sin,ve=Math.cos,be=Math.tan,we=Math.atan,Se=Math.atan2,Te=Math.abs,Me=(Math.floor,Math.ceil,Math.round),De=Math.sqrt,Ye=document.createElement("canvas"),Xe=(Ye.getContext("2d"),{}),_e=!1,ke=[],Ie=N.x,Re=0,Ce=0,Pe=null,Ae={x:0,y:0},Fe={x:0,y:0},Oe=[],Ee=.5,qe=n.get("effectSurfaceOffset"),Be=!1,Ne=[];return{init:I,drawScene:k}}();return i}),!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("gl-matrix-min",[],t);else{var a=t();for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){t.glMatrix=a(1),t.mat2=a(2),t.mat2d=a(3),t.mat3=a(4),t.mat4=a(5),t.quat=a(6),t.vec2=a(9),t.vec3=a(7),t.vec4=a(8)},function(e,t){var a={};a.EPSILON=1e-6,a.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,a.RANDOM=Math.random,a.ENABLE_SIMD=!1,a.SIMD_AVAILABLE=a.ARRAY_TYPE===this.Float32Array&&"SIMD"in this,a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE,a.setMatrixArrayType=function(e){a.ARRAY_TYPE=e};var n=Math.PI/180;a.toRadian=function(e){return e*n},a.equals=function(e,t){return Math.abs(e-t)<=a.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=a},function(e,t,a){var n=a(1),r={};r.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},r.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},r.fromValues=function(e,t,a,r){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=a,o[3]=r,o},r.set=function(e,t,a,n,r){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e},r.transpose=function(e,t){if(e===t){var a=t[1];e[1]=t[2],e[2]=a}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},r.invert=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=a*o-r*n;return i?(i=1/i,e[0]=o*i,e[1]=-n*i,e[2]=-r*i,e[3]=a*i,e):null},r.adjoint=function(e,t){var a=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=a,e},r.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},r.multiply=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=a[0],l=a[1],u=a[2],c=a[3];return e[0]=n*s+o*l,e[1]=r*s+i*l,e[2]=n*u+o*c,e[3]=r*u+i*c,e},r.mul=r.multiply,r.rotate=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=Math.sin(a),l=Math.cos(a);return e[0]=n*l+o*s,e[1]=r*l+i*s,e[2]=n*-s+o*l,e[3]=r*-s+i*l,e},r.scale=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=a[0],l=a[1];return e[0]=n*s,e[1]=r*s,e[2]=o*l,e[3]=i*l,e},r.fromRotation=function(e,t){var a=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=a,e[2]=-a,e[3]=n,e},r.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},r.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},r.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},r.LDU=function(e,t,a,n){return e[2]=n[2]/n[0],a[0]=n[0],a[1]=n[1],a[3]=n[3]-e[2]*a[1],[e,t,a]},r.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},r.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e},r.sub=r.subtract,r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},r.equals=function(e,t){var a=e[0],r=e[1],o=e[2],i=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},r.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},r.multiplyScalarAndAdd=function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e},e.exports=r},function(e,t,a){var n=a(1),r={};r.create=function(){var e=new n.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},r.clone=function(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},r.fromValues=function(e,t,a,r,o,i){var s=new n.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=a,s[3]=r,s[4]=o,s[5]=i,s},r.set=function(e,t,a,n,r,o,i){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e[4]=o,e[5]=i,e},r.invert=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=a*o-n*r;return l?(l=1/l,e[0]=o*l,e[1]=-n*l,e[2]=-r*l,e[3]=a*l,e[4]=(r*s-o*i)*l,e[5]=(n*i-a*s)*l,e):null},r.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},r.multiply=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=a[0],c=a[1],f=a[2],m=a[3],d=a[4],h=a[5];return e[0]=n*u+o*c,e[1]=r*u+i*c,e[2]=n*f+o*m,e[3]=r*f+i*m,e[4]=n*d+o*h+s,e[5]=r*d+i*h+l,e},r.mul=r.multiply,r.rotate=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=Math.sin(a),c=Math.cos(a);return e[0]=n*c+o*u,e[1]=r*c+i*u,e[2]=n*-u+o*c,e[3]=r*-u+i*c,e[4]=s,e[5]=l,e},r.scale=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=a[0],c=a[1];return e[0]=n*u,e[1]=r*u,e[2]=o*c,e[3]=i*c,e[4]=s,e[5]=l,e},r.translate=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=a[0],c=a[1];return e[0]=n,e[1]=r,e[2]=o,e[3]=i,e[4]=n*u+o*c+s,e[5]=r*u+i*c+l,e},r.fromRotation=function(e,t){var a=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=a,e[2]=-a,e[3]=n,e[4]=0,e[5]=0,e},r.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},r.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},r.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},r.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},r.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e},r.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e},r.sub=r.subtract,r.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e},r.multiplyScalarAndAdd=function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},r.equals=function(e,t){var a=e[0],r=e[1],o=e[2],i=e[3],s=e[4],l=e[5],u=t[0],c=t[1],f=t[2],m=t[3],d=t[4],h=t[5];return Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-m)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(l-h)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(h))},e.exports=r},function(e,t,a){var n=a(1),r={};r.create=function(){var e=new n.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},r.clone=function(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.fromValues=function(e,t,a,r,o,i,s,l,u){var c=new n.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=a,c[3]=r,c[4]=o,c[5]=i,c[6]=s,c[7]=l,c[8]=u,c},r.set=function(e,t,a,n,r,o,i,s,l,u){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e[4]=o,e[5]=i,e[6]=s,e[7]=l,e[8]=u,e},r.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.transpose=function(e,t){if(e===t){var a=t[1],n=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=a,e[5]=t[7],e[6]=n,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},r.invert=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*i-s*u,m=-c*o+s*l,d=u*o-i*l,h=a*f+n*m+r*d;return h?(h=1/h,e[0]=f*h,e[1]=(-c*n+r*u)*h,e[2]=(s*n-r*i)*h,e[3]=m*h,e[4]=(c*a-r*l)*h,e[5]=(-s*a+r*o)*h,e[6]=d*h,e[7]=(-u*a+n*l)*h,e[8]=(i*a-n*o)*h,e):null},r.adjoint=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=i*c-s*u,e[1]=r*u-n*c,e[2]=n*s-r*i,e[3]=s*l-o*c,e[4]=a*c-r*l,e[5]=r*o-a*s,e[6]=o*u-i*l,e[7]=n*l-a*u,e[8]=a*i-n*o,e},r.determinant=function(e){var t=e[0],a=e[1],n=e[2],r=e[3],o=e[4],i=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-i*l)+a*(-u*r+i*s)+n*(l*r-o*s)},r.multiply=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],m=a[0],d=a[1],h=a[2],p=a[3],y=a[4],x=a[5],g=a[6],v=a[7],b=a[8];return e[0]=m*n+d*i+h*u,e[1]=m*r+d*s+h*c,e[2]=m*o+d*l+h*f,e[3]=p*n+y*i+x*u,e[4]=p*r+y*s+x*c,e[5]=p*o+y*l+x*f,e[6]=g*n+v*i+b*u,e[7]=g*r+v*s+b*c,e[8]=g*o+v*l+b*f,e},r.mul=r.multiply,r.translate=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],m=a[0],d=a[1];return e[0]=n,e[1]=r,e[2]=o,e[3]=i,e[4]=s,e[5]=l,e[6]=m*n+d*i+u,e[7]=m*r+d*s+c,e[8]=m*o+d*l+f,e},r.rotate=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],m=Math.sin(a),d=Math.cos(a);return e[0]=d*n+m*i,e[1]=d*r+m*s,e[2]=d*o+m*l,e[3]=d*i-m*n,e[4]=d*s-m*r,e[5]=d*l-m*o,e[6]=u,e[7]=c,e[8]=f,e},r.scale=function(e,t,a){var n=a[0],r=a[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},r.fromRotation=function(e,t){var a=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=a,e[2]=0,e[3]=-a,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},r.fromQuat=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=a+a,s=n+n,l=r+r,u=a*i,c=n*i,f=n*s,m=r*i,d=r*s,h=r*l,p=o*i,y=o*s,x=o*l;return e[0]=1-f-h,e[3]=c-x,e[6]=m+y,e[1]=c+x,e[4]=1-u-h,e[7]=d-p,e[2]=m-y,e[5]=d+p,e[8]=1-u-f,e},r.normalFromMat4=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],m=t[10],d=t[11],h=t[12],p=t[13],y=t[14],x=t[15],g=a*s-n*i,v=a*l-r*i,b=a*u-o*i,w=n*l-r*s,S=n*u-o*s,T=r*u-o*l,M=c*p-f*h,D=c*y-m*h,Y=c*x-d*h,X=f*y-m*p,_=f*x-d*p,k=m*x-d*y,I=g*k-v*_+b*X+w*Y-S*D+T*M;return I?(I=1/I,e[0]=(s*k-l*_+u*X)*I,e[1]=(l*Y-i*k-u*D)*I,e[2]=(i*_-s*Y+u*M)*I,e[3]=(r*_-n*k-o*X)*I,e[4]=(a*k-r*Y+o*D)*I,e[5]=(n*Y-a*_-o*M)*I,e[6]=(p*T-y*S+x*w)*I,e[7]=(y*b-h*T-x*v)*I,e[8]=(h*S-p*b+x*g)*I,e):null},r.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},r.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},r.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e},r.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e},r.sub=r.subtract,r.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e},r.multiplyScalarAndAdd=function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e[6]=t[6]+a[6]*n,e[7]=t[7]+a[7]*n,e[8]=t[8]+a[8]*n,e},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},r.equals=function(e,t){var a=e[0],r=e[1],o=e[2],i=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],m=t[0],d=t[1],h=t[2],p=t[3],y=t[4],x=t[5],g=e[6],v=t[7],b=t[8];return Math.abs(a-m)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(r-d)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-h)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-p)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-y)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-x)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-g)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-v)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-b)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))},e.exports=r},function(e,t,a){var n=a(1),r={scalar:{},SIMD:{}};r.create=function(){var e=new n.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.clone=function(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.fromValues=function(e,t,a,r,o,i,s,l,u,c,f,m,d,h,p,y){var x=new n.ARRAY_TYPE(16);return x[0]=e,x[1]=t,x[2]=a,x[3]=r,x[4]=o,x[5]=i,x[6]=s,x[7]=l,x[8]=u,x[9]=c,x[10]=f,x[11]=m,x[12]=d,x[13]=h,x[14]=p,x[15]=y,x},r.set=function(e,t,a,n,r,o,i,s,l,u,c,f,m,d,h,p,y){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e[4]=o,e[5]=i,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=f,e[11]=m,e[12]=d,e[13]=h,e[14]=p,e[15]=y,e},r.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.scalar.transpose=function(e,t){if(e===t){var a=t[1],n=t[2],r=t[3],o=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=a,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=r,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},r.SIMD.transpose=function(e,t){var a,n,r,o,i,s,l,u,c,f;return a=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),r=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4.shuffle(a,n,0,1,4,5),s=SIMD.Float32x4.shuffle(r,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,s,0,2,4,6),u=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(e,0,l),SIMD.Float32x4.store(e,4,u),i=SIMD.Float32x4.shuffle(a,n,2,3,6,7),s=SIMD.Float32x4.shuffle(r,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,s,0,2,4,6),f=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,f),e},r.transpose=n.USE_SIMD?r.SIMD.transpose:r.scalar.transpose,r.scalar.invert=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],m=t[10],d=t[11],h=t[12],p=t[13],y=t[14],x=t[15],g=a*s-n*i,v=a*l-r*i,b=a*u-o*i,w=n*l-r*s,S=n*u-o*s,T=r*u-o*l,M=c*p-f*h,D=c*y-m*h,Y=c*x-d*h,X=f*y-m*p,_=f*x-d*p,k=m*x-d*y,I=g*k-v*_+b*X+w*Y-S*D+T*M;return I?(I=1/I,e[0]=(s*k-l*_+u*X)*I,e[1]=(r*_-n*k-o*X)*I,e[2]=(p*T-y*S+x*w)*I,e[3]=(m*S-f*T-d*w)*I,e[4]=(l*Y-i*k-u*D)*I,e[5]=(a*k-r*Y+o*D)*I,e[6]=(y*b-h*T-x*v)*I,e[7]=(c*T-m*b+d*v)*I,e[8]=(i*_-s*Y+u*M)*I,e[9]=(n*Y-a*_-o*M)*I,e[10]=(h*S-p*b+x*g)*I,e[11]=(f*b-c*S-d*g)*I,e[12]=(s*D-i*X-l*M)*I,e[13]=(a*X-n*D+r*M)*I,e[14]=(p*v-h*w-y*g)*I,e[15]=(c*w-f*v+m*g)*I,e):null},r.SIMD.invert=function(e,t){var a,n,r,o,i,s,l,u,c,f,m=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),h=SIMD.Float32x4.load(t,8),p=SIMD.Float32x4.load(t,12);return i=SIMD.Float32x4.shuffle(m,d,0,1,4,5),n=SIMD.Float32x4.shuffle(h,p,0,1,4,5),a=SIMD.Float32x4.shuffle(i,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,i,1,3,5,7),i=SIMD.Float32x4.shuffle(m,d,2,3,6,7),o=SIMD.Float32x4.shuffle(h,p,2,3,6,7),r=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.mul(n,i),l=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),s),u=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,i)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.mul(a,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),u),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(a,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),c),f=SIMD.Float32x4.mul(a,s),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),i=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(i,i))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(f,c)),e):null},r.invert=n.USE_SIMD?r.SIMD.invert:r.scalar.invert,r.scalar.adjoint=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],m=t[10],d=t[11],h=t[12],p=t[13],y=t[14],x=t[15];return e[0]=s*(m*x-d*y)-f*(l*x-u*y)+p*(l*d-u*m),e[1]=-(n*(m*x-d*y)-f*(r*x-o*y)+p*(r*d-o*m)),e[2]=n*(l*x-u*y)-s*(r*x-o*y)+p*(r*u-o*l),e[3]=-(n*(l*d-u*m)-s*(r*d-o*m)+f*(r*u-o*l)),e[4]=-(i*(m*x-d*y)-c*(l*x-u*y)+h*(l*d-u*m)),e[5]=a*(m*x-d*y)-c*(r*x-o*y)+h*(r*d-o*m),e[6]=-(a*(l*x-u*y)-i*(r*x-o*y)+h*(r*u-o*l)),e[7]=a*(l*d-u*m)-i*(r*d-o*m)+c*(r*u-o*l),e[8]=i*(f*x-d*p)-c*(s*x-u*p)+h*(s*d-u*f),e[9]=-(a*(f*x-d*p)-c*(n*x-o*p)+h*(n*d-o*f)),e[10]=a*(s*x-u*p)-i*(n*x-o*p)+h*(n*u-o*s),e[11]=-(a*(s*d-u*f)-i*(n*d-o*f)+c*(n*u-o*s)),e[12]=-(i*(f*y-m*p)-c*(s*y-l*p)+h*(s*m-l*f)),e[13]=a*(f*y-m*p)-c*(n*y-r*p)+h*(n*m-r*f),e[14]=-(a*(s*y-l*p)-i*(n*y-r*p)+h*(n*l-r*s)),e[15]=a*(s*m-l*f)-i*(n*m-r*f)+c*(n*l-r*s),e},r.SIMD.adjoint=function(e,t){var a,n,r,o,i,s,l,u,c,f,m,d,h;return a=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),r=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),c=SIMD.Float32x4.shuffle(a,n,0,1,4,5),s=SIMD.Float32x4.shuffle(r,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.shuffle(a,n,2,3,6,7),u=SIMD.Float32x4.shuffle(r,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.mul(l,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(s,c),m=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),f),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),h),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),d),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),m),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),m),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),SIMD.Float32x4.store(e,0,f),SIMD.Float32x4.store(e,4,m),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,h),e},r.adjoint=n.USE_SIMD?r.SIMD.adjoint:r.scalar.adjoint,r.determinant=function(e){var t=e[0],a=e[1],n=e[2],r=e[3],o=e[4],i=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],m=e[11],d=e[12],h=e[13],p=e[14],y=e[15],x=t*i-a*o,g=t*s-n*o,v=t*l-r*o,b=a*s-n*i,w=a*l-r*i,S=n*l-r*s,T=u*h-c*d,M=u*p-f*d,D=u*y-m*d,Y=c*p-f*h,X=c*y-m*h,_=f*y-m*p;return x*_-g*X+v*Y+b*D-w*M+S*T},r.SIMD.multiply=function(e,t,a){var n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(a,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(e,0,l);var u=SIMD.Float32x4.load(a,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(e,4,c);var f=SIMD.Float32x4.load(a,8),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));SIMD.Float32x4.store(e,8,m);var d=SIMD.Float32x4.load(a,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(e,12,h),e},r.scalar.multiply=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],m=t[9],d=t[10],h=t[11],p=t[12],y=t[13],x=t[14],g=t[15],v=a[0],b=a[1],w=a[2],S=a[3];return e[0]=v*n+b*s+w*f+S*p,e[1]=v*r+b*l+w*m+S*y,e[2]=v*o+b*u+w*d+S*x,e[3]=v*i+b*c+w*h+S*g,v=a[4],b=a[5],w=a[6],S=a[7],e[4]=v*n+b*s+w*f+S*p,e[5]=v*r+b*l+w*m+S*y,e[6]=v*o+b*u+w*d+S*x,e[7]=v*i+b*c+w*h+S*g,v=a[8],b=a[9],w=a[10],S=a[11],e[8]=v*n+b*s+w*f+S*p,e[9]=v*r+b*l+w*m+S*y,e[10]=v*o+b*u+w*d+S*x,e[11]=v*i+b*c+w*h+S*g,v=a[12],b=a[13],w=a[14],S=a[15],e[12]=v*n+b*s+w*f+S*p,e[13]=v*r+b*l+w*m+S*y,e[14]=v*o+b*u+w*d+S*x,e[15]=v*i+b*c+w*h+S*g,e},r.multiply=n.USE_SIMD?r.SIMD.multiply:r.scalar.multiply,r.mul=r.multiply,r.scalar.translate=function(e,t,a){var n,r,o,i,s,l,u,c,f,m,d,h,p=a[0],y=a[1],x=a[2];return t===e?(e[12]=t[0]*p+t[4]*y+t[8]*x+t[12],e[13]=t[1]*p+t[5]*y+t[9]*x+t[13],e[14]=t[2]*p+t[6]*y+t[10]*x+t[14],e[15]=t[3]*p+t[7]*y+t[11]*x+t[15]):(n=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],m=t[9],d=t[10],h=t[11],e[0]=n,e[1]=r,e[2]=o,e[3]=i,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=m,e[10]=d,e[11]=h,e[12]=n*p+s*y+f*x+t[12],e[13]=r*p+l*y+m*x+t[13],e[14]=o*p+u*y+d*x+t[14],e[15]=i*p+c*y+h*x+t[15]),e},r.SIMD.translate=function(e,t,a){var n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(a[0],a[1],a[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(n,SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(e,12,l),e},r.translate=n.USE_SIMD?r.SIMD.translate:r.scalar.translate,r.scalar.scale=function(e,t,a){var n=a[0],r=a[1],o=a[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.SIMD.scale=function(e,t,a){var n,r,o,i=SIMD.Float32x4(a[0],a[1],a[2],0);return n=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0))),r=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.scale=n.USE_SIMD?r.SIMD.scale:r.scalar.scale,r.rotate=function(e,t,a,r){var o,i,s,l,u,c,f,m,d,h,p,y,x,g,v,b,w,S,T,M,D,Y,X,_,k=r[0],I=r[1],R=r[2],C=Math.sqrt(k*k+I*I+R*R);return Math.abs(C)<n.EPSILON?null:(C=1/C,k*=C,I*=C,R*=C,o=Math.sin(a),i=Math.cos(a),s=1-i,l=t[0],u=t[1],c=t[2],f=t[3],m=t[4],d=t[5],h=t[6],p=t[7],y=t[8],x=t[9],g=t[10],v=t[11],b=k*k*s+i,w=I*k*s+R*o,S=R*k*s-I*o,T=k*I*s-R*o,M=I*I*s+i,D=R*I*s+k*o,Y=k*R*s+I*o,X=I*R*s-k*o,_=R*R*s+i,e[0]=l*b+m*w+y*S,e[1]=u*b+d*w+x*S,e[2]=c*b+h*w+g*S,e[3]=f*b+p*w+v*S,e[4]=l*T+m*M+y*D,e[5]=u*T+d*M+x*D,e[6]=c*T+h*M+g*D,e[7]=f*T+p*M+v*D,e[8]=l*Y+m*X+y*_,e[9]=u*Y+d*X+x*_,e[10]=c*Y+h*X+g*_,e[11]=f*Y+p*X+v*_,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},r.scalar.rotateX=function(e,t,a){var n=Math.sin(a),r=Math.cos(a),o=t[4],i=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+u*n,e[5]=i*r+c*n,e[6]=s*r+f*n,e[7]=l*r+m*n,e[8]=u*r-o*n,e[9]=c*r-i*n,e[10]=f*r-s*n,e[11]=m*r-l*n,e},r.SIMD.rotateX=function(e,t,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(o,n))),e},r.rotateX=n.USE_SIMD?r.SIMD.rotateX:r.scalar.rotateX,r.scalar.rotateY=function(e,t,a){var n=Math.sin(a),r=Math.cos(a),o=t[0],i=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-u*n,e[1]=i*r-c*n,e[2]=s*r-f*n,e[3]=l*r-m*n,e[8]=o*n+u*r,e[9]=i*n+c*r,e[10]=s*n+f*r,e[11]=l*n+m*r,e},r.SIMD.rotateY=function(e,t,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),e},r.rotateY=n.USE_SIMD?r.SIMD.rotateY:r.scalar.rotateY,r.scalar.rotateZ=function(e,t,a){var n=Math.sin(a),r=Math.cos(a),o=t[0],i=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+u*n,e[1]=i*r+c*n,e[2]=s*r+f*n,e[3]=l*r+m*n,e[4]=u*r-o*n,e[5]=c*r-i*n,e[6]=f*r-s*n,e[7]=m*r-l*n,e},r.SIMD.rotateZ=function(e,t,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(o,n))),e},r.rotateZ=n.USE_SIMD?r.SIMD.rotateZ:r.scalar.rotateZ,r.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},r.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromRotation=function(e,t,a){var r,o,i,s=a[0],l=a[1],u=a[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<n.EPSILON?null:(c=1/c,s*=c,l*=c,u*=c,r=Math.sin(t),o=Math.cos(t),i=1-o,e[0]=s*s*i+o,e[1]=l*s*i+u*r,e[2]=u*s*i-l*r,e[3]=0,e[4]=s*l*i-u*r,e[5]=l*l*i+o,e[6]=u*l*i+s*r,
e[7]=0,e[8]=s*u*i+l*r,e[9]=l*u*i-s*r,e[10]=u*u*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},r.fromXRotation=function(e,t){var a=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=a,e[7]=0,e[8]=0,e[9]=-a,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromYRotation=function(e,t){var a=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-a,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=a,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromZRotation=function(e,t){var a=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=a,e[2]=0,e[3]=0,e[4]=-a,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromRotationTranslation=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=n+n,l=r+r,u=o+o,c=n*s,f=n*l,m=n*u,d=r*l,h=r*u,p=o*u,y=i*s,x=i*l,g=i*u;return e[0]=1-(d+p),e[1]=f+g,e[2]=m-x,e[3]=0,e[4]=f-g,e[5]=1-(c+p),e[6]=h+y,e[7]=0,e[8]=m+x,e[9]=h-y,e[10]=1-(c+d),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e},r.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},r.getRotation=function(e,t){var a=t[0]+t[5]+t[10],n=0;return a>0?(n=2*Math.sqrt(a+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},r.fromRotationTranslationScale=function(e,t,a,n){var r=t[0],o=t[1],i=t[2],s=t[3],l=r+r,u=o+o,c=i+i,f=r*l,m=r*u,d=r*c,h=o*u,p=o*c,y=i*c,x=s*l,g=s*u,v=s*c,b=n[0],w=n[1],S=n[2];return e[0]=(1-(h+y))*b,e[1]=(m+v)*b,e[2]=(d-g)*b,e[3]=0,e[4]=(m-v)*w,e[5]=(1-(f+y))*w,e[6]=(p+x)*w,e[7]=0,e[8]=(d+g)*S,e[9]=(p-x)*S,e[10]=(1-(f+h))*S,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e},r.fromRotationTranslationScaleOrigin=function(e,t,a,n,r){var o=t[0],i=t[1],s=t[2],l=t[3],u=o+o,c=i+i,f=s+s,m=o*u,d=o*c,h=o*f,p=i*c,y=i*f,x=s*f,g=l*u,v=l*c,b=l*f,w=n[0],S=n[1],T=n[2],M=r[0],D=r[1],Y=r[2];return e[0]=(1-(p+x))*w,e[1]=(d+b)*w,e[2]=(h-v)*w,e[3]=0,e[4]=(d-b)*S,e[5]=(1-(m+x))*S,e[6]=(y+g)*S,e[7]=0,e[8]=(h+v)*T,e[9]=(y-g)*T,e[10]=(1-(m+p))*T,e[11]=0,e[12]=a[0]+M-(e[0]*M+e[4]*D+e[8]*Y),e[13]=a[1]+D-(e[1]*M+e[5]*D+e[9]*Y),e[14]=a[2]+Y-(e[2]*M+e[6]*D+e[10]*Y),e[15]=1,e},r.fromQuat=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=a+a,s=n+n,l=r+r,u=a*i,c=n*i,f=n*s,m=r*i,d=r*s,h=r*l,p=o*i,y=o*s,x=o*l;return e[0]=1-f-h,e[1]=c+x,e[2]=m-y,e[3]=0,e[4]=c-x,e[5]=1-u-h,e[6]=d+p,e[7]=0,e[8]=m+y,e[9]=d-p,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.frustum=function(e,t,a,n,r,o,i){var s=1/(a-t),l=1/(r-n),u=1/(o-i);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(a+t)*s,e[9]=(r+n)*l,e[10]=(i+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*u,e[15]=0,e},r.perspective=function(e,t,a,n,r){var o=1/Math.tan(t/2),i=1/(n-r);return e[0]=o/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+n)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*n*i,e[15]=0,e},r.perspectiveFromFieldOfView=function(e,t,a,n){var r=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(i+s),u=2/(r+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((i-s)*l*.5),e[9]=(r-o)*u*.5,e[10]=n/(a-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*a/(a-n),e[15]=0,e},r.ortho=function(e,t,a,n,r,o,i){var s=1/(t-a),l=1/(n-r),u=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+a)*s,e[13]=(r+n)*l,e[14]=(i+o)*u,e[15]=1,e},r.lookAt=function(e,t,a,o){var i,s,l,u,c,f,m,d,h,p,y=t[0],x=t[1],g=t[2],v=o[0],b=o[1],w=o[2],S=a[0],T=a[1],M=a[2];return Math.abs(y-S)<n.EPSILON&&Math.abs(x-T)<n.EPSILON&&Math.abs(g-M)<n.EPSILON?r.identity(e):(m=y-S,d=x-T,h=g-M,p=1/Math.sqrt(m*m+d*d+h*h),m*=p,d*=p,h*=p,i=b*h-w*d,s=w*m-v*h,l=v*d-b*m,p=Math.sqrt(i*i+s*s+l*l),p?(p=1/p,i*=p,s*=p,l*=p):(i=0,s=0,l=0),u=d*l-h*s,c=h*i-m*l,f=m*s-d*i,p=Math.sqrt(u*u+c*c+f*f),p?(p=1/p,u*=p,c*=p,f*=p):(u=0,c=0,f=0),e[0]=i,e[1]=u,e[2]=m,e[3]=0,e[4]=s,e[5]=c,e[6]=d,e[7]=0,e[8]=l,e[9]=f,e[10]=h,e[11]=0,e[12]=-(i*y+s*x+l*g),e[13]=-(u*y+c*x+f*g),e[14]=-(m*y+d*x+h*g),e[15]=1,e)},r.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},r.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},r.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e[9]=t[9]+a[9],e[10]=t[10]+a[10],e[11]=t[11]+a[11],e[12]=t[12]+a[12],e[13]=t[13]+a[13],e[14]=t[14]+a[14],e[15]=t[15]+a[15],e},r.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e[9]=t[9]-a[9],e[10]=t[10]-a[10],e[11]=t[11]-a[11],e[12]=t[12]-a[12],e[13]=t[13]-a[13],e[14]=t[14]-a[14],e[15]=t[15]-a[15],e},r.sub=r.subtract,r.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12]*a,e[13]=t[13]*a,e[14]=t[14]*a,e[15]=t[15]*a,e},r.multiplyScalarAndAdd=function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e[6]=t[6]+a[6]*n,e[7]=t[7]+a[7]*n,e[8]=t[8]+a[8]*n,e[9]=t[9]+a[9]*n,e[10]=t[10]+a[10]*n,e[11]=t[11]+a[11]*n,e[12]=t[12]+a[12]*n,e[13]=t[13]+a[13]*n,e[14]=t[14]+a[14]*n,e[15]=t[15]+a[15]*n,e},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},r.equals=function(e,t){var a=e[0],r=e[1],o=e[2],i=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],m=e[9],d=e[10],h=e[11],p=e[12],y=e[13],x=e[14],g=e[15],v=t[0],b=t[1],w=t[2],S=t[3],T=t[4],M=t[5],D=t[6],Y=t[7],X=t[8],_=t[9],k=t[10],I=t[11],R=t[12],C=t[13],P=t[14],A=t[15];return Math.abs(a-v)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(r-b)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-w)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-S)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(s-T)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(l-M)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-D)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(c-Y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(Y))&&Math.abs(f-X)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(X))&&Math.abs(m-_)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))&&Math.abs(d-k)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-I)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-R)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(y-C)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(x-P)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(g-A)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))},e.exports=r},function(e,t,a){var n=a(1),r=a(4),o=a(7),i=a(8),s={};s.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.rotationTo=function(){var e=o.create(),t=o.fromValues(1,0,0),a=o.fromValues(0,1,0);return function(n,r,i){var l=o.dot(r,i);return-.999999>l?(o.cross(e,t,r),o.length(e)<1e-6&&o.cross(e,a,r),o.normalize(e,e),s.setAxisAngle(n,e,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(e,r,i),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+l,s.normalize(n,n))}}(),s.setAxes=function(){var e=r.create();return function(t,a,n,r){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-a[0],e[5]=-a[1],e[8]=-a[2],s.normalize(t,s.fromMat3(t,e))}}(),s.clone=i.clone,s.fromValues=i.fromValues,s.copy=i.copy,s.set=i.set,s.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.setAxisAngle=function(e,t,a){a=.5*a;var n=Math.sin(a);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(a),e},s.getAxisAngle=function(e,t){var a=2*Math.acos(t[3]),n=Math.sin(a/2);return 0!=n?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),a},s.add=i.add,s.multiply=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3],s=a[0],l=a[1],u=a[2],c=a[3];return e[0]=n*c+i*s+r*u-o*l,e[1]=r*c+i*l+o*s-n*u,e[2]=o*c+i*u+n*l-r*s,e[3]=i*c-n*s-r*l-o*u,e},s.mul=s.multiply,s.scale=i.scale,s.rotateX=function(e,t,a){a*=.5;var n=t[0],r=t[1],o=t[2],i=t[3],s=Math.sin(a),l=Math.cos(a);return e[0]=n*l+i*s,e[1]=r*l+o*s,e[2]=o*l-r*s,e[3]=i*l-n*s,e},s.rotateY=function(e,t,a){a*=.5;var n=t[0],r=t[1],o=t[2],i=t[3],s=Math.sin(a),l=Math.cos(a);return e[0]=n*l-o*s,e[1]=r*l+i*s,e[2]=o*l+n*s,e[3]=i*l-r*s,e},s.rotateZ=function(e,t,a){a*=.5;var n=t[0],r=t[1],o=t[2],i=t[3],s=Math.sin(a),l=Math.cos(a);return e[0]=n*l+r*s,e[1]=r*l-n*s,e[2]=o*l+i*s,e[3]=i*l-o*s,e},s.calculateW=function(e,t){var a=t[0],n=t[1],r=t[2];return e[0]=a,e[1]=n,e[2]=r,e[3]=Math.sqrt(Math.abs(1-a*a-n*n-r*r)),e},s.dot=i.dot,s.lerp=i.lerp,s.slerp=function(e,t,a,n){var r,o,i,s,l,u=t[0],c=t[1],f=t[2],m=t[3],d=a[0],h=a[1],p=a[2],y=a[3];return o=u*d+c*h+f*p+m*y,0>o&&(o=-o,d=-d,h=-h,p=-p,y=-y),1-o>1e-6?(r=Math.acos(o),i=Math.sin(r),s=Math.sin((1-n)*r)/i,l=Math.sin(n*r)/i):(s=1-n,l=n),e[0]=s*u+l*d,e[1]=s*c+l*h,e[2]=s*f+l*p,e[3]=s*m+l*y,e},s.sqlerp=function(){var e=s.create(),t=s.create();return function(a,n,r,o,i,l){return s.slerp(e,n,i,l),s.slerp(t,r,o,l),s.slerp(a,e,t,2*l*(1-l)),a}}(),s.invert=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=a*a+n*n+r*r+o*o,s=i?1/i:0;return e[0]=-a*s,e[1]=-n*s,e[2]=-r*s,e[3]=o*s,e},s.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},s.length=i.length,s.len=s.length,s.squaredLength=i.squaredLength,s.sqrLen=s.squaredLength,s.normalize=i.normalize,s.fromMat3=function(e,t){var a,n=t[0]+t[4]+t[8];if(n>0)a=Math.sqrt(n+1),e[3]=.5*a,a=.5/a,e[0]=(t[5]-t[7])*a,e[1]=(t[6]-t[2])*a,e[2]=(t[1]-t[3])*a;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var o=(r+1)%3,i=(r+2)%3;a=Math.sqrt(t[3*r+r]-t[3*o+o]-t[3*i+i]+1),e[r]=.5*a,a=.5/a,e[3]=(t[3*o+i]-t[3*i+o])*a,e[o]=(t[3*o+r]+t[3*r+o])*a,e[i]=(t[3*i+r]+t[3*r+i])*a}return e},s.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},s.exactEquals=i.exactEquals,s.equals=i.equals,e.exports=s},function(e,t,a){var n=a(1),r={};r.create=function(){var e=new n.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},r.clone=function(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.fromValues=function(e,t,a){var r=new n.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=a,r},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.set=function(e,t,a,n){return e[0]=t,e[1]=a,e[2]=n,e},r.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e},r.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e},r.sub=r.subtract,r.multiply=function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e},r.mul=r.multiply,r.divide=function(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e},r.div=r.divide,r.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},r.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},r.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e},r.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e},r.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},r.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e},r.scaleAndAdd=function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e},r.distance=function(e,t){var a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return Math.sqrt(a*a+n*n+r*r)},r.dist=r.distance,r.squaredDistance=function(e,t){var a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return a*a+n*n+r*r},r.sqrDist=r.squaredDistance,r.length=function(e){var t=e[0],a=e[1],n=e[2];return Math.sqrt(t*t+a*a+n*n)},r.len=r.length,r.squaredLength=function(e){var t=e[0],a=e[1],n=e[2];return t*t+a*a+n*n},r.sqrLen=r.squaredLength,r.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},r.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},r.normalize=function(e,t){var a=t[0],n=t[1],r=t[2],o=a*a+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},r.cross=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=a[0],s=a[1],l=a[2];return e[0]=r*l-o*s,e[1]=o*i-n*l,e[2]=n*s-r*i,e},r.lerp=function(e,t,a,n){var r=t[0],o=t[1],i=t[2];return e[0]=r+n*(a[0]-r),e[1]=o+n*(a[1]-o),e[2]=i+n*(a[2]-i),e},r.hermite=function(e,t,a,n,r,o){var i=o*o,s=i*(2*o-3)+1,l=i*(o-2)+o,u=i*(o-1),c=i*(3-2*o);return e[0]=t[0]*s+a[0]*l+n[0]*u+r[0]*c,e[1]=t[1]*s+a[1]*l+n[1]*u+r[1]*c,e[2]=t[2]*s+a[2]*l+n[2]*u+r[2]*c,e},r.bezier=function(e,t,a,n,r,o){var i=1-o,s=i*i,l=o*o,u=s*i,c=3*o*s,f=3*l*i,m=l*o;return e[0]=t[0]*u+a[0]*c+n[0]*f+r[0]*m,e[1]=t[1]*u+a[1]*c+n[1]*f+r[1]*m,e[2]=t[2]*u+a[2]*c+n[2]*f+r[2]*m,e},r.random=function(e,t){t=t||1;var a=2*n.RANDOM()*Math.PI,r=2*n.RANDOM()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(a)*o,e[1]=Math.sin(a)*o,e[2]=r*t,e},r.transformMat4=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=a[3]*n+a[7]*r+a[11]*o+a[15];return i=i||1,e[0]=(a[0]*n+a[4]*r+a[8]*o+a[12])/i,e[1]=(a[1]*n+a[5]*r+a[9]*o+a[13])/i,e[2]=(a[2]*n+a[6]*r+a[10]*o+a[14])/i,e},r.transformMat3=function(e,t,a){var n=t[0],r=t[1],o=t[2];return e[0]=n*a[0]+r*a[3]+o*a[6],e[1]=n*a[1]+r*a[4]+o*a[7],e[2]=n*a[2]+r*a[5]+o*a[8],e},r.transformQuat=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=a[0],s=a[1],l=a[2],u=a[3],c=u*n+s*o-l*r,f=u*r+l*n-i*o,m=u*o+i*r-s*n,d=-i*n-s*r-l*o;return e[0]=c*u+d*-i+f*-l-m*-s,e[1]=f*u+d*-s+m*-i-c*-l,e[2]=m*u+d*-l+c*-s-f*-i,e},r.rotateX=function(e,t,a,n){var r=[],o=[];return r[0]=t[0]-a[0],r[1]=t[1]-a[1],r[2]=t[2]-a[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e},r.rotateY=function(e,t,a,n){var r=[],o=[];return r[0]=t[0]-a[0],r[1]=t[1]-a[1],r[2]=t[2]-a[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e},r.rotateZ=function(e,t,a,n){var r=[],o=[];return r[0]=t[0]-a[0],r[1]=t[1]-a[1],r[2]=t[2]-a[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e},r.forEach=function(){var e=r.create();return function(t,a,n,r,o,i){var s,l;for(a||(a=3),n||(n=0),l=r?Math.min(r*a+n,t.length):t.length,s=n;l>s;s+=a)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),r.angle=function(e,t){var a=r.fromValues(e[0],e[1],e[2]),n=r.fromValues(t[0],t[1],t[2]);r.normalize(a,a),r.normalize(n,n);var o=r.dot(a,n);return o>1?0:Math.acos(o)},r.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},r.equals=function(e,t){var a=e[0],r=e[1],o=e[2],i=t[0],s=t[1],l=t[2];return Math.abs(a-i)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},e.exports=r},function(e,t,a){var n=a(1),r={};r.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},r.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.fromValues=function(e,t,a,r){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=a,o[3]=r,o},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.set=function(e,t,a,n,r){return e[0]=t,e[1]=a,e[2]=n,e[3]=r,e},r.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},r.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e},r.sub=r.subtract,r.multiply=function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e[3]=t[3]*a[3],e},r.mul=r.multiply,r.divide=function(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e[3]=t[3]/a[3],e},r.div=r.divide,r.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},r.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},r.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e[3]=Math.min(t[3],a[3]),e},r.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e[3]=Math.max(t[3],a[3]),e},r.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},r.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},r.scaleAndAdd=function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e},r.distance=function(e,t){var a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(a*a+n*n+r*r+o*o)},r.dist=r.distance,r.squaredDistance=function(e,t){var a=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return a*a+n*n+r*r+o*o},r.sqrDist=r.squaredDistance,r.length=function(e){var t=e[0],a=e[1],n=e[2],r=e[3];return Math.sqrt(t*t+a*a+n*n+r*r)},r.len=r.length,r.squaredLength=function(e){var t=e[0],a=e[1],n=e[2],r=e[3];return t*t+a*a+n*n+r*r},r.sqrLen=r.squaredLength,r.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},r.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},r.normalize=function(e,t){var a=t[0],n=t[1],r=t[2],o=t[3],i=a*a+n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=a*i,e[1]=n*i,e[2]=r*i,e[3]=o*i),e},r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},r.lerp=function(e,t,a,n){var r=t[0],o=t[1],i=t[2],s=t[3];return e[0]=r+n*(a[0]-r),e[1]=o+n*(a[1]-o),e[2]=i+n*(a[2]-i),e[3]=s+n*(a[3]-s),e},r.random=function(e,t){return t=t||1,e[0]=n.RANDOM(),e[1]=n.RANDOM(),e[2]=n.RANDOM(),e[3]=n.RANDOM(),r.normalize(e,e),r.scale(e,e,t),e},r.transformMat4=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=t[3];return e[0]=a[0]*n+a[4]*r+a[8]*o+a[12]*i,e[1]=a[1]*n+a[5]*r+a[9]*o+a[13]*i,e[2]=a[2]*n+a[6]*r+a[10]*o+a[14]*i,e[3]=a[3]*n+a[7]*r+a[11]*o+a[15]*i,e},r.transformQuat=function(e,t,a){var n=t[0],r=t[1],o=t[2],i=a[0],s=a[1],l=a[2],u=a[3],c=u*n+s*o-l*r,f=u*r+l*n-i*o,m=u*o+i*r-s*n,d=-i*n-s*r-l*o;return e[0]=c*u+d*-i+f*-l-m*-s,e[1]=f*u+d*-s+m*-i-c*-l,e[2]=m*u+d*-l+c*-s-f*-i,e[3]=t[3],e},r.forEach=function(){var e=r.create();return function(t,a,n,r,o,i){var s,l;for(a||(a=4),n||(n=0),l=r?Math.min(r*a+n,t.length):t.length,s=n;l>s;s+=a)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),r.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},r.equals=function(e,t){var a=e[0],r=e[1],o=e[2],i=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.exports=r},function(e,t,a){var n=a(1),r={};r.create=function(){var e=new n.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},r.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},r.fromValues=function(e,t){var a=new n.ARRAY_TYPE(2);return a[0]=e,a[1]=t,a},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},r.set=function(e,t,a){return e[0]=t,e[1]=a,e},r.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e},r.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e},r.sub=r.subtract,r.multiply=function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e},r.mul=r.multiply,r.divide=function(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e},r.div=r.divide,r.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},r.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},r.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e},r.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e},r.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},r.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e},r.scaleAndAdd=function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e},r.distance=function(e,t){var a=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(a*a+n*n)},r.dist=r.distance,r.squaredDistance=function(e,t){var a=t[0]-e[0],n=t[1]-e[1];return a*a+n*n},r.sqrDist=r.squaredDistance,r.length=function(e){var t=e[0],a=e[1];return Math.sqrt(t*t+a*a)},r.len=r.length,r.squaredLength=function(e){var t=e[0],a=e[1];return t*t+a*a},r.sqrLen=r.squaredLength,r.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},r.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},r.normalize=function(e,t){var a=t[0],n=t[1],r=a*a+n*n;return r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e},r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},r.cross=function(e,t,a){var n=t[0]*a[1]-t[1]*a[0];return e[0]=e[1]=0,e[2]=n,e},r.lerp=function(e,t,a,n){var r=t[0],o=t[1];return e[0]=r+n*(a[0]-r),e[1]=o+n*(a[1]-o),e},r.random=function(e,t){t=t||1;var a=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(a)*t,e[1]=Math.sin(a)*t,e},r.transformMat2=function(e,t,a){var n=t[0],r=t[1];return e[0]=a[0]*n+a[2]*r,e[1]=a[1]*n+a[3]*r,e},r.transformMat2d=function(e,t,a){var n=t[0],r=t[1];return e[0]=a[0]*n+a[2]*r+a[4],e[1]=a[1]*n+a[3]*r+a[5],e},r.transformMat3=function(e,t,a){var n=t[0],r=t[1];return e[0]=a[0]*n+a[3]*r+a[6],e[1]=a[1]*n+a[4]*r+a[7],e},r.transformMat4=function(e,t,a){var n=t[0],r=t[1];return e[0]=a[0]*n+a[4]*r+a[12],e[1]=a[1]*n+a[5]*r+a[13],e},r.forEach=function(){var e=r.create();return function(t,a,n,r,o,i){var s,l;for(a||(a=2),n||(n=0),l=r?Math.min(r*a+n,t.length):t.length,s=n;l>s;s+=a)e[0]=t[s],e[1]=t[s+1],o(e,e,i),t[s]=e[0],t[s+1]=e[1];return t}}(),r.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},r.equals=function(e,t){var a=e[0],r=e[1],o=t[0],i=t[1];return Math.abs(a-o)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))},e.exports=r}])}),define("glmatrix",["gl-matrix-min"],function(e){var t=function(){return e}();return t}),define("glshaders",["jquery"],function(e){var t=function(){function t(){if(s>i){var a=n[r[i]];e.ajax({url:a.src,success:function(e){a.file=e,a.loaded=!0,i++,t()},error:function(e,t,a){console.log('MOD_Shaders.init : error loading shader "'+key+'". Details:'),console.log(t),console.log(a)}})}else o=!0}function a(){r=Object.keys(n),t()}var n={"shader-vertex":{src:"shaders/vertex.glsl",file:"",loaded:!1},"shader-fragment":{src:"shaders/fragment.glsl",file:"",loaded:!1}},r=[],o=!1,i=0,s=Object.keys(n).length;return{init:a,allLoaded:function(){return o},getShader:function(e){for(var t in n)if(n.hasOwnProperty(t)&&t===e){var a=n[t];return a.loaded?a.file:""}return""},get:function(){return n}}}();return t}),define("worldrenderergl",["enginevars","glmatrix","glshaders","maths","assets","vector2","collision","renderer","projectiledefs","effectdefs"],function(e,t,a,n,r,o,i,s,l,u){var c=function(){function s(){ce.perspectiveFromFieldOfView(xe,{upDegrees:o.radiansToDegrees(Ye/2),downDegrees:o.radiansToDegrees(Ye/2),leftDegrees:o.radiansToDegrees(De/2),rightDegrees:o.radiansToDegrees(De/2)},Xe,_e)}function c(e,t,a){rt=Math.atan2(t.x,t.y)-it,ce.identity(ye),ce.rotate(ye,ye,-a,[0,0,1]),ce.rotate(ye,ye,-rt,[0,1,0]),ce.translate(ye,ye,[e.y,-e.z,-e.x])}function f(e){var t=o.signedRadiansBetweenVectors(e,{x:0,y:-1});et=Math.cos(t),tt=Math.sin(t),at=Math.cos(-(rt+Ze)),nt=Math.sin(-(rt+Ze))}function m(){var e=Le.img,t=e.width,a=e.height,n=(Qe-(rt+Ze))/Qe,r=De/Qe,o=n*t,i=r*t,s=o,l=o+i;if(l>=t){var u=s,c=t-1,f=c-u,m=f/i*Ie.x,d=0,h=l-t,p=h-d,y=p/i*Ie.x;ie.drawImage(e,u,0,f,a,0,0,m,Ie.y),ie.drawImage(e,d,0,p,a,m,0,y,Ie.y)}else ie.drawImage(e,s,0,i,a,0,0,Ie.x,Ie.y)}function d(e,t,a,n,r,o,i,s,l,u,c,f,m,d,h,p,y,x,g,v,b,w){pe.items.push({vPosAX:e,vPosAY:t,vPosAZ:a,vPosBX:n,vPosBY:r,vPosBZ:o,vPosCX:i,vPosCY:s,vPosCZ:l,vTexCoordAX:u,vTexCoordAY:c,vTexCoordBX:f,vTexCoordBY:m,vTexCoordCX:d,vTexCoordCY:h,texUnitIdx:p,lightLevel:y,fullBright:x,texFrameX:g,texFrameY:v,texFrameW:b,texFrameH:w})}function h(){for(var e=pe.items,t=e.length,a=0;t>a;a++){var n=e[a],r=n.texUnitIdx.idx;pe.renderBatches.hasOwnProperty(r)?pe.renderBatches[r].items.push(n):pe.renderBatches[r]={texUnitIdx:r,items:[n]}}}function p(){ae.uniform1f(te.framePaddingUniform,ze);var e=(pe.items.length,pe.renderBatches);for(var t in e){var a=e[t],n=a.items,r=n.length;$=[],Z=[],Q=[],J=[],ee=[];for(var o=0;r>o;o++){var i=n[o],s=i.texFrameX,l=i.texFrameY,u=i.texFrameW,c=i.texFrameH,f=i.lightLevel,m=i.fullBright;$.push(i.vPosAX,i.vPosAY,i.vPosAZ,i.vPosBX,i.vPosBY,i.vPosBZ,i.vPosCX,i.vPosCY,i.vPosCZ),Z.push(i.vTexCoordAX,i.vTexCoordAY,i.vTexCoordBX,i.vTexCoordBY,i.vTexCoordCX,i.vTexCoordCY),ee.push(s,l,u,c,s,l,u,c,s,l,u,c),Q.push(f,f,f),J.push(m,m,m)}ae.bindBuffer(ae.ARRAY_BUFFER,H),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array($),ae.STATIC_DRAW),ae.vertexAttribPointer(te.vertexPositionAttribute,3,ae.FLOAT,!1,0,0),ae.bindBuffer(ae.ARRAY_BUFFER,W),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array(Z),ae.STATIC_DRAW),ae.vertexAttribPointer(te.vertexTexCoordAttribute,2,ae.FLOAT,!1,0,0),ae.bindBuffer(ae.ARRAY_BUFFER,K),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array(ee),ae.STATIC_DRAW),ae.vertexAttribPointer(te.vertexTexFrameCoordAttribute,4,ae.FLOAT,!1,0,0),ae.bindBuffer(ae.ARRAY_BUFFER,U),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array(Q),ae.STATIC_DRAW),ae.vertexAttribPointer(te.vertexLightLevelAttribute,1,ae.FLOAT,!1,0,0),ae.bindBuffer(ae.ARRAY_BUFFER,G),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array(J),ae.STATIC_DRAW),ae.vertexAttribPointer(te.vertexFullBrightAttribute,1,ae.FLOAT,!1,0,0),ae.uniform1i(te.samplerUniform,a.texUnitIdx),ae.drawArrays(ae.TRIANGLES,0,3*r),st++}}function y(e,t){var a=e.sp,n=e.ep,r=a.x-t.x,o=a.y-t.y,i=n.x-t.x,s=n.y-t.y;return{sp:{x:r*et-o*tt,y:o*et+r*tt},ep:{x:i*et-s*tt,y:s*et+i*tt}}}function x(e,t){if(e.psg===ut.g||-1!==ut.pvs.indexOf(e.psg)){y(e,t)}}function g(e,t){var a=y(e,t);if(a.sp.y>=0&&a.ep.y>=0)return null;var r=a.sp.x,o=a.sp.y,s=a.ep.x,l=a.ep.y,u=Ce.minRay.x,c=Ce.minRay.y,f=Ce.maxRay.x,m=Ce.maxRay.y,d=i.pointOnSegSide(r,o,0,0,u,c),h=i.pointOnSegSide(r,o,0,0,f,m),p=i.pointOnSegSide(s,l,0,0,u,c),x=i.pointOnSegSide(s,l,0,0,f,m),g=r,v=o,b=s,w=l;if(0>d||h>0||0>p||x>0){var S=i.intersectsLineWithLineOptimised(g,v,b,w,0,0,u,c),T=i.intersectsLineWithLineOptimised(g,v,b,w,0,0,f,m);if(S.result===!1&&T.result===!1)return null;S.result===!0&&(b=S.x,w=S.y),T.result===!0&&(g=T.x,v=T.y)}var M=Math.atan2(w,b)-it,D=Math.atan2(v,g)-it,Y=~~(ke*Math.tan(D))+Re.x,X=~~(ke*Math.tan(M))+Re.x;return{s:n.clamp(Y,0,Ie.x),e:n.clamp(X,0,Ie.x)}}function v(e,t){var a=g(e,t);if(null!==a)for(var n=a.e;n<=a.s;n++)0===ct[n]&&(ct[n]=1,ft--)}function b(e,t){if(e.psg===ut.g||-1!==ut.pvs.indexOf(e.psg)){var a=e.sp,n=e.ep,r=a.x,o=a.y,s=n.x,l=n.y;t.x,t.y;if(x(e,t),!(i.pointOnSegSide(t.x,t.y,r,o,s,l)>=0)){var u=e.pld;u.o===!0&&v(e,t);var c=u.pSec.fh,f=u.pSec.ch,m=u.ll,h=!1,p=u.upper,y=u.middle,g=u.lower,b=s-r,w=l-o,S=Math.sqrt(b*b+w*w);if(y>0&&null!==u.tma){var T=E(u.tma),M=f,D=c,Y=T.texCoords[u.tm[1]];if(null!==u.oSec){var X=u.oSec.fh,_=u.oSec.ch;M=f>_?_:f,D=X>c?X:c}var k=Y.x,I=T.assetSizeY-Y.y,R=T.assetSizeY-(Y.y+Y.h),C=M-D,P=k-u.tmx,A=k-u.tmx+S,F=I+u.tmy,O=I+u.tmy-C;u.af&&(F=R+C+u.tmy,O=R+u.tmy);var q=P/T.assetSizeX,B=A/T.assetSizeX,N=F/T.assetSizeY,z=O/T.assetSizeY;d(-o,M,r,-l,M,s,-o,D,r,B,N,q,N,B,z,T.assignedGLTexUnit,m,h,Y.x/Ne,(Ne-Y.y)/Ne,Y.w/Ne,Y.h/Ne),d(-l,M,s,-l,D,s,-o,D,r,q,N,q,z,B,z,T.assignedGLTexUnit,m,h,Y.x/Ne,(Ne-Y.y)/Ne,Y.w/Ne,Y.h/Ne)}if(p>0&&null!==u.tua){var T=E(u.tua),L=f,j=u.oSec.ch,Y=T.texCoords[u.tu[1]],k=Y.x,I=T.assetSizeY-Y.y,R=T.assetSizeY-(Y.y+Y.h),C=L-j,P=k-u.tux,A=k-u.tux+S,F=R+C+u.tuy;O=R+u.tuy;var q=P/T.assetSizeX,B=A/T.assetSizeX,N=F/T.assetSizeY,z=O/T.assetSizeY;d(-o,L,r,-l,L,s,-o,j,r,B,N,q,N,B,z,T.assignedGLTexUnit,m,h,Y.x/Ne,(Ne-Y.y)/Ne,Y.w/Ne,Y.h/Ne),d(-l,L,s,-l,j,s,-o,j,r,q,N,q,z,B,z,T.assignedGLTexUnit,m,h,Y.x/Ne,(Ne-Y.y)/Ne,Y.w/Ne,Y.h/Ne)}if(g>0&&"null"!==u.tla){var T=E(u.tla),V=u.oSec.fh,H=c,Y=T.texCoords[u.tl[1]],k=Y.x,I=T.assetSizeY-Y.y,R=T.assetSizeY-(Y.y+Y.h),C=V-H,P=k-u.tlx,A=k-u.tlx+S,F=I+u.tly,O=I+u.tly-C,q=P/T.assetSizeX,B=A/T.assetSizeX,N=F/T.assetSizeY,z=O/T.assetSizeY;d(-o,V,r,-l,V,s,-o,H,r,B,N,q,N,B,z,T.assignedGLTexUnit,m,h,Y.x/Ne,(Ne-Y.y)/Ne,Y.w/Ne,Y.h/Ne),d(-l,V,s,-l,H,s,-o,H,r,q,N,q,z,B,z,T.assignedGLTexUnit,m,h,Y.x/Ne,(Ne-Y.y)/Ne,Y.w/Ne,Y.h/Ne)}}}}function w(e,t){if(!(0>=ft)){if(1===e.l)for(var a=e.o,n=a.length,r=0;n>r;r++){var o=a[r];b(o,t),A(o.psg,Se)}else{var s=e.s,l=i.pointOnSegSide(t.x,t.y,s.sp.x,s.sp.y,s.ep.x,s.ep.y);0>=l?(w(e.f,t),w(e.b,t)):(w(e.b,t),w(e.f,t))}lt++}}function S(e,t){for(var a=e.length,n=0;a>n;n++){var r=e[n];if(-1!==Se.indexOf(r.g)){if(""!==r.f&&"0"!==r.f&&"-1"!==r.tf[0])for(var o=E("atlas"+r.tf[0]),i=r.fh,s=r.renderData.flatTriangles,l=s.length,u=o.texCoords[r.tf[1]],c=0;l>c;c++){var f=s[c],m=r.ll,h=!1,p=f[0],y=f[1],x=f[2],g=r.b,v=g.w/Ne,b=g.h/Ne,w=(g.w/u.w,g.h/u.h,u.x),S=(u.x+u.w,Ne-u.y);Ne-(u.y+u.h),w+g.w,S-g.h;d(-f[0].y,i,f[0].x,-f[1].y,i,f[1].x,-f[2].y,i,f[2].x,(p.x+r.fx-g.x)/g.w*v,(p.y+r.fy-g.y)/g.h*b,(y.x+r.fx-g.x)/g.w*v,(y.y+r.fy-g.y)/g.h*b,(x.x+r.fx-g.x)/g.w*v,(x.y+r.fy-g.y)/g.h*b,o.assignedGLTexUnit,m,h,u.x/Ne,(Ne-u.y)/Ne,u.w/Ne,u.h/Ne)}if(""!==r.c&&"0"!==r.c&&"-1"!==r.tc[0])for(var o=E("atlas"+r.tc[0]),i=r.ch,s=r.renderData.flatTriangles,l=s.length,u=o.texCoords[r.tc[1]],T=0;l>T;T++){var f=s[T],m=r.ll,h=!1,p=f[0],y=f[1],x=f[2],g=r.b,v=g.w/Ne,b=g.h/Ne,w=(g.w/u.w,g.h/u.h,u.x),S=(u.x+u.w,Ne-u.y);Ne-(u.y+u.h),w+g.w,S-g.h;d(-f[0].y,i,f[0].x,-f[1].y,i,f[1].x,-f[2].y,i,f[2].x,(p.x+r.cx-g.x)/g.w*v,(p.y+r.cy-g.y)/g.h*b,(y.x+r.cx-g.x)/g.w*v,(y.y+r.cy-g.y)/g.h*b,(x.x+r.cx-g.x)/g.w*v,(x.y+r.cy-g.y)/g.h*b,o.assignedGLTexUnit,m,h,u.x/Ne,(Ne-u.y)/Ne,u.w/Ne,u.h/Ne)}}}}function T(e,t,a){var n=0,r=t.length,i=he[e];for(n=0;r>n;n++){var s=t[n],l=s.p,u=l.x-a.x,c=l.y-a.y;s.sqDistFromCam=u*u+c*c}for(t.sort(function(e,t){return t.sqDistFromCam-e.sqDistFromCam}),n=0;r>n;n++){var s=t[n];if(s.sprite.alive!==!1&&(e!==de.effect||s.hasUpdated)&&(null===s.parentSector||-1!==Se.indexOf(s.parentSector.g))){var f=s.sprite,m=f.glScale,h=f.getCurrentFrame();if(null===h)continue;e===de.effect&&s.hasAttachedParent&&(m*=s.attachedParent.getEffectSpriteScaler(s.impactActionClientTypes));var p=h.frameCoords,y=p.x,x=p.y,g=p.w,v=p.h,b=h.sheetTex,w=b.texSizeX,S=b.texSizeY,T=E(f.assetName),M=g*m,D=v*m,Y=M/2,X=D/2,l=s.p,_=l.x,k=l.y,I=l.z-X-h.offset;switch(s.anchor){case"floor":I=l.z-h.offset;break;case"ceiling":I=l.z+X-h.offset}var R=y/w,C=(S-x)/S,P=g/w,A=v/S,F=Y,O=0,q=I+D,B=-Y,N=0,z=I+D,L=Y,j=0,V=I,H=-Y,W=0,U=I,G=F*at-O*nt,K=O*at+F*nt,$=q,Z=B*at-N*nt,Q=N*at+B*nt,J=z,ee=L*at-j*nt,te=j*at+L*nt,ae=V,ne=H*at-W*nt,re=W*at+H*nt,oe=U;if(0!==i){var ie=o.normalise3D({x:a.x-_,y:a.y-k,z:a.z-I});ie.x*=i,ie.y*=i,ie.z*=i,G+=ie.x,K+=ie.y,$+=ie.z,Z+=ie.x,Q+=ie.y,J+=ie.z,ee+=ie.x,te+=ie.y,ae+=ie.z,ne+=ie.x,re+=ie.y,oe+=ie.z}var se=-(K+k),le=$,ue=G+_,ce=-(Q+k),fe=J,me=Z+_,pe=-(te+k),ye=ae,xe=ee+_,ge=-(re+k),ve=oe,be=ne+_;d(se,le,ue,ce,fe,me,pe,ye,xe,R+P,C+A,R,C+A,R+P,C,T.assignedGLTexUnit,s.ll,h.isFullBright,R,C,P,A),
d(ce,fe,me,ge,ve,be,pe,ye,xe,R,C+A,R,C,R+P,C,T.assignedGLTexUnit,s.ll,h.isFullBright,R,C,P,A)}}}function M(e){var t=e.currentWeapon,a=t.sprite,n=a.getCurrentFrame();if(null!==n){var r=n.sheetTex,o=t.darkSheet,i=t.lightSheet,s=n.frameCoords,l=t.hudCoords,u={x:s.w*a.glScale,y:s.h*a.glScale},c=t.getWeaponViewOffsetX(),f=t.getWeaponViewOffsetY();if(r.loaded&&o.loaded&&i.loaded){se.drawImage(r.img,s.x,s.y,s.w,s.h,Math.round(Re.x-u.x/2+l.x+c),Math.round(Ie.y-u.y+l.y+f),u.x,u.y);var m=e.ll;m>1?(se.globalAlpha=(m-1)*$e,se.drawImage(i.img,s.x,s.y,s.w,s.h,Math.round(Re.x-u.x/2+l.x+c),Math.round(Ie.y-u.y+l.y+f),u.x,u.y)):(0>m&&(m=0),se.globalAlpha=1-m,se.drawImage(o.img,s.x,s.y,s.w,s.h,Math.round(Re.x-u.x/2+l.x+c),Math.round(Ie.y-u.y+l.y+f),u.x,u.y)),se.globalAlpha=1}}}function D(e){var t=!1;if(e.alive){if(e.hudEffects.hit){var a=e.hitCooldown/e.hitCooldownTime;se.fillStyle="rgba(255,0,0,"+.25*a+")",t=!0}if(e.hudEffects.collect){var a=e.hudEffectTimer/e.hudEffectTimerTime;se.fillStyle="rgba(255,255,255,"+.25*a+")",t=!0}}else se.fillStyle="rgba(255,0,0,0.25)",t=!0;t===!0&&se.fillRect(0,0,Ie.x,Ie.y)}function Y(e){var t=e.moodHeadFrame;if(null!==t){var a=t.frame,n=t.screenOffset,r=t.img,o={x:a.w*t.glScale,y:a.h*t.glScale};null!==r&&se.drawImage(r,a.x,a.y,a.w,a.h,Math.round(Re.x-o.x/2+n.x),Math.round(Ie.y-o.y+n.y),o.x,o.y)}}function X(e,t){st=0,lt=0;var a=t.p,n=t.fwd;Se=[],pe.items=[],pe.renderBatches={},ae.viewport(0,0,ae.viewportWidth,ae.viewportHeight),ae.clear(ae.COLOR_BUFFER_BIT|ae.DEPTH_BUFFER_BIT),ie.clearRect(0,0,Ie.x,Ie.y),se.clearRect(0,0,Ie.x,Ie.y),f(n),z(),s(),c(a,n,t.camRoll),I(),m(),w(e.bsp,a),S(e.s,a),T(de.thing,e.t,a),T(de.projectile,e.p,a),T(de.effect,e.e,a),M(t),h(),p(),D(t),Y(t)}function _(e,t){le?(ut=t.occupiedSector,ve=e.s,X(e,t)):ue?(le=a.allLoaded(),le&&(V(e,t),le=!0)):(k(e),ue=!0)}function k(e){a.init(),Ve=e.dimLightDensity,je=e.dimLightBias,He=e.fogDensity,We=e.fogColourR,Ue=e.fogColourG,Ge=e.fogColourB}function I(){ae.uniformMatrix4fv(te.projectionMatrixUniform,!1,xe),ae.uniformMatrix4fv(te.cameraMatrixUniform,!1,ye)}function R(){var e=a.getShader("shader-vertex"),t=a.getShader("shader-fragment"),n=ae.createShader(ae.VERTEX_SHADER),r=ae.createShader(ae.FRAGMENT_SHADER);return ae.shaderSource(n,e),ae.compileShader(n),ae.shaderSource(r,t),ae.compileShader(r),ae.getShaderParameter(n,ae.COMPILE_STATUS)?ae.getShaderParameter(r,ae.COMPILE_STATUS)?{vertex:n,fragment:r}:(console.log("ERROR: MOD_WorldRendererGL : m_GetShaders : fragment shader compile error: "),console.log(ae.getShaderInfoLog(r)),null):(console.log("ERROR: MOD_WorldRendererGL : m_GetShaders : vertex shader compile error: "),console.log(ae.getShaderInfoLog(n)),null)}function C(){fe.set(Ke,We,Ue,Ge,1);var e=R();te=ae.createProgram(),ae.attachShader(te,e.vertex),ae.attachShader(te,e.fragment),ae.linkProgram(te),ae.getProgramParameter(te,ae.LINK_STATUS)||(console.log("ERROR: MOD_WorldRendererGL : m_InitShaders : failed to initialise shaders; bad shader link status."),console.error(ae.getProgramInfoLog(te))),ae.useProgram(te),te.vertexPositionAttribute=ae.getAttribLocation(te,"aVertexPosition"),ae.enableVertexAttribArray(te.vertexPositionAttribute),te.vertexTexCoordAttribute=ae.getAttribLocation(te,"aVertexTexCoord"),ae.enableVertexAttribArray(te.vertexTexCoordAttribute),te.vertexTexFrameCoordAttribute=ae.getAttribLocation(te,"aVertexFrameCoord"),ae.enableVertexAttribArray(te.vertexTexFrameCoordAttribute),te.vertexLightLevelAttribute=ae.getAttribLocation(te,"aVertexLightLevel"),ae.enableVertexAttribArray(te.vertexLightLevelAttribute),te.vertexFullBrightAttribute=ae.getAttribLocation(te,"aVertexFullBright"),ae.enableVertexAttribArray(te.vertexFullBrightAttribute),te.projectionMatrixUniform=ae.getUniformLocation(te,"uProjectionMatrix"),te.cameraMatrixUniform=ae.getUniformLocation(te,"uCameraMatrix"),te.samplerUniform=ae.getUniformLocation(te,"uSampler"),te.minDarkScalingMultUniform=ae.getUniformLocation(te,"uMinDarkScalingMult"),te.fogDensityUniform=ae.getUniformLocation(te,"uFogDensity"),te.dimLightFogDensityUniform=ae.getUniformLocation(te,"uDimLightFogDensity"),te.fogColourUniform=ae.getUniformLocation(te,"uFogColour"),te.framePaddingUniform=ae.getUniformLocation(te,"uFramePadding"),ae.uniform1f(te.minDarkScalingMultUniform,je),ae.uniform1f(te.fogDensityUniform,He),ae.uniform1f(te.dimLightFogDensityUniform,Ve),ae.uniform4fv(te.fogColourUniform,Ke)}function P(){H=ae.createBuffer(),W=ae.createBuffer(),K=ae.createBuffer(),U=ae.createBuffer(),G=ae.createBuffer(),H.bufferRole=me.position,W.bufferRole=me.texcoord,K.bufferRole=me.framecoord,U.bufferRole=me.lightlevel,G.bufferRole=me.fullbright}function A(e,t){-1===t.indexOf(e)&&t.push(e)}function F(e,t){""!==e&&"0"!==e&&A(e,t)}function O(e){var t=!1;switch(e.type){case"geom":t=Fe<Be.geometry.length;break;case"thing":t=Oe<Be.things.length;break;case"projectile":t=Ee<Be.projectiles.length;break;case"effect":t=qe<Be.effects.length;break;default:console.log("ERROR: attempted to prepare asset of type "+e.type+" for webGL use")}if(t){var a=ae.createTexture(),n=null;switch(a.image=e.img,e.type){case"geom":n=Be.geometry[Fe++];break;case"thing":n=Be.things[Oe++];break;case"projectile":n=Be.projectiles[Ee++];break;case"effect":n=Be.effects[qe++];break;default:console.log("ERROR: attempted to prepare asset of type "+e.type+" for webGL use")}return ae.activeTexture(n.id),ae.bindTexture(ae.TEXTURE_2D,a),ae.pixelStorei(ae.UNPACK_FLIP_Y_WEBGL,!0),ae.texImage2D(ae.TEXTURE_2D,0,ae.RGBA,ae.RGBA,ae.UNSIGNED_BYTE,a.image),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.NEAREST),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.NEAREST),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.REPEAT),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.REPEAT),a.assignedGLTexUnit=n,a.texCoords=e.texCoords,a.assetSizeX=e.texSizeX,a.assetSizeY=e.texSizeY,a}return console.log("ERROR: Max texture units exceeded. You can only use a max of "+Ae+" unique texture assets in a map: \n\n "+Be.geometry.length+" geometry texture atlases (NOT individual textures)\n"+Be.things.length+" thing sheets\n"+Be.projectiles.length+" projectile sheets\n "+Be.effects.length+" effect sheets"),null}function E(e){var t=e;return ge.hasOwnProperty(t)?ge[t]:null}function q(e,t){Be.geometry.push({idx:0,id:ae.TEXTURE0}),Be.geometry.push({idx:1,id:ae.TEXTURE1}),Be.geometry.push({idx:2,id:ae.TEXTURE2}),Be.geometry.push({idx:3,id:ae.TEXTURE3}),Be.things.push({idx:4,id:ae.TEXTURE4}),Be.things.push({idx:5,id:ae.TEXTURE5}),Be.things.push({idx:6,id:ae.TEXTURE6}),Be.things.push({idx:7,id:ae.TEXTURE7}),Be.things.push({idx:8,id:ae.TEXTURE8}),Be.things.push({idx:9,id:ae.TEXTURE9}),Be.things.push({idx:10,id:ae.TEXTURE10}),Be.things.push({idx:11,id:ae.TEXTURE11}),Be.things.push({idx:12,id:ae.TEXTURE12}),Be.things.push({idx:13,id:ae.TEXTURE13}),Be.projectiles.push({idx:14,id:ae.TEXTURE14}),Be.effects.push({idx:15,id:ae.TEXTURE15}),ge={};var a=[],n=e.s,o=n.length,i=e.t,s=i.length,l=e.p,u=(l.length,e.e);u.length;if(Le=r.get(e.skyTexture),!Le)return void console.log("ERROR: MOD_WorldRendererGL.initScene: Sky texture missing or invalid.");for(var c=0;o>c;c++){for(var f=n[c],m=f.l,d=m.length,h=0;d>h;h++){var p=m[h],y=p.tu[0],x=p.tm[0],g=p.tl[0];""!==y&&-1===y.indexOf("-1")&&F("atlas"+y,a),""!==x&&-1===x.indexOf("-1")&&F("atlas"+x,a),""!==g&&-1===g.indexOf("-1")&&F("atlas"+g,a)}var v=f.tf[0],b=f.tc[0];""!==v&&-1===v.indexOf("-1")&&F("atlas"+v,a),""!==b&&-1===b.indexOf("-1")&&F("atlas"+b,a)}for(var w=0;s>w;w++){var S=i[w].sprite;F(S.assetName,a)}for(var T in be)if(be.hasOwnProperty(T)){var M=be[T].projectileInfo;null!==M&&"undefined"!=typeof M&&F(M.spriteInfo.assetName,a)}for(T in we)if(we.hasOwnProperty(T)){var D=we[T].effectInfo;null!==D&&"undefined"!=typeof D&&F(D.spriteInfo.assetName,a)}for(var Y=a.length,X=0;Y>X;X++){var _=a[X],k=r.get(_),I=O(k);ge[_]=I}}function B(){console.log("Verifying hardware against minimum requirements...");var e=!1;for(var t in Pe)if(Pe.hasOwnProperty(t)){var a=Pe[t],n=ae.getParameter(ae[a.glParam]);if(a.isArray)for(var r=0;r<n.length;r++)console.log("STAT CHECK: min required "+t+" = "+a.min[r]+", found "+n[r]),n[r]<a.min[r]&&(console.log("Hardware verification failed: minimum required value for "+t+" is "+a.min[r]+", check found "+n[r]),e=!0);else console.log("STAT CHECK: min required "+t+" = "+a.min+", found "+n),n<a.min&&(console.log("Hardware verification failed: minimum required value for "+t+" is "+a.min+", check found "+n),e=!0)}return e?!1:(console.log("Hardware verified successfully - minimum requirements met."),!0)}function N(){for(var e=0;e<Ie.x;e++)ct.push(0)}function z(){for(var e=ct.length,t=0;e>t;t++)ct[t]=0;ft=Ie.x}function L(){Me=Te*(Ie.x/Ie.y),De=o.degreesToRadians(Me),Ye=De*(Ie.y/Ie.x)}function j(){Ce.minRay=o.scaleVector(o.normalise(o.rotateByRadians(ot,-(De/2))),_e),Ce.maxRay=o.scaleVector(o.normalise(o.rotateByRadians(ot,De/2)),_e)}function V(e,t){ae=ne.getContext("webgl"),ie=re.getContext("2d"),se=oe.getContext("2d"),ie.imageSmoothingEnabled=!1,se.imageSmoothingEnabled=!1,ae.viewportWidth=ne.width,ae.viewportHeight=ne.height,B()&&(q(e,t),P(),C(),L(),j(),N(),ae.clearColor(0,0,0,0),ae.enable(ae.DEPTH_TEST),ae.enable(ae.BLEND),ae.depthFunc(ae.LEQUAL),ae.blendFunc(ae.SRC_ALPHA,ae.ONE_MINUS_SRC_ALPHA))}var H,W,U,G,K,$,Z,Q,J,ee,te,ae=null,ne=e.get("webglCVS")[0],re=e.get("webglBackgroundCanvas")[0],oe=e.get("webglForegroundCanvas")[0],ie=null,se=null,le=!1,ue=!1,ce=t.mat4,fe=t.vec4,me={position:"position",texcoord:"texcoord",lightlevel:"lightlevel",cameramatrix:"cameramatrix",fullbright:"fullbright",texframecoord:"texframecoord"},de={thing:"thing",projectile:"projectile",effect:"effect"},he={thing:0,projectile:0,effect:6},pe={items:[],renderBatches:{}},ye=ce.create(),xe=ce.create(),ge={},ve=[],be=l.get(),we=u.get(),Se=[],Te=e.get("verticalFOVDegrees"),Me=0,De=0,Ye=0,Xe=e.get("nearClip"),_e=e.get("farClip"),ke=e.get("distToProjSurf"),Ie=e.get("glCanvasSize"),Re={x:Math.round(Ie.x/2),y:Math.round(Ie.y/2)},Ce={minRay:null,maxRay:null},Pe={viewportDimensions:{glParam:"MAX_VIEWPORT_DIMS",isArray:!0,min:[Ie.x,Ie.x]},vertexAttribs:{glParam:"MAX_VERTEX_ATTRIBS",isArray:!1,min:16},vertexUniforms:{glParam:"MAX_VERTEX_UNIFORM_VECTORS",isArray:!1,min:250},fragmentUniforms:{glParam:"MAX_FRAGMENT_UNIFORM_VECTORS",isArray:!1,min:220},varyingVectors:{glParam:"MAX_VARYING_VECTORS",isArray:!1,min:9},textureUnits:{glParam:"MAX_TEXTURE_IMAGE_UNITS",isArray:!1,min:16},vertexTextureUnits:{glParam:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",isArray:!1,min:4},textureSize:{glParam:"MAX_TEXTURE_SIZE",isArray:!1,min:2048}},Ae=Pe.textureUnits.min,Fe=0,Oe=0,Ee=0,qe=0,Be={geometry:[],things:[],projectiles:[],effects:[]},Ne=e.get("geomTexAtlasSize"),ze=.5/Ne,Le=null,je=e.get("minDarkScalingMult"),Ve=e.get("dimLightFogDensity"),He=e.get("fogDensity"),We=e.get("fogColourR"),Ue=e.get("fogColourG"),Ge=e.get("fogColourB"),Ke=fe.create(),$e=e.get("weaponViewLightenMult"),Ze=1.570796325,Qe=6.28319,Je=e.get("mapCanvasSize"),et=({x:Math.round(Je.x/2),y:Math.round(Je.y/2)},0),tt=0,at=0,nt=0,rt=0,ot={x:0,y:-1},it=Math.atan2(ot.y,ot.x),st=0,lt=0,ut=null,ct=[],ft=Ie.x;return{drawScene:_}}();return c}),define("glrenderer",["enginevars","glmatrix","glshaders","maths","time","assets","input"],function(e,t,a,n,r,o,i){var s=function(){function n(){var e=a.getShader("shader-vertex"),t=a.getShader("shader-fragment"),n=g.createShader(g.VERTEX_SHADER),r=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(n,e),g.compileShader(n),g.shaderSource(r,t),g.compileShader(r),g.getShaderParameter(n,g.COMPILE_STATUS)?g.getShaderParameter(r,g.COMPILE_STATUS)?{vertex:n,fragment:r}:(console.log("fragment shader compile error: "),console.log(g.getShaderInfoLog(r)),null):(console.log("vertex shader compile error: "),console.log(g.getShaderInfoLog(n)),null)}function r(){var e=Y.create();Y.set(e,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15]),k.push(e)}function s(){if(0===k.length)throw"ERROR: MOD_GLRenderer.mvPopMatrix : no matrices on stack.";X=k.pop()}function l(){g.viewport(0,0,g.viewportWidth,g.viewportHeight),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),Y.perspective(_,45,g.viewportWidth/g.viewportHeight,O,E),Y.identity(X),Y.translate(X,X,[-1.5,0,-C]),r(),Y.rotate(X,X,I,[0,1,0]),g.bindBuffer(g.ARRAY_BUFFER,v),g.vertexAttribPointer(T.vertexPositionAttribute,v.itemSize,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,w),g.vertexAttribPointer(T.vertexTexCoordAttribute,w.itemSize,g.FLOAT,!1,0,0),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,A),g.uniform1i(T.samplerUniform,0),u(),g.drawArrays(g.TRIANGLES,0,v.numItems),s(),Y.translate(X,X,[3,0,0]),r(),Y.rotate(X,X,R,[0,1,0]),g.bindBuffer(g.ARRAY_BUFFER,b),g.vertexAttribPointer(T.vertexPositionAttribute,b.itemSize,g.FLOAT,!1,0,0),g.bindBuffer(g.ARRAY_BUFFER,S),g.vertexAttribPointer(T.vertexTexCoordAttribute,S.itemSize,g.FLOAT,!1,0,0),u(),g.drawArrays(g.TRIANGLE_STRIP,0,b.numItems),s()}function u(){g.uniformMatrix4fv(T.pMatrixUniform,!1,_),g.uniformMatrix4fv(T.mvMatrixUniform,!1,X),g.uniform1f(T.dimLightAmtUniform,F)}function c(){var e=n();T=g.createProgram(),g.attachShader(T,e.vertex),g.attachShader(T,e.fragment),g.linkProgram(T),g.getProgramParameter(T,g.LINK_STATUS)||console.log("ERROR: MOD_GLRenderer.initShaders : failed to initialise shaders"),g.useProgram(T),T.vertexPositionAttribute=g.getAttribLocation(T,"aVertexPosition"),g.enableVertexAttribArray(T.vertexPositionAttribute),T.vertexTexCoordAttribute=g.getAttribLocation(T,"aVertexTexCoord"),g.enableVertexAttribArray(T.vertexTexCoordAttribute),T.pMatrixUniform=g.getUniformLocation(T,"uPMatrix"),T.mvMatrixUniform=g.getUniformLocation(T,"uMVMatrix"),T.dimLightAmtUniform=g.getUniformLocation(T,"uDimLightAmt")}function f(){v=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,v);var e=[0,1,0,-1,-1,0,1,-1,0];g.bufferData(g.ARRAY_BUFFER,new Float32Array(e),g.STATIC_DRAW),v.itemSize=3,v.numItems=3,w=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,w);var t=[.5,1,0,0,1,0];g.bufferData(g.ARRAY_BUFFER,new Float32Array(t),g.STATIC_DRAW),w.itemSize=2,w.numItems=3,b=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,b),e=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],g.bufferData(g.ARRAY_BUFFER,new Float32Array(e),g.STATIC_DRAW),b.itemSize=3,b.numItems=4,S=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,S),t=[1,1,0,1,1,0,0,0],g.bufferData(g.ARRAY_BUFFER,new Float32Array(t),g.STATIC_DRAW),S.itemSize=2,S.numItems=4}function m(e){var t=g.createTexture();return t.image=e.img,g.bindTexture(g.TEXTURE_2D,t),g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!0),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,t.image),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.bindTexture(g.TEXTURE_2D,null),t}function d(){A=m(o.get("greenmetalswitchoff"))}function h(){x=$("#gl-cvs")[0],g=x.getContext("webgl"),g.viewportWidth=x.width,g.viewportHeight=x.height,c(),f(),d(),g.clearColor(.25,.25,.25,1),g.enable(g.DEPTH_TEST)}function p(){q=i.getKeyStates(),B=i.getMouseStates(),N=i.getPadStates(),(q.up||N.leftStick.fwd)&&(C+=P),(q.dn||N.leftStick.back)&&(C-=P)}function y(){D?(p(),l()):M?(D=a.allLoaded(),D&&h()):(a.init(),M=!0)}var x,g,v,b,w,S,T,M=(e.get("canvasSize"),!1),D=!1,Y=(t.glMatrix,t.mat2,t.mat2d,t.mat3,t.mat4),X=(t.mat4quat,t.vec2,t.vec3,t.vec4,Y.create()),_=Y.create(),k=[],I=0,R=0,C=7,P=1,A=null,F=.1,O=.001,E=1e3,q=i.getKeyStates(),B=i.getMouseStates(),N=i.getPadStates();return{init:h,update:y,drawScene:l,hasLoadedShaders:function(){return m_HasLoadedShaders}}}();return s}),define("hud",["jquery","enginevars","renderer","time","maths"],function(e,t,a,n,r){var o=function(){function a(e){if(null===Y||e.health!==Y.health){var t=Math.round(e.maxHealth/v),a=Math.round(e.health/v),n=T.health.find(S.bar);if(n.length!==t){for(var r="",o=0;t>o;o++)r+=M.bar;T.health.html(r)}for(var i=T.health.find(S.bar),s=i.length,o=0;s>o;o++)o>=a&&i.eq(o).addClass(D.barEmpty)}}function o(e){if(null===Y||e.armour!==Y.armour){var t=Math.round(e.maxArmour/v),a=Math.round(e.armour/v),n=T.armour.find(S.bar);if(n.length!==t){for(var r="",o=0;t>o;o++)r+=M.bar;T.armour.html(r)}for(var i=T.armour.find(S.bar),s=i.length,o=0;s>o;o++)o>=a&&i.eq(o).addClass(D.barEmpty)}}function i(e){if(null===X.currentItemType||e.currentWeapon.type!==X.currentItemType||e.currentWeapon.ammo.mag.current!==X.magAmmoCurrent){var t=e.currentWeapon.ammo.mag.current,a=e.currentWeapon.type,n=e.currentWeapon.ammo.mag.capacity;if(null===X.currentItemType||a!==X.currentItemType){for(var r="",o=0;n>o;o++)r+=M.rounds[a];T.magAmmo.html(r)}for(var i=T.magAmmo.find(S.round),s=i.length,l=0;s>l;l++)l>=t?i.eq(l).addClass(D.roundEmpty):i.eq(l).removeClass(D.roundEmpty)}}function s(e){if(null===X.currentItemType||e.currentWeapon.type!==X.currentItemType||e.currentWeapon.ammo.total.current!==X.totalAmmoCurrent){var t=e.currentWeapon.ammo.mag.capacity,a=e.currentWeapon.ammo.total.current,n=Math.ceil(a/t),r=e.currentWeapon.type,o=e.currentWeapon.ammo.total.capacity,i=Math.ceil(o/t);if(null===X.currentItemType||r!==X.currentItemType){for(var s="",l=0;i>l;l++)s+=M.mags[r];T.totalAmmo.html(s)}for(var u=T.totalAmmo.find(S.mag),c=u.length,f=0;c>f;f++)f>=n?u.eq(f).addClass(D.magEmpty):u.eq(f).removeClass(D.magEmpty)}}function l(e){var t=e.equippedItems,a=t.length,n=X.equippedItems,r=!1;0===a&&(r=!0);for(var o=0;a>o;o++){if(!(o<n.length)){r=!0;break}if(t[o].type!==n[o].type){r=!0;break}}if(null===X.currentItemType||X.currentItemType!==e.currentWeapon.type||r){for(var i=(e.currentWeapon.type,""),o=0;a>o;o++)i+=o===e.currentItemEquipIdx?M.items.current[t[o].type]:M.items.offhand[t[o].type];T.items.html(i)}}function u(e){var t=e.currentWeapon.hitScanResult;t.result===!0&&t.objRef.destructible?T.targetIndicator.addClass(D.targetIndicatorActive):T.targetIndicator.removeClass(D.targetIndicatorActive)}function c(){for(var e=w.states.normal,t=!1,a=0,n=3;!t;){switch(r.randomIntInRange(1,4)){case 1:e=w.states.lookleft;break;case 2:e=w.states.lookright;break;case 3:e=w.states.turnleft;break;case 4:e=w.states.turnright;break;default:e=w.states.normal}t=e!=w.currentState||++a>=n}return e}function f(e){var t=w.currentState.duration;if(e.hitCooldown==e.hitCooldownTime)return w.currentState=w.states.hit,void(w.stateCooldown=r.randomIntInRange(t.min,t.max));if(e.currentWeapon.currentState==e.currentWeapon.states.firing)return w.currentState=w.states.mean,void(w.stateCooldown=r.randomIntInRange(t.min,t.max));if(w.stateCooldown<=0){var a=w.states;w.currentState==a.hit?w.currentState=a.mean:w.currentState==a.normal?w.currentState=c():w.currentState=a.normal,w.stateCooldown=r.randomIntInRange(t.min,t.max)}w.stateCooldown-=y}function m(e){y=n.getDeltaTime(),e.alive&&p&&(a(e),o(e),i(e),s(e),l(e),u(e),f(e)),Y=e,X.currentItemType=e.currentWeapon.type,X.offhandItemAType=e.equippedItems.length>=2?e.equippedItems[1].type:"",X.offhandItemBType=e.equippedItems.length>=3?e.equippedItems[2].type:"",X.magAmmoCurrent=e.currentWeapon.ammo.mag.current,X.totalAmmoCurrent=e.currentWeapon.ammo.total.current;var t=e.equippedItems,r=t.length;X.equippedItems=[];for(var c=0;r>c;c++)X.equippedItems.push(t[c])}function d(){b.img=new Image,b.img.src=b.path,b.img.onload=function(){b.loaded=!0}}function h(){w.currentState=w.states.normal,w.stateCooldown=r.randomIntInRange(w.states.normal.duration.min,w.states.normal.duration.max),d(),Y=null,T.health.html(""),T.armour.html(""),T.container.addClass(D.hudEnabled)}var p=!0,y=n.getDeltaTime(),x=t.get("canvasSize"),g={x:Math.round(x.x/2),y:Math.round(x.y/2)},v=t.get("hudUnitsPerBar"),b={path:"img/hud/sprites/hud-sheet-v3.png",img:null,texSizeX:512,texSizeY:512,loaded:!1,frames:{"head-1-mean":{x:204,y:2,w:30,h:44},"head-1-normal":{x:3,y:3,w:30,h:43},"head-1-lookleft":{x:35,y:3,w:30,h:43},"head-1-lookright":{x:67,y:3,w:30,h:43},"head-1-turnleft":{x:99,y:3,w:34,h:43},"head-1-turnright":{x:135,y:3,w:34,h:43},"head-1-hit":{x:171,y:3,w:31,h:44},"crosshair-basic":{x:236,y:13,w:15,h:15},"head-2-mean":{x:203,y:48,w:30,h:45},"head-2-normal":{x:3,y:49,w:30,h:44},"head-2-lookleft":{x:35,y:49,w:30,h:44},"head-2-lookright":{x:67,y:49,w:30,h:44},"head-2-turnleft":{x:99,y:49,w:34,h:43},"head-2-hit":{x:170,y:49,w:31,h:44},"head-2-turnright":{x:134,y:50,w:34,h:42},"head-3-mean":{x:202,y:94,w:31,h:45},"head-3-normal":{x:2,y:95,w:31,h:44},"head-3-lookleft":{x:35,y:95,w:30,h:44},"head-3-lookright":{x:67,y:95,w:30,h:44},"head-3-turnleft":{x:99,y:95,w:34,h:43},"head-3-hit":{x:170,y:95,w:30,h:44},"head-3-turnright":{x:134,y:96,w:33,h:42},"head-4-mean":{x:202,y:140,w:31,h:45},"head-4-normal":{x:2,y:142,w:31,h:43},"head-4-lookleft":{x:35,y:142,w:30,h:43},"head-4-lookright":{x:67,y:142,w:30,h:43},"head-4-turnleft":{x:99,y:142,w:34,h:43},"head-4-turnright":{x:134,y:142,w:33,h:43},"head-4-hit":{x:170,y:142,w:30,h:44},"head-5-lookleft":{x:35,y:189,w:30,h:47},"head-5-hit":{x:170,y:189,w:31,h:49},"head-5-mean":{x:202,y:189,w:31,h:46},"head-5-normal":{x:2,y:190,w:32,h:46},"head-5-lookright":{x:67,y:190,w:30,h:46},"head-5-turnleft":{x:99,y:190,w:34,h:46},"head-5-turnright":{x:134,y:190,w:33,h:46}}},w=({moodHead:{x:g.x,y:x.y-22},crossHair:{x:g.x,y:g.y}},{states:{normal:{name:"normal",duration:{min:40,max:240}},lookleft:{name:"lookleft",duration:{min:45,max:90}},lookright:{name:"lookright",duration:{min:45,max:90}},turnleft:{name:"turnleft",duration:{min:60,max:120}},turnright:{name:"turnright",duration:{min:60,max:120}},hit:{name:"hit",duration:{min:20,max:25}},mean:{name:"mean",duration:{min:35,max:45}}},currentState:null,stateCooldown:0}),S=(x.y*x.x*4,{container:"[data-hud-gui]",health:"[data-health-gui]",armour:"[data-armour-gui]",bar:"[data-readout-bar]",magAmmo:"[data-mag-ammo-gui]",round:"[data-readout-round]",totalAmmo:"[data-total-ammo-gui]",mag:"[data-readout-mag]",items:"[data-items-gui]",currentItem:"[data-item-gui-current]",offhandItem:"[data-item-gui-offhand]",targetIndicator:"[data-target-indicator]"}),T={container:e(S.container),health:e(S.health),armour:e(S.armour),magAmmo:e(S.magAmmo),totalAmmo:e(S.totalAmmo),items:e(S.items),currentItems:e(S.currentItem),offhandItems:e(S.offhandItem),targetIndicator:e(S.targetIndicator)},M={bar:'<div class="hud-gui__readout-bar" data-readout-bar></div>',rounds:{combatknife:'<div class="hud-gui__readout-round hud-gui__readout-round--combatknife" data-readout-round></div>',pistol:'<div class="hud-gui__readout-round hud-gui__readout-round--pistol" data-readout-round></div>',assaultrifle:'<div class="hud-gui__readout-round hud-gui__readout-round--assaultrifle" data-readout-round></div>',shotgun:'<div class="hud-gui__readout-round hud-gui__readout-round--shotgun" data-readout-round></div>',plasmatest:'<div class="hud-gui__readout-round hud-gui__readout-round--shotgun" data-readout-round></div>',nettest:'<div class="hud-gui__readout-round hud-gui__readout-round--shotgun" data-readout-round></div>',rockettest:'<div class="hud-gui__readout-round hud-gui__readout-round--shotgun" data-readout-round></div>'},mags:{combatknife:'<div class="hud-gui__readout-mag hud-gui__readout-mag--combatknife" data-readout-mag></div>',pistol:'<div class="hud-gui__readout-mag hud-gui__readout-mag--pistol" data-readout-mag></div>',assaultrifle:'<div class="hud-gui__readout-mag hud-gui__readout-mag--assaultrifle" data-readout-mag></div>',shotgun:'<div class="hud-gui__readout-mag hud-gui__readout-mag--shotgun" data-readout-mag></div>',plasmatest:'<div class="hud-gui__readout-mag hud-gui__readout-mag--shotgun" data-readout-mag></div>',nettest:'<div class="hud-gui__readout-mag hud-gui__readout-mag--shotgun" data-readout-mag></div>',rockettest:'<div class="hud-gui__readout-mag hud-gui__readout-mag--shotgun" data-readout-mag></div>'},items:{current:{combatknife:'<div class="hud-gui__readout-item hud-gui__readout-item--combatknife" data-item-gui-current></div>',pistol:'<div class="hud-gui__readout-item hud-gui__readout-item--pistol" data-item-gui-current></div>',assaultrifle:'<div class="hud-gui__readout-item hud-gui__readout-item--assaultrifle" data-item-gui-current></div>',shotgun:'<div class="hud-gui__readout-item hud-gui__readout-item--shotgun" data-item-gui-current></div>',plasmatest:'<div class="hud-gui__readout-item hud-gui__readout-item--shotgun" data-item-gui-current></div>',nettest:'<div class="hud-gui__readout-item hud-gui__readout-item--shotgun" data-item-gui-current></div>',rockettest:'<div class="hud-gui__readout-item hud-gui__readout-item--shotgun" data-item-gui-current></div>'},offhand:{combatknife:'<div class="hud-gui__readout-item hud-gui__readout-item--offhand hud-gui__readout-item--combatknife" data-item-gui-offhand></div>',pistol:'<div class="hud-gui__readout-item hud-gui__readout-item--offhand hud-gui__readout-item--pistol" data-item-gui-offhand></div>',assaultrifle:'<div class="hud-gui__readout-item hud-gui__readout-item--offhand hud-gui__readout-item--assaultrifle" data-item-gui-offhand></div>',shotgun:'<div class="hud-gui__readout-item hud-gui__readout-item--offhand hud-gui__readout-item--shotgun" data-item-gui-offhand></div>',plasmatest:'<div class="hud-gui__readout-item hud-gui__readout-item--offhand hud-gui__readout-item--shotgun" data-item-gui-offhand></div>',nettest:'<div class="hud-gui__readout-item hud-gui__readout-item--offhand hud-gui__readout-item--shotgun" data-item-gui-offhand></div>',rockettest:'<div class="hud-gui__readout-item hud-gui__readout-item--offhand hud-gui__readout-item--shotgun" data-item-gui-offhand></div>'}}},D={hudEnabled:"enabled",barEmpty:"hud-gui__readout-bar--empty",roundEmpty:"hud-gui__readout-round--empty",magEmpty:"hud-gui__readout-mag--empty",targetIndicatorActive:"hud-gui__target-indicator--active"},Y=null,X={magAmmoCurrent:null,totalAmmoCurrent:null,currentItemType:null,equippedItems:[]};return{init:h,update:m}}();return o}),define("ingamegui",["enginevars","jquery","globalevents","time","inventory"],function(e,t,a,n,r){var o=function(){function e(){for(var e=0;e<E.length;e++){var t=E[e];t.age+=N,t.age>t.duration&&(t.elem.remove(),E.splice(e,1),e--)}}function o(e,a){if(R.hasOwnProperty(e)){var n=R[e],r=t('<li class="ingame-gui__notification-item" data-notification>'+("undefined"!=typeof a?a:n.text)+"</li>");t(k.notification.selectors.container).append(r),E.push({type:e,text:n.text,duration:n.duration,age:0,elem:r})}else console.log('ERROR: MOD_HUD.createNotification() : notificationType "'+e+'" not recognised.')}function i(e){if(k.hasOwnProperty(e)){var a=t(k[e].selectors.container);a.hasClass(C)?a.removeClass(C):a.addClass(C)}}function s(e){if(k.hasOwnProperty(e)){var a=t(k[e].selectors.container);a.removeClass(C)}}function l(e){var a=k.inventory;t(a.selectors.selectedItemName).text(e.itemName),t(a.selectors.selectedItemDescription).text(e.descriptionText),t(a.selectors.selectedItemImage).css({"background-image":"url(./img"+e.imgPath+")"});for(var n=e.stats,r=n.length,o="",i=0;r>i;i++)o+=n[i];t(a.selectors.selectedItemStatTable).html(o)}function u(e){var t=k.inventory;c();var a=e.is(t.selectors.equipSlot);if(!a||!e.is("["+F+'="false"]')){var n=parseInt(a?e.find(t.selectors.equipSlotItem).attr(A):e.attr(A),10);r.getItems()[n].inventoryInfo.selected=!0}}function c(){for(var e=(k.inventory,r.getItems()),t=e.length,a=0;t>a;a++)e[a].inventoryInfo.selected=!1}function f(){var e=t(k.inventory.selectors.equipSlot).filter("["+F+'="false"]');if(e.length>0){var a=r.getSelectedItemIdx(),n=r.getItemAtIndex(a);n.inventoryInfo.equipped===!1?r.equipSelectedItem(parseInt(e.eq(0).attr(O),10)):o(I.alreadyequipped)}else o(I.nofreeequipslots);m()}function m(){var e=r.getItems(),a=e.length,n=k.inventory,o=t(n.selectors.itemList),i=t(n.selectors.equipSlot),s="";i.html(""),i.attr(F,!1);for(var c=0;a>c;c++){var f=e[c];s+='<li class="ingame-gui__inventory-item" draggable="true" '+n.selectorAttrs.listItem+" "+A+'="'+c+'"><img class="ingame-gui__inventory-item-icon" src="./img'+f.inventoryInfo.imgPath+'" alt="img" /><span class="ingame-gui__inventory-item-name" data-item-name>'+f.inventoryInfo.itemName+'</span><span class="ingame-gui__inventory-item-weight" data-item-weight data-item-weight-value="'+f.inventoryInfo.weight+'">'+f.inventoryInfo.weight+"kg</span>"+(f.inventoryInfo.equipped?'<span class="ingame-gui__inventory-item-equipped">Equipped</span>':"")+"</li>",f.inventoryInfo.equipped===!0&&f.inventoryInfo.equipSlotIdx>=0&&f.inventoryInfo.equipSlotIdx<3&&(i.eq(f.inventoryInfo.equipSlotIdx).html('<div class="ingame-gui__equip-slot-item" draggable="true" '+n.selectorAttrs.equipSlotItem+" "+A+'="'+c+'" style="background-image:url(./img'+f.inventoryInfo.imgPath+');"></div>'),i.eq(f.inventoryInfo.equipSlotIdx).attr(F,!0))}o.html(s),t(n.selectors.listItem).removeClass(P),t(n.selectors.equipSlotItem).removeClass(P);for(var e=r.getItems(),a=e.length,c=0;a>c;c++){var f=e[c];f.inventoryInfo.selected===!0&&(t(n.selectors.listItem).filter("["+A+'="'+c+'"]').addClass(P),t(n.selectors.equipSlotItem).filter("["+A+'="'+c+'"]').addClass(P),l(f.inventoryInfo))}o.find(n.selectors.listItem).each(function(e,a){t(a).on("click",function(e){e.preventDefault(),u(t(this)),m()})}),i.find(n.selectors.equipSlotItem).each(function(){var e=t(this);e.on("dragstart",function(e){S(e)}),e.on("dragend",function(e){T(e)})}),t(n.selectors.listItem).each(function(e,a){t(a).on("dragstart",function(e){S(e)}),t(a).on("dragend",function(e){T(e)})}),t(n.selectors.currentLoadReadout).text(r.getCurrentLoad())}function d(e){o(I.gamesaved)}function h(e){m(),o(I.gameloaded)}function p(e){m(),e.showNotification&&o(I.inventoryitemadded,e.notificationText)}function y(){s("logs"),s("keypad"),i("inventory")}function x(){s("inventory"),i("logs")}function g(){s("inventory"),i("keypad")}function v(e){e.preventDefault(),f()}function b(e){e.preventDefault(),r.unequipSelectedItem(t(k.inventory.selectors.equipSlot)),m()}function w(e){e.preventDefault(),r.dropSelectedItem(),m()}function S(e){console.log("m_OnItemDragStart");var a=t(e.target);q=a,a.addClass(C),u(a);var n=e.originalEvent;n.dataTransfer.setData("text/html",this.innerHTML)}function T(e){console.log("m_OnItemDragEnd");var a=t(e.target);a.removeClass(C)}function M(e){console.log("m_OnItemDrop"),e.stopPropagation(),e.preventDefault();var a=t(e.currentTarget);if(null!==q&&q!==a){var n=k.inventory;if(q.is(n.selectors.equipSlotItem)){if(a.is(n.selectors.itemList))r.unequipSelectedItem();else if(a.is(n.selectors.equipSlot)){var o=parseInt(q.closest(n.selectors.equipSlot).attr(O)),i=parseInt(a.attr(O));r.swapEquipSlotItems(o,i)}}else q.is(n.selectors.listItem)&&a.is(n.selectors.equipSlot)&&r.equipSelectedItem(parseInt(a.attr(O)));m()}return q=null,!1}function D(){var e=k.inventory;t(e.selectors.dropButton).on("click",function(e){w(e)}),t(e.selectors.equipButton).on("click",function(e){v(e)}),t(e.selectors.unequipButton).on("click",function(e){b(e)}),t(e.selectors.equipSlot).each(function(a,n){var r=t(n);r.on("click",function(e){e.preventDefault(),c(),u(t(n)),m()}),r.find(e.selectors.equipSlotItem).each(function(e,a){var n=t(a);n.on("dragstart",function(e){S(e)}),n.on("dragend",function(e){T(e)})})}),t(e.selectors.listItem).each(function(e,a){t(a).on("dragstart",function(e){S(e)}),t(a).on("dragend",function(e){T(e)})}),t(e.selectors.equipSlot).each(function(e,a){t(a).on("dragenter",function(e){e.preventDefault()}),t(a).on("dragover",function(e){e.preventDefault()}),t(a).on("drop",function(e){M(e)})}),t(e.selectors.itemList).on("dragenter",function(e){console.log("item list dragenter"),e.preventDefault()}),t(e.selectors.itemList).on("dragover",function(e){console.log("item list dragover"),e.preventDefault()}),t(e.selectors.itemList).on("drop",function(e){console.log("item list drop"),M(e)})}function Y(){for(var e in k){var t=k[e];for(var a in t.selectorAttrs)t.selectors[a]="["+t.selectorAttrs[a]+"]"}}function X(){Y(),D(),a.subscribe(B.gamesaved,d),a.subscribe(B.gameloaded,h),a.subscribe(B.inventoryitemadded,p),a.subscribe(B.inventorytoggle,y),a.subscribe(B.logstoggle,x),a.subscribe(B.keypadtoggle,g)}function _(){N=n.getDeltaTime(),e()}var k={container:{selectorAttrs:{container:"data-ingame-gui"
},selectors:{}},notification:{selectorAttrs:{container:"data-notification-gui"},selectors:{}},inventory:{selectorAttrs:{container:"data-inventory-gui",listItem:"data-inventory-item",equipSlotItem:"data-equip-slot-item",equipSlot:"data-equip-slot",itemList:"data-inventory-items-list",selectedItemName:"data-selected-item-name",selectedItemImage:"data-selected-item-image",selectedItemStatTable:"data-selected-item-stat-table",selectedItemDescription:"data-selected-item-description",dropButton:"data-drop-item-button",equipButton:"data-equip-item-button",unequipButton:"data-unequip-item-button",closeButton:"data-close-button",currentLoadReadout:"data-current-load"},selectors:{}},logs:{selectorAttrs:{container:"data-logs-gui",listItem:"data-log-list-item",logList:"data-log-list",sortButtons:"data-sort-button",closeButton:"data-close-button",content:"data-log-content"},selectors:{}},keypad:{selectorAttrs:{container:"data-doorlock-gui",closeButton:"data-close-button",keys:"data-keypad-button"},selectors:{}},dragCursor:{selectorAttrs:{dragCursor:"data-drag-cursor"},selectors:{}}},I={gamesaved:"gamesaved",gameloaded:"gameloaded",inventoryitemadded:"inventoryitemadded",nofreeequipslots:"nofreeequipslots",alreadyequipped:"alreadyequipped",noequippeditems:"noequippeditems"},R={gamesaved:{duration:300,text:"GAME SAVED"},gameloaded:{duration:300,text:"GAME LOADED"},inventoryitemadded:{duration:300,text:"ITEM ADDED TO INVENTORY"},nofreeequipslots:{duration:300,text:"NO FREE EQUIP SLOTS"},alreadyequipped:{duration:300,text:"ALREADY EQUIPPED"},noequippeditems:{duration:300,text:"NO EQUIPPED ITEM SELECTED"}},C="show",P="is--selected",A="data-inventory-idx",F="data-equip-slot-occupied",O="data-equip-slot-num",E=[],q=null,B=a.getEventKeys(),N=n.getDeltaTime();return{init:X,update:_}}();return o}),define("loadingscreen",["enginevars","assets","renderer"],function(e,t,a){var n=function(){function n(e,t){a.drawRect(0,0,o.x,o.y,"#000"),a.drawText("Loading "+t+"...",i.x-l.x,i.y-16,"#fff",12),a.drawRect(i.x-l.x,i.y-l.y,s.x,s.y,"#666"),a.drawRect(i.x-l.x,i.y-l.y,Math.round(s.x*e),s.y,"#0f0")}function r(){n(t.getFracLoaded(),t.getLoadingAssetName())}var o=e.get("canvasSize"),i={x:Math.round(o.x/2),y:Math.round(o.y/2)},s={x:128,y:16},l={x:Math.round(s.x/2),y:Math.round(s.y/2)};return{update:r}}();return n}),define("menu",["jquery","enginevars","input","time","gameworld","globalevents","audio"],function(e,t,a,n,r,o,i){var s=function(){function s(e){e?I.addClass(Y):I.removeClass(Y),O=e}function l(){for(var e=Object.keys(V),t=e.length,a=0;t>a;a++)V[e[a]].elems.container.removeClass(Y);W=[]}function u(e){if("undefined"!=typeof e&&V.hasOwnProperty(e)){var t=V[e];t.elems.container.addClass(Y),t.onShow(t.elems),W.push(t),i.playSound("menuopen",1,void 0,void 0,void 0,!1,!1)}else console.log('ERROR: MOD_Menu.setScreenActive : unrecognised screen key "'+e+'".')}function c(e){if("undefined"!=typeof e&&V.hasOwnProperty(e)){var t=V[e];t.elems.container.removeClass(Y),i.playSound("menuclose",1,void 0,void 0,void 0,!1,!1);var a=W.indexOf(t);-1!=a&&W.splice(a,1)}else console.log('ERROR: MOD_Menu.setScreenInactive : unrecognised screen key "'+e+'".')}function f(){var e=V.load.elems.savefiles.filter(_);return e.length>0?e.attr("data-saved-game-key"):void 0}function m(e){if(D.hasOwnProperty(e))for(var t=D[e],a=t.subscribers,n=a.length,r=0;n>r;r++)a[r]();else console.log('ERROR: MOD_Menu.fireEvent : eventName "'+e+'" not recognised')}function d(e,t){D.hasOwnProperty(e)?D[e].subscribers.push(t):console.log('ERROR: MOD_Menu.subscribeToEvent : eventName "'+e+'" not recognised')}function h(e,t){if(D.hasOwnProperty(e))for(var a=D[e].subscribers,n=a.length,r=0;n>r;r++)a[r]===t&&a.splice(r,1);else console.log('ERROR: MOD_Menu.subscribeToEvent : eventName "'+e+'" not recognised')}function p(e){elemsLen=e.length,foundFocused=!1;for(var t=0;t<elemsLen;t++){var a=e.eq(t);if(a.is(":focus")){0===t?(e.eq(e.length-1).focus(),a.blur()):(e.eq(t-1).focus(),a.blur()),foundFocused=!0;break}}foundFocused||e.eq(e.length-1).focus(),i.playSound("menuselect",1,void 0,void 0,void 0,!1,!1)}function y(e){elemsLen=e.length,foundFocused=!1;for(var t=0;t<elemsLen;t++){var a=e.eq(t);if(a.is(":focus")){t===elemsLen-1?(e.eq(0).focus(),a.blur()):(e.eq(t+1).focus(),a.blur()),foundFocused=!0;break}}foundFocused||e.eq(0).focus(),i.playSound("menuselect",1,void 0,void 0,void 0,!1,!1)}function x(t,a){var n=a.filter("input[type=range]"),r=n.length;if(r>0&&null!==j)for(var o=0;o<n.length;o++){var i=n[o];if(i===j){switch(t){case"left":i.stepDown(),e(i).trigger("change");break;case"right":i.stepUp(),e(i).trigger("change");break;default:console.log('ERROR: MOD_Menu.moveSelectedInput : direction "'+t+'" not recognised.')}return}}}function g(){z.up&&!B.up&&(z.up=!1),z.dn&&!B.dn&&(z.dn=!1),z.lt&&!B.lt&&(z.lt=!1),z.rt&&!B.rt&&(z.rt=!1),z.esc&&!B.esc&&(z.esc=!1),L.leftStick.fwd&&!N.leftStick.fwd&&(L.leftStick.fwd=!1),L.leftStick.back&&!N.leftStick.back&&(L.leftStick.back=!1),L.dPad.fwd&&!N.dPad.fwd&&(L.dPad.fwd=!1),L.dPad.back&&!N.dPad.back&&(L.dPad.back=!1),L.btnStart&&!N.btnStart&&(L.btnStart=!1),L.btnA&&!N.btnA&&(L.btnA=!1),L.btnB&&!N.btnB&&(L.btnB=!1)}function v(){if(B.esc&&!z.esc||N.btnStart&&!L.btnStart){m(E?"unpause":"pause"),L.btnStart=!0,z.esc=!0;var t=E?"menuclose":"menuopen";i.playSound(t,1,void 0,void 0,void 0,!1,!1)}if(O){var a=W[W.length-1];N.btnA&&!L.btnA&&(L.btnA=!0,a.buttons.filter(":focus").each(function(t,a){e(a).trigger("click")}),i.playSound("menuaction",1,void 0,void 0,void 0,!1,!1)),N.btnB&&!L.btnB&&(L.btnB=!0,a.buttons.filter(".menu__button--cancel").each(function(t,a){e(a).trigger("click")})),B.up&&!z.up&&(z.up=!0,p(a.buttons)),B.dn&&!z.dn&&(z.dn=!0,y(a.buttons)),N.leftStick.fwd&&!L.leftStick.fwd&&(L.leftStick.fwd=!0,p(a.buttons)),N.leftStick.back&&!L.leftStick.back&&(L.leftStick.back=!0,y(a.buttons)),N.rightStick.left&&x("left",a.buttons),N.rightStick.right&&x("right",a.buttons),N.dPad.fwd&&!L.dPad.fwd&&(L.dPad.fwd=!0,p(a.buttons)),N.dPad.back&&!L.dPad.back&&(L.dPad.back=!0,y(a.buttons))}}function b(e){F=n.getDeltaTime(),B=a.getKeyStates(),N=a.getPadStates(),E=e,g(),v()}function w(){for(var e={},t=Object.keys(V),a=t.length,n=0;a>n;n++){var r=t[n];e[r]=r}return e}function S(t){if(V.hasOwnProperty(t)){var a=V[t];a.buttons=a.elems.container.find("[data-menu-button]"),a.buttons.each(function(t,a){var n=e(a);n.on("click",function(e){e.preventDefault();var t=n.attr("data-button-click-event");"undefined"!=typeof t&&m(t),i.playSound("menuaction",1,void 0,void 0,void 0,!1,!1)})})}else console.log('ERROR: MOD_Menu.initScreenButtons : no screen with key "'+t+'".')}function T(){l(),s(!0),u("death")}function M(){H=w();for(var t=Object.keys(H),a=t.length,n=0;a>n;n++)S(t[n]);e("input").on("focus",function(e){j=this}),d("loadgame",function(){u(H.load)}),d("closeloadgame",function(){c(H.load)}),d("loadsave",function(){V.load.selectedSave.length>0&&u(H.confirmloadsave)}),d("cancelloadsave",function(){c(H.confirmloadsave)}),d("deletesave",function(){V.load.selectedSave.length>0&&u(H.confirmdeletesave)}),d("canceldeletesave",function(){c(H.confirmdeletesave)}),d("confirmdeletesave",function(){r.deleteSave(V.load.selectedSave.attr("data-saved-game-key")),c(H.confirmdeletesave),c(H.load),u(H.load)}),d("deleteallsaves",function(){r.deleteAllSaves(),c(H.load),u(H.load)}),d("options",function(){u(H.options)}),d("closeoptions",function(){c(H.options)}),o.subscribe(q.playerdied,T)}var D={newgame:{subscribers:[]},savegame:{subscribers:[]},loadgame:{subscribers:[]},closeloadgame:{subscribers:[]},deletesave:{subscribers:[]},deleteallsaves:{subscribers:[]},confirmdeletesave:{subscribers:[]},canceldeletesave:{subscribers:[]},loadsave:{subscribers:[]},confirmloadsave:{subscribers:[]},cancelloadsave:{subscribers:[]},pause:{subscribers:[]},unpause:{subscribers:[]},options:{subscribers:[]},mainmenu:{subscribers:[]},closeoptions:{subscribers:[]}},Y="show",X="selected",_="."+X,k="has--init",I=e("[data-menu]"),R="data-existing-save",C="data-saved-game-key",P="["+R+"]",A=r.getLocalStoragePrefix(),F=n.getDeltaTime(),O=!1,E=!1,q=o.getEventKeys(),B=a.getKeyStates(),N=a.getPadStates(),z={up:!1,dn:!1,lt:!1,rt:!1,esc:!1},L={leftStick:{fwd:!1,back:!1},dPad:{fwd:!1,back:!1},btnStart:!1,btnA:!1,btnB:!1},j=null,V={main:{elems:{container:e("[data-menu-screen-main]"),logo:e("[data-menu-screen-main-logo]")},buttons:e("[data-menu-screen-main] [data-menu-button]"),onShow:function(e){setTimeout(function(){e.container.addClass(k)},1)}},pause:{elems:{container:e("[data-menu-screen-pause]")},buttons:e("[data-menu-screen-pause] [data-menu-button]"),onShow:function(e){}},death:{elems:{container:e("[data-menu-screen-death]")},buttons:e("[data-menu-screen-death] [data-menu-button]"),onShow:function(e){}},load:{elems:{container:e("[data-menu-screen-load]"),savelist:e("[data-existing-saves-list]"),savefiles:e("[data-existing-save]")},buttons:{},selectedSave:e(""),dynamicTabIndexOffset:3,onShow:function(t){t.savelist.html("");for(var a=r.loadAllGameData(),n=Object.keys(a),o=n.length,i=0;o>i;i++){var s=n[i],l=s.replace(A,""),u=a[s];t.savelist.append('<li class="menu__saved-game-list-item" '+R+" "+C+'="'+l+'" data-menu-button data-button-click-event="loadsave" tabindex="'+(i+V.load.dynamicTabIndexOffset)+'">Level '+u.l+l+"</li>")}1>o&&t.savelist.append('<li class="menu__saved-game-list-item">No saves found</li>'),V.load.selectedSave=e(""),V.load.elems.savefiles=e("[data-existing-save]");var c=t.savelist.find(P);c.each(function(t,a){e(a).on("click",function(t){c.removeClass(X),e(this).addClass(X),V.load.selectedSave=V.load.elems.savefiles.filter("."+X)})}),S("load")}},options:{elems:{container:e("[data-menu-screen-options]")},buttons:e("[data-menu-screen-options] [data-menu-button]"),sliders:{audioVolMaster:{input:e("[data-menu-screen-options] [data-options-volume-master]"),output:e("[data-menu-screen-options] [data-options-volume-master-output]")},audioVolMusic:{input:e("[data-menu-screen-options] [data-options-volume-music]"),output:e("[data-menu-screen-options] [data-options-volume-music-output]")},audioVolSound:{input:e("[data-menu-screen-options] [data-options-volume-sound]"),output:e("[data-menu-screen-options] [data-options-volume-sound-output]")}},onShow:function(a){var n=t.getUserSettings(),r=V.options.sliders,o=r.audioVolMaster.input,s=r.audioVolMaster.output,l=r.audioVolMusic.input,u=r.audioVolMusic.output,c=r.audioVolSound.input,f=r.audioVolSound.output;o.val(n.audioVolumeMaster),s.text(n.audioVolumeMaster),l.val(n.audioVolumeMusic),u.text(n.audioVolumeMusic),c.val(n.audioVolumeSound),f.text(n.audioVolumeSound),o.on("change",function(a){var n=e(this),r=parseFloat(n.val());t.setUserSetting("audioVolumeMaster",r),s.text(r),i.playSound("menuaction",1,void 0,void 0,void 0,!1,!1)}),o.on("input",function(e){}),l.on("change",function(a){var n=e(this),r=parseFloat(n.val());t.setUserSetting("audioVolumeMusic",r),u.text(r),i.playSound("menuaction",1,void 0,void 0,void 0,!1,!1)}),l.on("input",function(e){}),c.on("change",function(a){var n=e(this),r=parseFloat(n.val());t.setUserSetting("audioVolumeSound",r),f.text(r),i.playSound("menuaction",1,void 0,void 0,void 0,!1,!1)}),c.on("input",function(e){})}},confirmloadsave:{elems:{container:e("[data-dialog-confirm-load-save]")},buttons:e("[data-dialog-confirm-load-save] [data-menu-button]"),onShow:function(e){}},confirmdeletesave:{elems:{container:e("[data-dialog-confirm-delete-save]")},buttons:e("[data-dialog-confirm-delete-save] [data-menu-button]"),onShow:function(e){}}},H={},W=[];return{init:M,update:b,setMenuVisible:s,setScreenActive:u,setAllScreensInactive:l,subscribeToEvent:d,unsubscribeFromEvent:h,getSelectedSave:f,getEventKeys:function(){for(var e=Object.keys(D),t=e.length,a={},n=0;t>n;n++){var r=e[n];a[r]=r}return a},getScreenKeys:w}}();return s}),define("gamestate",["enginevars","renderer","input","gameworld","player","worldrenderer","worldrenderergl","glrenderer","effects","projectiles","hud","ingamegui","assets","loadingscreen","menu","saveload","globalevents","audio"],function(e,t,a,n,r,o,i,s,l,u,c,f,m,d,h,p,y,x){var g=function(){function e(){h.subscribeToEvent(Y.newgame,g),h.subscribeToEvent(Y.pause,b),h.subscribeToEvent(Y.unpause,w),h.subscribeToEvent(Y.mainmenu,s),h.subscribeToEvent(Y.confirmloadsave,v)}function o(e){switch(M.hasOwnProperty(e)&&(X=M[e]),X){case M.mainmenu:D=!1,h.setAllScreensInactive(),h.setMenuVisible(!0),h.setScreenActive("main"),x.stopAll(),x.playSound("musictest01",1,void 0,void 0,void 0,void 0,!1,!0);break;case M.loadsave:h.setAllScreensInactive(),h.setMenuVisible(!1),x.stopAll(),D=!1;var t=n.init();r.init(t,n.getSceneData()),c.init();var a=h.getSelectedSave(),o=n.loadSaveFile(a);n.loadSaveData(o.saveData),r.loadSaveData(o.saveData),y.trigger(k.gameloaded);break;case M.loading:h.setAllScreensInactive(),h.setMenuVisible(!1),x.stopAll(),D=!1,_=!1;var t=n.init();r.init(t,n.getSceneData()),c.init();break;case M.cutscene:x.stopAll(),D=!1;break;case M.ingame:D=!1,h.setMenuVisible(!1),x.playSound("musiclevel1",1,void 0,void 0,void 0,!1,!0);break;default:console.log('ERROR: MOD_GameState.switchState() : current game state "'+X+'" not recognised')}}function s(){o(M.mainmenu)}function g(){o(M.loading)}function v(){o(M.loadsave)}function b(){X===M.ingame&&r.getAlive()&&(h.setMenuVisible(!0),h.setScreenActive("pause"),D=!0)}function w(){X===M.ingame&&r.getAlive()&&(h.setAllScreensInactive(),h.setMenuVisible(!1),D=!1)}function S(){p.init(),m.init(),x.init(),h.init(),f.init(),e(),t.init(),o(M.mainmenu)}function T(){if(a.update(),h.update(D),D)x.update();else switch(t.clear(!0),t.clearHud(),X){case M.mainmenu:x.update();break;case M.loadsave:d.update(),m.getAllLoaded()&&o(M.ingame),x.update();break;case M.loading:d.update(),m.getAllLoaded()&&o(M.ingame),x.update();break;case M.cutscene:x.update();break;case M.ingame:_=n.update();var e=n.getSceneData();r.update(e);var s=r.getPlayerData(),p=r.getPos(),y=r.getFwd(),g=r.getHudData();i.drawScene(e,s),l.update(p,e),u.update(p,e),x.update(p,y),c.update(g),f.update(),_&&o(M.loading);break;default:console.log('ERROR: MOD_GameState.update() : current game state "'+X+'" not recognised')}}var M={none:"none",mainmenu:"mainmenu",loading:"loading",cutscene:"cutscene",ingame:"ingame",loadsave:"loadsave"},D=!1,Y=h.getEventKeys(),X=(h.getScreenKeys(),M.none),_=!1,k=y.getEventKeys();return{init:S,update:T}}();return g}),require(["jquery","gamestate","time"],function(e,t,a){function n(){t.init(),window.requestAnimationFrame(r)}function r(){if(o++,p=a.getCurrent(),a.setDeltaTime(p-y),y=p,Date.now()-c>m_FrameCounterTickMS){var e=o-f;h&&(e>m&&(m=e),d>e&&(d=e)),i.text("loops: "+o),s.text("fps: "+e),u.text("high: "+m),l.text("low: "+d),c=Date.now(),f=o,h=Date.now()-x>3e3}t.update(),window.requestAnimationFrame(r)}var o=0,i=e("#loopCounter"),s=e("#fpsCounter"),l=e("#fpsLow"),u=e("#fpsHigh"),c=0,f=0,m=0,d=999,h=!1,p=a.getCurrent(),y=a.getCurrent();m_FrameCounterTickMS=1e3;var x=Date.now();n()}),define("main",function(){});